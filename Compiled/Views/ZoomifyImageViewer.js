/*
 Zoomify Image Viewer v2.7, Copyright Zoomify, Inc., 1999-2014. All rights reserved.
You may use this file on private and public websites, for personal and commercial purposes, with
or without modifications, so long as this notice is included. Redistribution via other means is not
permitted without prior permission. Additional terms apply. For complete license terms please see
the Zoomify License Agreement in this product and on the Zoomify website at www.zoomify.com.
::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::
*/
(function(){(function(){return this}).call().Z={}})();
Z.showImage=function(a,b,c){Z.showImage.done?(Z.Utils.declareGlobals(),Z.pageContainerID=a,Z.imagePath="undefined"!==typeof b&&null!==b?Z.Utils.stringRemoveTrailingSlashCharacters(b):null,"undefined"!==typeof c&&(Z.parameters=Z.Utils.parseParameters(c)),Z.initialize()):(Z.showImage.done=!0,Z.Utils.addCrossBrowserMethods(),Z.Utils.addCrossBrowserEvents(),Z.Utils.declareGlobals(),Z.pageContainerID=a,Z.setCallback=function(a,b){-1==Z.Utils.arrayIndexOfObjectTwoValues(Z.callbacks,"callbackEvent",a,null,
"callbackFunction",b)&&(Z.callbacks[Z.callbacks.length]={callbackEvent:a,callbackFunction:b})},Z.setEditPermissionFunction=function(a){Z.externalEditPermissionFunction=a},Z.clearCallback=function(a,b){var c=Z.Utils.arrayIndexOfObjectTwoValues(Z.callbacks,"callbackEvent",a,null,"callbackFunction",b);-1!=c&&(Z.callbacks=Z.Utils.arraySplice(Z.callbacks,c,1))},Z.getReady=function(){var a=!0;Z.Viewport&&!Z.Viewport.getInitialized()&&(a=!1);Z.annotations&&!Z.Viewport.getInitializedAnnotationPanel&&(a=!1);
!Z.ToolbarVisible||Z.Toolbar&&Z.Toolbar.getInitialized()||(a=!1);!Z.NavigatorVisible||Z.Navigator&&Z.Navigator.getInitialized()||(a=!1);!Z.RulerVisible||Z.Ruler&&Z.Ruler.getInitialized()||(a=!1);if(!a)window.setTimeout(Z.getReady,100);else if("function"===typeof Z.onReady)Z.onReady()},Z.imagePath="undefined"!==typeof b&&null!==b?Z.Utils.stringRemoveTrailingSlashCharacters(b):null,"undefined"!==typeof c&&(a=unescape(c),a=Z.Utils.stringUnescapeAmpersandCharacters(a),Z.parameters=Z.Utils.parseParameters(a)),
"complete"!=document.readyState?(Z.Utils.addEventListener(document,"DOMContentLoaded",Z.initialize),Z.Utils.addEventListener(window,"load",Z.initialize)):Z.initialize())};
Z.initialize=function(){Z.Utils.removeEventListener(document,"DOMContentLoaded",Z.initialize);Z.Utils.removeEventListener(window,"load",Z.initialize);Z.Utils.detectBrowserFeatures();Z.Utils.setParameters(Z.parameters);Z.Viewer=new Z.ZoomifyImageViewer;Z.Utils.stringValidate(Z.copyrightPath)?Z.Utils.enforceCopyright():Z.Viewer.configureViewer();0<Z.debug&&Z.Utils.trace(Z.Utils.getResource("z445"),!1,!0)};
Z.ZoomifyImageViewer=function(){Z.ViewerDisplay=Z.Utils.createContainerElement("div","ViewerDisplay","inline-block","relative","hidden","100%","100%","0px","0px","none","0px","transparent none","0px","0px","normal","pointer");Z.pageContainer=document.getElementById(Z.pageContainerID);var a=Z.Utils.getElementStyle(Z.pageContainer);Z.viewerW=parseFloat(a.width);Z.viewerH=parseFloat(a.height);-1!=a.width.indexOf("%")&&(Z.viewerW=parseFloat(Z.Utils.getElementStyleProperty(Z.pageContainer,"width")));-1!=
a.height.indexOf("%")&&(Z.viewerH=parseFloat(Z.Utils.getElementStyleProperty(Z.pageContainer,"height")));isNaN(Z.viewerW)&&(Z.viewerW=Z.ViewerDisplay.clientWidth);isNaN(Z.viewerH)&&(Z.viewerH=Z.ViewerDisplay.clientHeight);if(0==Z.viewerW||0==Z.viewerH)winDimensions=Z.Utils.getWindowSize(),0==Z.viewerW&&(Z.pageContainer.parentNode.style.width=winDimensions.x+"px",Z.viewerW=Z.pageContainer.clientWidth),0==Z.viewerH&&(Z.pageContainer.parentNode.style.height=winDimensions.y+"px",Z.viewerH=Z.pageContainer.clientHeight);
Z.pageContainer.innerHTML="";Z.pageContainer.appendChild(Z.ViewerDisplay);this.configureViewer=function(){Z.Viewport=new Z.ZoomifyViewport};this.configureComponents=function(){0<Z.toolbarVisible&&(Z.Toolbar=new Z.ZoomifyToolbar(Z.Viewport));0<Z.navigatorVisible&&(Z.Navigator=new Z.ZoomifyNavigator(Z.Viewport));Z.Navigator&&Z.Navigator.z682();Z.rulerVisible&&(Z.Ruler=new Z.ZoomifyRuler(Z.Viewport))};this.setSizeAndPosition=function(a,c,e,f,g){Z.viewerW=a;Z.viewerH=c;Z.ViewerDisplay.style.width=a+"px";
Z.ViewerDisplay.style.height=c+"px";Z.Viewport&&Z.Viewport.getInitialized()&&Z.Viewport.setSizeAndPosition(a,c,e,f);c=1==Z.toolbarPosition?c-Z.toolbarH:0;Z.ToolbarDisplay&&Z.Toolbar.getInitialized()&&(Z.Toolbar.setSizeAndPosition(a,null,null,c),Z.toolbarAutoShowHide&&Z.Toolbar.show(!0));Z.NavigatorDisplay&&Z.Navigator.getInitialized()&&(Z.Navigator.setSizeAndPosition(null,null,e,f,Z.navigatorFit),1<Z.navigatorVisible&&Z.Navigator.setVisibility(!0));g&&Z.Viewport.updateView(!0)};this.setImageWithFade=
function(a,c,e){Z.Viewport&&(Z.Viewport.getInitialized()||e)&&(Z.slideTransitionTimeout=window.setTimeout(function(){Z.Viewport.slideTransitionTimeoutHandler("out",a,c,e)},50))};this.setImage=function(a,c,e,f){Z.Viewport&&(Z.Viewport.getInitialized()||f)&&(Z.Viewport.zoomAndPanAllStop(!0),Z.imagePath=Z.Utils.stringRemoveTrailingSlashCharacters(a),Z.Utils.validateImagePath(),"undefined"!==typeof c&&(Z.parameters=Z.Utils.parseParameters(c)),f&&Z.Utils.setParameters(Z.parameters),e||(Z.imageProperties?
(a=Z.Utils.xmlConvertTextToDoc(imageProperties),Z.Viewport.z602(a)):(a=new Z.NetConnector,Z.Viewport.loadImageProperties(a))))};this.getImagePath=function(){return Z.imagePath};this.setTourPath=function(a,c){Z.Viewport&&Z.Viewport.getInitialized()&&Z.Viewport.setHotspotPath(a,c)};this.setHotspotPath=function(a,c){Z.Viewport&&Z.Viewport.getInitialized()&&Z.Viewport.setHotspotPath(a,c)};this.setAnnotationPath=function(a,c){Z.Viewport&&Z.Viewport.getInitialized()&&Z.Viewport.setAnnotationPath(a,c)};
this.initializePageExitEventHandler=function(){Z.Utils.addEventListener(window,"beforeunload",function(a){var c="";null!==Z.editing&&Z.Viewport.verifyEditsUnsaved()?c="You have unsaved edits. Return to page to save edits?":Z.editing=null;return(a||window.event).returnValue=c})}};
Z.ZoomifyViewport=function(){function a(d){d=Z.Utils.getResource("z209");".xml"!=Z.slidePath.toLowerCase().substring(Z.slidePath.length-4,Z.slidePath.length)&&(Z.slidePath=Z.slidePath+"/"+d);XMLPath=Z.Utils.cacheProofPath(Z.slidePath);"undefined"!==typeof XMLPath&&Z.Utils.stringValidate(XMLPath)&&(d=new Z.NetConnector,d.loadXML(XMLPath))}function b(d,a,b,n,v,c,e,ea,A,f,l){Z.imageW=d;Z.imageH=a;Z.imageCenterX=Z.imageW/2;Z.imageCenterY=Z.imageH/2;cd=c;pe=e;Ec=ea;dd=v;Ja=b;Ka=n;null!==A&&null!==f&&null!==
l&&(Z.sourceMagnification=A,Z.focal=f,Z.quality=l);s();k.validateXYZDefaults();tb>Ef?(lb=h(Zb,Z.initialZ),ia&&oCtx.scale(lb,lb)):ia=$b=oCtx=null;sc=h(Pa,Z.initialZ);tc=X=h(ra,Z.initialZ);Z.useCanvas&&La.scale(X,X);Ma&&qg();aa&&y();Z.virtualPointerVisible&&k.showVirtualPointer();x();Ld(Z.initialX,Z.initialY,Z.initialZ,Z.initialR);Z.initialFullPage&&k.toggleFullViewMode(!0);Z.Utils.addEventListener(document,"keydown",Na);Z.Utils.addEventListener(document,"keyup",Na);Z.mobileDevice?(Z.Utils.addEventListener(ja,
"touchstart",xa),Z.Utils.addEventListener(ja,"touchmove",xa),Z.Utils.addEventListener(ja,"touchend",xa),Z.Utils.addEventListener(ja,"touchcancel",xa),Z.Utils.addEventListener(ja,"gesturestart",xa),Z.Utils.addEventListener(ja,"gesturechange",xa),Z.Utils.addEventListener(ja,"gestureend",xa),document.getElementsByTagName("body")[0].onorientationchange=ed):(Z.Utils.addEventListener(Z.ViewerDisplay,"mouseover",xa),Z.Utils.addEventListener(Z.ViewerDisplay,"mouseout",xa),Z.Utils.addEventListener(Z.ViewerDisplay,
"mousemove",Z.Utils.preventDefault),Z.Utils.addEventListener(ja,"mousedown",xa),Z.Utils.addEventListener(ja,"mousemove",Z.Utils.preventDefault),Z.Utils.addEventListener(Z.ViewerDisplay,"mousewheel",xa),Z.Utils.addEventListener(Z.ViewerDisplay,"mousewheel",Z.Utils.preventDefault),Z.coordinatesVisible&&k.setCoordinatesDisplayVisibility(!0));Z.Utils.addEventListener(ba,"contextmenu",Z.Utils.preventDefault);Z.Utils.addEventListener(na,"contextmenu",Z.Utils.preventDefault);Ma&&Z.Utils.addEventListener(Ma,
"contextmenu",Z.Utils.preventDefault);aa&&Z.Utils.addEventListener(aa,"contextmenu",Z.Utils.preventDefault);p(!0);Z.Viewer.configureComponents();Z.slideshow&&(d=Z.Utils.stringValidate(Z.slideListTitle)&&"none"!=Z.slideListTitle?1:0,"undefined"!==typeof mb&&(mb.selectedIndex=d),Ff&&!Z.slideshowPlaying?k.slideshowStart():Z.slideshowPlaying&&k.nextSlide())}function c(d,a,b,n,v,c,e,ea,A,f,l){p(!1);Ma&&("undefined"!==typeof rg&&Z.Utils.arrayClear(rg),"undefined"!==typeof sg&&Z.Utils.arrayClear(sg));aa&&
("undefined"!==typeof q&&Z.Utils.arrayClear(q),"undefined"!==typeof ub&&Z.Utils.arrayClear(ub),null!=oa?"undefined"!==typeof ac&&Z.Utils.arrayClear(ac):("undefined"!==typeof fa&&Z.Utils.arrayClear(fa),"undefined"!==typeof Y&&Z.Utils.arrayClear(Y),"undefined"!==typeof za&&Z.Utils.arrayClear(za),"undefined"!==typeof ta&&Z.Utils.arrayClear(ta),"undefined"!==typeof Fb&&Z.Utils.arrayClear(Fb)));Pa=ra=0;Xa=!1;qe=Gf=Zb=0;"undefined"!==typeof eb&&Z.Utils.arrayClear(eb);"undefined"!==typeof fb&&Z.Utils.arrayClear(fb);
"undefined"!==typeof Gb&&Z.Utils.arrayClear(Gb);"undefined"!==typeof Qa&&Z.Utils.arrayClear(Qa);"undefined"!==typeof cb&&Z.Utils.arrayClear(cb);"undefined"!==typeof Hb&&Z.Utils.arrayClear(Hb);"undefined"!==typeof Md&&Z.Utils.arrayClear(Md);"undefined"!==typeof kc&&Z.Utils.arrayClear(kc);"undefined"!==typeof Pb&&Z.Utils.arrayClear(Pb);"undefined"!==typeof Oc&&Z.Utils.arrayClear(Oc);"undefined"!==typeof Fa&&Z.Utils.arrayClear(Fa);"undefined"!==typeof pa&&Z.Utils.arrayClear(pa);"undefined"!==typeof gb&&
Z.Utils.arrayClear(gb);Z.imageW=d;Z.imageH=a;Z.imageCenterX=Z.imageW/2;Z.imageCenterY=Z.imageH/2;cd=c;pe=e;Ec=ea;dd=v;Ja=b;Ka=n;s();Z.Utils.setParameters(Z.parameters);k.validateXYZDefaults();tb>Ef?(lb=h(Zb,Z.initialZ),oCtx.restore(),oCtx.scale(lb,lb)):ia=$b=oCtx=null;sc=h(Pa,Z.initialZ);tc=X=h(ra,Z.initialZ);Z.useCanvas&&(La.restore(),La.scale(X,X));ia&&Z.Utils.clearDisplay(ia);ba&&Z.Utils.clearDisplay(ba);na&&Z.Utils.clearDisplay(na);vb&&Z.Utils.clearDisplay(vb);Qb&&Z.Utils.clearDisplay(Qb);Ma&&
Z.Utils.clearDisplay(Ma);aa&&Z.Utils.clearDisplay(aa);Ya&&Z.Utils.clearDisplay(Ya);Aa&&Z.Utils.clearDisplay(Aa);Pc&&Z.Utils.clearDisplay(Pc);Qc&&Z.Utils.clearDisplay(Qc);Ma&&qg();aa&&y();Z.virtualPointerVisible&&k.showVirtualPointer();x();k.setSizeAndPosition(Ga,Ba,Hf,re);Ld(Z.initialX,Z.initialY,Z.initialZ);p(!0);Z.Navigator&&0<Z.navigatorVisible&&Z.Navigator.setImage(Z.imagePath);Z.slideshowPlaying&&k.nextSlide()}function e(){tb=1;"undefined"!==typeof Rb&&Z.Utils.arrayClear(Rb);"undefined"!==typeof bc&&
Z.Utils.arrayClear(bc);"undefined"!==typeof nb&&Z.Utils.arrayClear(nb);"undefined"!==typeof cc&&Z.Utils.arrayClear(cc);"undefined"!==typeof Sb&&Z.Utils.arrayClear(Sb);"undefined"!==typeof Rc&&Z.Utils.arrayClear(Rc);"undefined"!==typeof tierTileOffsetsCount&&Z.Utils.arrayClear(tierTileOffsetsCount);"undefined"!==typeof tierTileOffsetChunks&&Z.Utils.arrayClear(tierTileOffsetChunks);"undefined"!==typeof tierTileOffsetLast&&Z.Utils.arrayClear(tierTileOffsetLast);"undefined"!==typeof uc&&Z.Utils.arrayClear(uc);
"undefined"!==typeof tierTileByteCountsCount&&Z.Utils.arrayClear(tierTileByteCountsCount);"undefined"!==typeof tierTileByteCountChunks&&Z.Utils.arrayClear(tierTileByteCountChunks);"undefined"!==typeof tierTileByteCountLast&&Z.Utils.arrayClear(tierTileByteCountLast);"undefined"!==typeof Ib&&Z.Utils.arrayClear(Ib);"undefined"!==typeof ff&&Z.Utils.arrayClear(ff)}function f(d,a,b,n){if("undefined"===typeof b||null===b)b=0;if("undefined"===typeof n||null===n)n=0;Z.viewerW=Ga=d;Z.viewerH=Ba=a;Ha=Ga*tg;
Ca=Ba*tg;wb=Ha/2;Jb=Ca/2;sb=-((Ha-Ga)/2)+b;hb=-((Ca-Ba)/2)+n;ia&&(ia.width=Ga,ia.height=Ba,$b.width=Ga+"px",$b.height=Ba+"px",$b.left="0px",$b.top="0px");ja.width=Ha;ja.height=Ca;J.width=Ha+"px";J.height=Ca+"px";J.left=sb+"px";J.top=hb+"px";na.width=Ha;na.height=Ca;ua.width=Ha+"px";ua.height=Ca+"px";Ma&&(Ma.width=Ha,Ma.height=Ca,Nd.width=Ha+"px",Nd.height=Ca+"px");aa&&(aa.width=Ha,aa.height=Ca,vc.width=Ha+"px",vc.height=Ca+"px",If&&(d=parseInt(Z.Utils.getResource("z133"),10),d=gf(Jf,d,Ga,Ba),Kf.left=
d.x+"px",Kf.top=d.y+"px"));Ya&&(Ya.width=Ha,Ya.height=Ca,wc.width=Ha+"px",wc.height=Ca+"px");Aa&&(Aa.width=Ha,Aa.height=Ca,lc.width=Ha+"px",lc.height=Ca+"px");hf&&(d=new k.calculateAnnotationPanelDimensions(wd,xb,xd),a=k.calculateAnnotationPanelCoords(jf,d.w,d.h,Ga,Ba),k.sizeAndPositionAnnotationPanel(se,d.w,d.h,a.x,a.y));Z.useCanvas&&(ia&&(oCtx.translate(Ga/2,Ba/2),oCtx.save()),La.translate(wb,Jb),La.save(),Ya&&(kf.translate(wb,Jb),kf.save()),Aa&&(va.translate(wb,Jb),va.save()))}function g(d){if("ZoomifyImageFile"==
Z.tileSource){var a=parseFloat(Z.Utils.getResource("z125")),b=parseFloat(Z.Utils.getResource("z124"));d.loadByteRange(Z.imagePath,a,b,"header")}else if("ZoomifyImageFolder"==Z.tileSource)a=Z.Utils.cacheProofPath(Z.imagePath+"/ImageProperties.xml"),d.loadXML(a);else if("ZoomifyPFFFile"==Z.tileSource){var a=Z.Utils.getResource("z125"),b=Z.Utils.getResource("z123"),n=Z.imagePath.replace(".","%2E");d.loadXML(Z.tileHandlerPathFull+"?file="+n+"&requestType=1&begin="+a+"&end="+b)}}function m(d,a){e();if("undefined"===
typeof k.getInitialized)window.setTimeout(function(){m(d,a)},100);else{var Bd=null,n=null,v=null,L=null,zd=null,ea=null,A=null,f=null,h=null,l=null,g=null;"ZoomifyImageFolder"==Z.tileSource?(Bd=parseInt(d.documentElement.getAttribute("WIDTH"),10),n=parseInt(d.documentElement.getAttribute("HEIGHT"),10),zd=parseInt(d.documentElement.getAttribute("NUMTILES"),10),parseInt(d.documentElement.getAttribute("NUMIMAGES"),10),ea=parseInt(d.documentElement.getAttribute("VERSION"),10),v=L=parseInt(d.documentElement.getAttribute("TILESIZE"),
10)):"ZoomifyPFFFile"==Z.tileSource?(Bd=parseInt(d.documentElement.getAttribute("WIDTH"),10),n=parseInt(d.documentElement.getAttribute("HEIGHT"),10),v=L=parseInt(d.documentElement.getAttribute("TILESIZE"),10),zd=parseInt(d.documentElement.getAttribute("NUMTILES"),10),parseInt(d.documentElement.getAttribute("NUMIMAGES"),10),ea=parseInt(d.documentElement.getAttribute("VERSION"),10),A=parseInt(d.documentElement.getAttribute("HEADERSIZE"),10),f=1060+A):"ImageServer"==Z.tileSource&&(Bd=parseInt(d.documentElement.getAttribute("WIDTH"),
10),n=parseInt(d.documentElement.getAttribute("HEIGHT"),10),L=d.documentElement.getAttribute("TILESIZE"),v=Z.Utils.stringValidate(L)?parseInt(L,10):Ja,L=Z.Utils.stringValidate(L)?parseInt(L,10):Ka,h=d.documentElement.getAttribute("MAGNIFICATION"),h=Z.Utils.stringValidate(h)?parseInt(h,10):Z.sourceMagnification,l=d.documentElement.getAttribute("FOCAL"),l=Z.Utils.stringValidate(l)?parseInt(l,10):Z.focal,g=d.documentElement.getAttribute("QUALITY"),g=Z.Utils.stringValidate(g)?parseInt(g,10):Z.quality);
null!==Z.tileW&&(v=Z.tileW);null!==Z.tileH&&(L=Z.tileH);if("ZoomifyImageFolder"==Z.tileSource||"ImageServer"==Z.tileSource){if(null===v||isNaN(v))v=Ja;if(null===L||isNaN(L))L=Ka;if(null===zd||isNaN(zd))zd=1}!isNaN(Bd)&&0<Bd&&!isNaN(n)&&0<n&&!isNaN(v)&&0<v&&!isNaN(L)&&0<L&&0<zd?k.getInitialized()?c(Bd,n,v,L,zd,ea,A,f,h,l,g,a):b(Bd,n,v,L,zd,ea,A,f,h,l,g,a):"ZoomifyImageFolder"==Z.tileSource?Z.Utils.showMessage(Z.Utils.getResource("z252")):Z.Utils.showMessage(Z.Utils.getResource("z250"))}}function s(){var d;
if("ZoomifyImageFile"==Z.tileSource)for(d=tb-1;0<=d;d--)nb[d]=Math.ceil(Rb[d]/Ja),cc[d]=Math.ceil(bc[d]/Ka),Sb[d]=nb[d]*cc[d];else{d=Z.imageW;for(var a=Z.imageH;d>Ja||a>Ka;)d/=2,a/=2,tb++;d=Z.imageW;for(var a=Z.imageH,b=0,n=tb-1;0<=n;n--)Rb[n]=d,bc[n]=a,nb[n]=Math.ceil(Rb[n]/Ja),cc[n]=Math.ceil(bc[n]/Ka),Sb[n]=nb[n]*cc[n],d/=2,a/=2,b+=Sb[n];if(b!=dd&&("ZoomifyImageFolder"==Z.tileSource||"ZoomifyImageFile"==Z.tileSource||"ZoomifyPFFFile"==Z.tileSource)){Rb=[];bc=[];nb=[];cc=[];tb=1;d=Z.imageW;a=Z.imageH;
for(b=2;d>Ja||a>Ka;)d=Math.floor(Z.imageW/b),a=Math.floor(Z.imageH/b),b*=2,d%2&&d++,a%2&&a++,tb++;d=Z.imageW;a=Z.imageH;b=2;tileCounter=0;for(n=tb-1;0<=n;n--)nb[n]=Math.floor(d/Ja),d%Ja&&nb[n]++,cc[n]=Math.floor(a/Ka),a%Ka&&cc[n]++,Sb[n]=nb[n]*cc[n],tileCounter+=Sb[n],Rb[n]=d,bc[n]=a,d=Math.floor(Z.imageW/b),a=Math.floor(Z.imageH/b),b*=2,d%2&&d++,a%2&&a++;d=tileCounter;d!=dd&&Z.Utils.showMessage(Z.Utils.getResource("z254"))}}}function p(d){Od=d;Z.Utils.validateCallback("viewportInitialized");Z.Viewport&&
Z.Viewport.getInitialized()&&Z.Toolbar&&Z.Toolbar.getInitialized()&&Z.Navigator&&Z.Navigator.getInitialized()&&Z.Utils.validateCallback("viewerInitialized")}function x(){C(ug);tb>vg&&(C(wg),tb>xg&&C(Lf));fb.sort();fb=Z.Utils.arrayUnique(fb);S(fb,W,"simple","image-backfill")}function C(d){for(var a=nb[d]-1,b=cc[d]-1,n=0;n<=b;n++)for(var v=0;v<=a;v++)fb[fb.length]=d+"-"+v+"-"+n}function t(d){if(d){d=Ra(Pa);Z.Utils.arrayClear(fb);a=d.t;for(b=d.b;a<=b;a++)for(n=d.l,v=d.r;n<=v;n++)fb[fb.length]=Pa+"-"+
n+"-"+a;fb.sort();fb=Z.Utils.arrayUnique(fb);k.validateView("tilesToLoad-backfill",null,null,fb);S(fb,W,"simple","image-backfill")}else{Z.Utils.arrayClear(Gb);Z.Utils.arrayClear(Md);Z.Utils.arrayClear(kc);Z.Utils.arrayClear(Qa);d=Ra();for(var a=d.t,b=d.b;a<=b;a++)for(var n=d.l,v=d.r;n<=v;n++)Gb[Gb.length]=ra+"-"+n+"-"+a;Gb.sort();Gb=Z.Utils.arrayUnique(Gb);cb=Z.Utils.arraySortByObjectValue(cb,"name");cb=Z.Utils.arrayUniqueByObjectValue(cb,"name");a=0;for(b=cb.length;a<b;a++)(n=cb[a])&&n.t==ra&&n.c>=
d.l&&n.c<=d.r&&n.r>=d.t&&n.r<=d.b&&(Md[Md.length]=n,kc[kc.length]=n.name);Qa=Z.Utils.arraySubtract(Gb,kc);Hb=Z.Utils.arraySubtract(Hb,kc);Hb=Hb.concat(kc);if(0!=qe){a=0;for(b=Pb.length;a<b;a++)n=Pb[a],n.alpha=1;Z.Utils.arrayClear(Pb)}if(0==Z.debug||1==Z.debug)k.validateView("tilesToDisplay",null,Gb.length),k.validateView("tilesInCache",null,kc.length),k.validateView("tilesToLoad",null,Qa.length);else if(2==Z.debug||3==Z.debug)k.validateView("tilesToDisplay",null,Gb.length,Gb),k.validateView("tilesInCache",
null,kc.length,kc),k.validateView("tilesToLoad",null,Qa.length,Qa)}}function B(d,a,b,n,v,c){v||Z.Utils.clearDisplay(d);if("canvasCopy"==n)Z.Utils.clearDisplay(na),La.restore(),La.save(),La.scale(1,1),La.drawImage(vb,-wb,-Jb),La.restore(),La.save(),La.scale(X,X);else{v=Ra(a);c=[];if(null===b)c=Md;else if(0<b.length){b=Z.Utils.arraySortByObjectValue(b,"name");b=Z.Utils.arrayUniqueByObjectValue(b,"name");for(var e=0,ea=b.length;e<ea;e++){var A=b[e];A&&A.t==a&&(a==Pa&&!Xa||A.c>=v.l&&A.c<=v.r&&A.r>=v.t&&
A.r<=v.b)&&(c[c.length]=b[e])}}if(0<c.length)if(k.validateView("z622-"+d.id,null,null,c),"centerOut"==n)for(e=Math.floor(c.length/2),ea=c.length;e<ea;e++)ca(d,a,c[e]),c.length-e-1!=e&&ca(d,a,c[c.length-e-1]);else for(e=0,ea=c.length;e<ea;e++)ca(d,a,c[e]);else k.validateView("No cached tiles in view");k.validateView("blankLine")}}function K(d,a){var b=Ra();syncTransitionCanvas();for(var n=0,v=a.length;n<v;n++){var c=a[n];c&&c.t==d&&(d==Pa||c.c>=b.l&&c.c<=b.r&&c.r>=b.t&&c.r<=b.b)&&ca(vb,d,c)}}function S(d,
a,b,n){var v="undefined"!==typeof n&&null!==n?"-"+n:"";if(0<d.length){k.validateView("z577"+v,null,null,d);v=(new Date).getTime();if("centerOut"==b){b=Math.floor(d.length/2);for(var c=d.length;b<c;b++){var e=d[b];e&&(e=new T(e,n),U(e,v,a));d.length-b-1!=b&&(e=d[d.length-b-1])&&(e=new T(e,n),U(e,v,a))}}else for(b=0,c=d.length;b<c;b++)if(e=d[b])e=new T(e,n),U(e,v,a);k.validateView("blankLine")}else k.validateView("z577"+v,"No new tiles requested")}function T(d,a){this.name=d;this.t=parseInt(d.substring(0,
d.indexOf("-")),10);this.c=parseInt(d.substring(d.indexOf("-")+1,d.lastIndexOf("-")),10);this.r=parseInt(d.substring(d.lastIndexOf("-")+1),10);this.x=Math.floor(this.c*Ja);this.y=Math.floor(this.r*Ka);this.image=null;this.alpha=0;this.url=k.formatTilePath(this.t,this.c,this.r,a);this.style=this.elmt=this.loadTime=null}function N(d,a,b){b=a+b*nb[d];a=8*b+Rc[d];b=Math.floor(b/Sa);var n=b*Sa,n=n+Sa>Sb[d]?8*(Sb[d]-n):Pd;this.chunkStart=Rc[d]+b*Pd;this.chunkEnd=this.chunkStart+n;this.offsetStartInChunk=
a-this.chunkStart;this.chunkID=d.toString()+"-"+b.toString()}function D(d,a,b){b=a+b*nb[d];a=4*b+uc[d];b=Math.floor(b/Sa);var n=b*Sa,n=n+Sa>Sb[d]?4*(Sb[d]-n):Qd;this.chunkStart=uc[d]+b*Qd;this.chunkEnd=this.chunkStart+n;this.bcStartInChunk=a-this.chunkStart;this.chunkID=d.toString()+"-"+b.toString()}function M(d,a,b){ff[d]=b;b=Z.imagePath.replace(".","%2E");d=Z.tileHandlerPathFull+"?file="+b+"&requestType=2&begin="+d+"&end="+a;(new Z.NetConnector).loadXML(d)}function w(d,a){for(var b=0,n=Fa.length;b<
n;b++){var v=Fa[b].split(",");v[0]==d&&v[5]==a&&(void 0!==v[4]&&"image-display"==v[4]?pa[pa.length]=v[1]+"-"+v[2]+"-"+v[3]:"image-backfill"==v[4]&&(gb[gb.length]=v[1]+"-"+v[2]+"-"+v[3]),Fa=Z.Utils.arraySplice(Fa,b,1),b--,n--)}0<pa.length&&(pa.sort(),pa=Z.Utils.arrayUnique(pa),k.validateView("z637",pa),r(pa,ha,"simple","image-display"));0<gb.length&&(gb.sort(),gb=Z.Utils.arrayUnique(gb),r(gb,W,"simple","image-backfill"))}function r(d,a,b,n){b=(new Date).getTime();for(var v=0,c=d.length;v<c;v++){var e=
null;if(e=d[v])if(d=Z.Utils.arraySplice(d,v,1),v--,c--,index=Z.Utils.arrayIndexOfObjectValue(Oc,"name",e),-1!=index?(e=Oc[index],Oc=Z.Utils.arraySplice(Oc,index,1),e.url=k.formatTilePath(e.t,e.c,e.r,n)):e=new T(e,n),null!=e&&-1==e.url.indexOf("NaN"))k.validateView("z577Retry",e.name+"  "+e.url),U(e,b,a);else if(-1==e.url.indexOf("NaN")){var ea=parseInt(Z.Utils.getResource("z268MEDIUM"),10);Z.Utils.showMessage(Z.Utils.getResource("z280-ZIF")+e.name+".jpg",!1,ea,"center",!1)}}}function U(d,a,b){var n=
d.name;if("z647"==d.url.substr(0,8)){0<mc&&(cb[cb.length]=d,Hb[Hb.length]=d.name);a=Z.Utils.arrayIndexOf(Qa,d.name);-1!=a&&(Qa=Z.Utils.arraySplice(Qa,a,1));if("ZoomifyImageFile"==Z.tileSource||"ZoomifyPFFFile"==Z.tileSource)a=Z.Utils.arrayIndexOf(pa,d.name),-1!=a&&(pa=Z.Utils.arraySplice(pa,a,1));Pb[Pb.length]=d}else"offsetLoading"!=d.url?(b==ha&&(type="image-display"),b==W&&(type="image-backfill"),d.loadTime=a,k.validateView("z581-"+type,n),ah.loadImage(d.url,Z.Utils.createCallback(null,b,d),type,
d)):"offsetLoading"==d.url&&(-1==Z.Utils.arrayIndexOfObjectValue(Oc,"name",n)&&(Oc[Oc.length]=d),k.validateView("z581DelayForOffset",n))}function ha(d,a){if(d&&a){d.image=a;var b=d.name,n=Z.Utils.arrayIndexOf(Qa,b);if(-1!=n){Qa=Z.Utils.arraySplice(Qa,n,1);0<mc&&(cb[cb.length]=d,Hb[Hb.length]=b);-1==Z.Utils.arrayIndexOf(Pb,d)&&(Pb[Pb.length]=d);lf||(lf=window.setInterval(O,50));qe=Qa.length;if(0==qe){Z.useCanvas&&0<mc&&(Mf?(K(ra,cb),B(na,ra,cb,"canvasCopy",!1,"4. Updating view: all new tiles loaded"),
window.setTimeout(function(){Z.Utils.clearDisplay(vb)},200),Mf=!1):B(na,ra,cb,"centerOut",!1,"4. Updating view: all new tiles loaded"));Z.imageFiltersVisible&&fd&&gd(null,null,!0);if(Hb.length>mc)for(;Hb.length>mc&&0<cb.length;)j=Z.Utils.arrayIndexOf(Hb,cb[0].name),-1!=j&&(Hb=Z.Utils.arraySplice(Hb,j,1)),cb=Z.Utils.arraySplice(cb,0,1);Gf=0}k.validateView("onTileLoad",d.name,d.loadTime);k.updateProgress(Gf,qe)}}else"undefined"!==typeof a&&null!==a||console.log(Z.Utils.getResource("z280")+d.name+".jpg")}
function W(d,a){if(d&&a){d.image=a;var b=d.name;eb[eb.length]=d;var n=Z.Utils.arrayIndexOf(fb,b);-1!=n&&(fb=Z.Utils.arraySplice(fb,n,1));if("ZoomifyImageFile"==Z.tileSource||"ZoomifyPFFFile"==Z.tileSource)b=Z.Utils.arrayIndexOf(gb,b),-1!=b&&(gb=Z.Utils.arraySplice(gb,b,1));d.alpha=1;d.t==Pa&&ca(ba,Pa,d);k.validateView("z599",d.name)}else if("undefined"===typeof a||null===a)Z.mobileDevice?console.log(Z.Utils.getResource("z280")+d.name+".jpg"):Z.Utils.showMessage(Z.Utils.getResource("z280")+d.name+
".jpg")}function O(d){for(var a=d=0,b=Pb.length;a<b;a++){var n=Pb[a];n.t==ra?(0!=Nf&&1>n.alpha+Nf?n.alpha+=Nf:(n.alpha=1,d++),ca(na,ra,n),d>=b&&(window.clearInterval(lf),lf=null,a=b)):(Pb=Z.Utils.arraySplice(Pb,a,1),n=Z.Utils.arrayIndexOf(Qa,n.name),-1!=n&&(Qa=Z.Utils.arraySplice(Qa,n,1)),b--)}}function ca(d,a,b){if("z647"!=b.url.substr(0,8)&&0!=b.image.width&&0!=b.image.height){k.validateView("z507",b.name);var n=b.x,v=b.y;a=la(a,1);lb=h(Zb,k.getZoom());var c=8<lb;Z.useCanvas?(d==na||d==vb||d==ba&&
Xa?(n-=Z.imageX*a,v-=Z.imageY*a):d==ia&&(Xa||c)&&(c=k.calculateCurrentCenterCoordinates(),n-=c.x*a,v-=c.y*a),a=d.getContext("2d"),Z.alphaSupported&&1>b.alpha&&"transitionCanvas"!=d.id&&"oversizeDisplay"!=d.id&&!fd&&(a.globalAlpha=b.alpha),Z.imageFiltersVisible&&0!=yb.length?fd?("oversizeDisplay"==d.id?a=oCtx:"viewportDisplay"==d.id?a=Rd:"viewportBackfillDisplay"==d.id?a=Of:"transitionCanvas"==d.id&&(a=Rd),a.drawImage(b.image,n,v)):(c=Z.Utils.getImageData(b.image),c=Sd(c),Z.Utils.clearDisplay(vb),
Td.putImageData(c,0,0),a.drawImage(vb,n,v)):a.drawImage(b.image,n,v),Z.alphaSupported&&1>b.alpha&&"transitionCanvas"!=d.id&&"oversizeDisplay"!=d.id&&!fd&&(a.globalAlpha=1),2==Z.debug&&Za(d,b.name,n,v,X)):(d==na?(n-=Z.imageX*a-wb/X,v-=Z.imageY*a-Jb/X,a=X):a=sc,b.elmt||(b.elmt=Z.Utils.createContainerElement("img"),b.elmt.onmousedown=Z.Utils.preventDefault,Z.Utils.addEventListener(b.elmt,"contextmenu",Z.Utils.preventDefault),b.elmt.src=b.url,b.style=b.elmt.style,b.style.position="absolute",Z.Utils.renderQuality(b,
Z.renderQuality),Z.cssTransformsSupported&&(b.style[Z.cssTransformProperty+"Origin"]="0px 0px")),b.elmt.parentNode!=d&&d.appendChild(b.elmt),c=b.style,c.display="none",Z.cssTransformsSupported?c[Z.cssTransformProperty]=["matrix(",(b.image.width/b.elmt.width*a).toFixed(8),",0,0,",(b.image.height/b.elmt.height*a).toFixed(8),",",(n*a).toFixed(8),Z.cssTransformNoUnits?",":"px,",(v*a).toFixed(8),Z.cssTransformNoUnits?")":"px)"].join(""):(c.width=b.image.width*a+"px",c.height=b.image.height*a+"px",c.left=
n*a+"px",c.top=v*a+"px"),c.display="inline-block",Z.Utils.setOpacity(b,b.alpha),2==Z.debug&&Za(d,b.name,n,v,a))}}function Za(d,a,b,n,v){if(Z.useCanvas){var c=parseInt(Z.Utils.getResource("z129"),10),e=parseInt(Z.Utils.getResource("z160"),10),ea=parseInt(Z.Utils.getResource("z151"),10),c=Math.round(c*v),e=2*(c<e?e:c>ea?ea:c);d=d.getContext("2d");d.font=e+"px verdana";d.textAlign="left";d.textBaseline="top";e=Ja*v/2;v=Ka*v/2;d.fillStyle="#FFFFFF";d.fillText(a,b+e,n+v);d.fillStyle="#000000";d.fillText(a,
b+e+1,n+v+1)}else{var c=parseInt(Z.Utils.getResource("z129"),10),e=parseInt(Z.Utils.getResource("z160"),10),ea=parseInt(Z.Utils.getResource("z151"),10),c=Math.round(c*v),A=2*(c<e?e:c>ea?ea:c),e=parseInt(Z.Utils.getResource("z130"),10)*v,ea=Z.Utils.createContainerElement("div","tileNameTextBox","inline-block","absolute","hidden","auto","auto","1px","1px","none","0px","transparent none","0px",e+"px","nowrap"),c=document.createTextNode(a);ea.appendChild(c);d.appendChild(ea);Z.Utils.setTextNodeStyle(c,
"white","verdana",A+"px","none","normal","normal","normal","normal","1em","center","none");var f=Z.Utils.createContainerElement("div","tileNameTextBox2","inline-block","absolute","hidden","auto","auto","1px","1px","none","0px","transparent none","0px",e+"px","nowrap"),k=document.createTextNode(a);f.appendChild(k);d.appendChild(f);Z.Utils.setTextNodeStyle(k,"black","verdana",A+"px","none","normal","normal","normal","normal","1em","center","none");e=parseFloat(ea.style.padding);d=parseFloat(Z.Utils.getElementStyleProperty(ea,
"width"));isNaN(d)&&(d=parseFloat(Z.Utils.getResource("z115")),d=parseFloat(ea.style.fontSize)/d,d=Math.round(parseFloat(a.length*d)));a=Ja*v/2;A=Ka*v/2;ea.style.left=b*v+(a-d/2-e)+"px";ea.style.top=n*v+A+"px";f.style.left=1+b*v+(a-d/2-e)+"px";f.style.top=1+n*v+A+"px";Z.Utils.addEventListener(ea,"contextmenu",Z.Utils.preventDefault);Z.Utils.disableTextInteraction(c);Z.Utils.addEventListener(f,"contextmenu",Z.Utils.preventDefault);Z.Utils.disableTextInteraction(k)}}function Ra(d,a){if("undefined"===
typeof d||null===d)d=ra;if("undefined"===typeof a||null===a)a=!1;return new ka(Oa(a),d)}function Oa(d){var a=parseFloat(J.left)-sb,b=parseFloat(J.top)-hb;if(Z.useCanvas)var n=parseFloat(J.width)/ja.width,a=a/n,b=b/n;n=k.getZoom();0!=a&&(a/=n);0!=b&&(b/=n);a=Z.imageX-a;b=Z.imageY-b;if(d){d=-(Ga/2);var v=Ga/2,c=-(Ba/2),e=Ba/2}else d=-(Ha/2),v=Ha/2,c=-(Ca/2),e=Ca/2;return new Q(a,b,d,v,c,e,n)}function ka(d,a){var b=la(a,1),n=Math.floor(d.l*b/Ja),v=Math.floor(d.r*b/Ja),c=Math.floor(d.t*b/Ka),b=Math.floor(d.b*
b/Ka);0>n&&(n=0);v>nb[a]-1&&(v=nb[a]-1);0>c&&(c=0);b>cc[a]-1&&(b=cc[a]-1);this.l=n;this.r=v;this.t=c;this.b=b}function Q(d,a,b,n,v,c,e){this.l=d+b/e;this.r=d+n/e;this.t=a+v/e;this.b=a+c/e}function E(d,a){var b=d-Z.Utils.getElementPosition(Z.ViewerDisplay).x,n=a-Z.Utils.getElementPosition(Z.ViewerDisplay).y;return new Z.Utils.Point(b,n)}function F(d,a){var b=E(d,a),n=Z.Utils.getPageScroll();return new Z.Utils.Point(b.x-sb+n.x,b.y-hb+n.y)}function G(d,a,b,n){if("undefined"===typeof b||null===b)b=Z.imageZ;
if("undefined"===typeof n||null===n)n=Z.imageR;0>n&&(n+=360);var v=parseFloat(J.left)+wb,c=parseFloat(J.top)+Jb;d-=v;a-=c;0!=Z.imageR&&(viewportClickPt=Z.Utils.rotatePoint(d,a,n),d=viewportClickPt.x,a=viewportClickPt.y);return new Z.Utils.Point(Z.imageX+d/b,Z.imageY+a/b)}function Da(d,a,b,n){if("undefined"===typeof b||null===b)b=Z.imageZ;if("undefined"===typeof n||null===n)n=Z.imageR;0>n&&(n+=360);d=(Z.imageX-d)*b;a=(Z.imageY-a)*b;0!=Z.imageR&&(viewportClickPt=Z.Utils.rotatePoint(d,a,-n),d=viewportClickPt.x,
a=viewportClickPt.y);return new Z.Utils.Point(sb+d,hb+a)}function Tb(d){var a=Z.imageW/Z.imageH>Ga/Ba?Ga/Z.imageW:Ba/Z.imageH;if(90==d||270==d)a=Z.imageW/Z.imageH>Ga/Ba?Ga/Z.imageH:Ba/Z.imageW;return a}function la(d,a){return Rb[d]/Z.imageW*a}function h(d,a){return a/(Rb[d]/Z.imageW)}function ma(d,a,b,n,v){if(Z.constrainPan){n=Math.round(n);var c=d,e=a;b="undefined"!==typeof b&&null!==b?b:Z.imageZ;n="undefined"!==typeof n&&null!==n?n:Z.imageR;0>n&&(n+=360);var ea=Z.Utils.getDisplayPositionRotated(J,
n),A=Z.imageW,f=Z.imageH,k=Ga,h=Ba,l=Math.round(A*b),g=Math.round(f*b);if("container"==v){var m=b,r=n;if("undefined"===typeof m||null===m)m=Z.imageZ;if("undefined"===typeof r||null===r)r=Z.imageR;0>r&&(r+=360);d=(sb-d)/m;a=(hb-a)/m;var p,t;switch(r){case 0:p=Z.imageX+d;t=Z.imageY+a;break;case 90:p=Z.imageX+a;t=Z.imageY-d;break;case 180:p=Z.imageX-d;t=Z.imageY-a;break;case 270:p=Z.imageX-a,t=Z.imageY+d}a=new Z.Utils.Point(p,t);d=a.x;a=a.y}p=(k+ea.y)/2/b;t=A-(k+ea.y)/2/b;r=(h+ea.x)/2/b;ea=f-(h+ea.x)/
2/b;d=(0==n||180==n)&&l>k||(90==n||270==n)&&l>h?d<=p?p:d>=t?t:d:A/2;a=(0==n||180==n)&&g>h||(90==n||270==n)&&g>k?a<=r?r:a>=ea?ea:a:f/2;if("container"==v){var s;v=b;b=n;if("undefined"===typeof v||null===v)v=Z.imageZ;if("undefined"===typeof b||null===b)b=Z.imageR;0>b&&(b+=360);var q;switch(b){case 0:s=d-Z.imageX;q=a-Z.imageY;break;case 90:s=Z.imageY-a;q=d-Z.imageX;break;case 180:s=Z.imageX-d;q=Z.imageY-a;break;case 270:s=a-Z.imageY,q=Z.imageX-d}s=new Z.Utils.Point(sb-s*v,hb-q*v);d=s.x;a=s.y}d==c&&a==
e||Z.Utils.validateCallback("panConstrained")}return new Z.Utils.Point(d,a)}function ga(d){d>Z.maxZ?(d=Z.maxZ,Z.Utils.validateCallback("zoomConstrainedMax")):d<Z.minZ&&(d=Z.minZ,Z.Utils.validateCallback("zoomConstrainedMin"));return d}function l(d){d=90*Math.round(Math.abs(d)/90)*Z.Utils.getSign(d);-360>=d?d+=360:360<=d&&(d-=360);return d}function ob(){if(Z.ToolbarDisplay&&Z.Toolbar.getInitialized()){var d=k.getZoom();Z.Toolbar.syncSliderToViewport(d)}}function pb(){Z.Navigator&&Z.Navigator.getInitialized()&&
Z.Navigator.syncToViewport()}function zb(d){Z.Ruler&&Z.Ruler.getInitialized()&&Z.Ruler.syncToViewport(d)}function te(){window.clearTimeout(Z.validateViewTimer);Z.validateViewTimer=null;hd=((new Date).getTime()-tilesTimeStart)/1E3;var d=mf*hd,d=Fc&&jd<d,a=Fc&&jd>=ue;if(2==Z.debug||3==Z.debug)Z.Utils.trace("View validation-time elapsed: "+hd),0<Fc&&(d?Z.Utils.trace("Loading delay - re-calling updateView"):a?Z.Utils.trace("Display delay - re-calling updateView"):Z.Utils.trace("Progress slow, resetting timer")),
Z.Utils.trace(""),Z.traces.scrollTop=Z.traces.scrollHeight,Z.Utils.traceTileSpeed(hd,mf);0<Fc&&(d||a?k.updateView(!0):Z.validateViewTimer=window.setTimeout(te,1E3))}function rd(){Z.Utils.showMessage(Z.Utils.getResource("z291")+this.url,!0)}function Ad(d){if((d=Z.Utils.event(d))&&R){Z.Utils.removeEventListener(R,"mousedown",Ad);Z.Utils.addEventListener(Z.ViewerDisplay,"mousemove",Gc);Z.Utils.addEventListener(Z.ViewerDisplay,"mouseup",Ud);var a=Z.Utils.getMousePosition(d);Ta=new Z.Utils.Point(a.x,a.y);
var a=F(d.clientX,d.clientY),b=new Z.Utils.Point(parseFloat(R.style.left),parseFloat(R.style.top));d=a.x-b.x;a=a.y-b.y;R.mouseXPrior=Ta.x;R.mouseYPrior=Ta.y;R.mouseXOffset=d;R.mouseYOffset=a}}function Gc(d){if((d=Z.Utils.event(d))&&R){d=Z.Utils.getMousePosition(d);Ua=new Z.Utils.Point(d.x,d.y);var a=Ua.x-R.mouseXPrior,b=Ua.y-R.mouseYPrior;R.mouseXPrior=Ua.x;R.mouseYPrior=Ua.y;d=R.style;a=parseFloat(d.left)+a;b=parseFloat(d.top)+b;d.left=a+"px";d.top=b+"px"}}function Ud(d){if((d=Z.Utils.event(d))&&
R){d=Z.Utils.getMousePosition(d);d=Kb?Kb:new Z.Utils.Point(d.x,d.y);Z.Utils.removeEventListener(Z.ViewerDisplay,"mousemove",Gc);Z.Utils.removeEventListener(Z.ViewerDisplay,"mouseup",Ud);Z.Utils.addEventListener(R,"mousedown",Ad);var a=d.x-R.mouseXPrior,b=d.y-R.mouseYPrior;d=R.style;a=parseFloat(d.left)+a;b=parseFloat(d.top)+b;d.left=a+"px";d.top=b+"px"}}function ve(d){!Z.interactivityOff&&(d=Z.Utils.event(d))&&(d.preventDefault(),R&&(d=Z.Utils.getFirstTouch(d)))&&(d=new Z.Utils.Point(d.pageX,d.pageY),
Ta=new Z.Utils.Point(d.x,d.y),R.mouseXPrior=d.x,R.mouseYPrior=d.y)}function bh(d){if(!Z.interactivityOff&&Z.mousePan){if(d=Z.Utils.event(d))if(d.preventDefault(),R&&(d=Z.Utils.getFirstTouch(d))){d=new Z.Utils.Point(d.pageX,d.pageY);var a=R.style,b=parseFloat(a.left),n=parseFloat(a.top);a.left=b+(d.x-R.mouseXPrior)+"px";a.top=n+(d.y-R.mouseYPrior)+"px";R.mouseXPrior=d.x;R.mouseYPrior=d.y}return!1}}function ch(d){if(!Z.interactivityOff&&(d=Z.Utils.event(d))&&R&&(d=Z.Utils.getFirstTouch(d))){d=new Z.Utils.Point(d.pageX,
d.pageY);d=new Z.Utils.Point(d.x,d.y);var a=d.x-R.mouseXPrior,b=d.y-R.mouseYPrior;d=R.style;a=parseFloat(d.left)+a;b=parseFloat(d.top)+b;d.left=a+"px";d.top=b+"px"}}function dh(d){if(!Z.interactivityOff&&(d=Z.Utils.event(d))&&R&&(d=Z.Utils.getFirstTouch(d))){d=new Z.Utils.Point(d.pageX,d.pageY);d=new Z.Utils.Point(d.x,d.y);var a=d.x-R.mouseXPrior,b=d.y-R.mouseYPrior;d=R.style;a=parseFloat(d.left)+a;b=parseFloat(d.top)+b;d.left=a+"px";d.top=b+"px"}}function qg(){kd=new Image;yg=parseFloat(Z.Utils.getResource("z234"));
kd.url=Z.watermarkPath;kd.onload=Vd;kd.onerror=eh;kd.src=Z.watermarkPath}function Vd(){if(Ma)for(var d=parseFloat(Z.Utils.getResource("z235")),a=parseFloat(Z.Utils.getResource("z237")),b=parseFloat(Z.Utils.getResource("z236")),n=k.getZoom(),v=(Z.imageW*n-Ma.width)/2,c=(Z.imageH*n-Ma.height)/2,e=(Z.imageW/2-Z.imageX)*n,ea=(Z.imageH/2-Z.imageY)*n,A=n<d?d:n,a=Math.round(Z.imageW/a),b=Math.round(Z.imageH/b),d=Oa(),f=kd.width*A,A=kd.height*A,h=0,l=0,g=1;g<=a;g++)for(var m=1;m<=b;m++){var r=Math.round(Z.imageW/
(a+1)*g),p=Math.round(Z.imageH/(b+1)*m);if(r>d.l&&r<d.r&&p>d.t&&p<d.b){var t=Math.round(r*n-f/2-v+e),s=Math.round(p*n-A/2-c+ea);if(4E3<Z.imageW){p=l+100;if(t<h+100&&s<p)continue;h=t;l=s}var p=f,r=A,q=s,s=kd.cloneNode(!1);Z.Utils.setOpacity(s,yg);s.width=p;s.height=r;p=Z.Utils.createContainerElement("div","wiC","inline-block","absolute","hidden",p+"px",r+"px",t+"px",q+"px","none","0px","transparent none","0px","0px","normal");p.appendChild(s);Ma.appendChild(p);Z.Utils.addEventListener(s,"contextmenu",
Z.Utils.preventDefault);Z.Utils.addEventListener(s,"mousedown",Z.Utils.preventDefault)}}}function sd(){Ma&&(Z.Utils.clearDisplay(Ma),Vd())}function eh(){Z.Utils.showMessage(Z.Utils.getResource("z292")+this.url)}function y(){if(Z.Utils.stringValidate(Z.hotspotPath)){var d=Z.tour?Z.Utils.getResource("z227"):Z.Utils.getResource("z135");".xml"!=Z.hotspotPath.toLowerCase().substring(Z.hotspotPath.length-4,Z.hotspotPath.length)&&(Z.hotspotPath=Z.hotspotPath+"/"+d);dataPath=Z.Utils.cacheProofPath(Z.hotspotPath)}else Z.Utils.stringValidate(Z.annotationPath)&&
(Z.simplePath?dataPath=Z.annotationPath:(".json"!=Z.annotationPath.toLowerCase().substring(Z.annotationPath.length-5,Z.annotationPath.length)&&".xml"!=Z.annotationPath.toLowerCase().substring(Z.annotationPath.length-4,Z.annotationPath.length)&&(Z.annotationPath=Z.annotationPath+"/"+Z.Utils.getResource("z69")),dataPath=Z.Utils.cacheProofPath(Z.annotationPath)));"undefined"!==typeof dataPath&&Z.Utils.stringValidate(dataPath)?(d=new Z.NetConnector,-1!=dataPath.toLowerCase().indexOf(".xml")?d.loadXML(dataPath):
-1!=dataPath.toLowerCase().indexOf(".json")&&d.loadJSON(dataPath)):"string"===typeof Z.annotationXMLText?(d=Z.Utils.xmlConvertTextToDoc(Z.annotationXMLText),k.parseAnnotationsXML(d)):"object"===typeof Z.annotationJSONObject?(d=Z.Utils.jsonConvertObjectToXMLText(Z.annotationJSONObject),d=Z.Utils.xmlConvertTextToDoc(d),k.parseAnnotationsXML(d)):Z.measureVisible&&null==Z.editMode&&(d=Z.Utils.xmlConvertTextToDoc("<ZAS></ZAS>"),k.parseAnnotationsXML(d))}function zg(d,a){var b=Z.Utils.arrayIndexOfObjectValue(ub,
"media",d.media);if(-1!=b){var n=new Image;n.src=d.media;var v=n.width,n=n.height;ub[b].element&&(d.image=ub[b].element.cloneNode(!1));d.iW=v;d.iH=n;a&&(b=new Ab,Sc(d,b))}else ub[ub.length]={media:d.media,element:null},b=(new Date).getTime(),v=d.media,fh.loadImage(v,Z.Utils.createCallback(null,wa,v,b),"hotspot")}function we(d){var a;a=d.getAttribute("ID");this.id=""!=a?a:ib("labelExternal");a=d.getAttribute("INTERNALID");this.internalID=isNaN(parseInt(a))?oa?ib("hotspot"):ib("label"):a;this.poiID=
d.getAttribute("POIID");a=unescape(d.getAttribute("NAME"));this.name=""!=a?a:this.id;this.mediaType=d.getAttribute("MEDIATYPE");this.media=d.getAttribute("MEDIA");this.iH=this.iW=this.image=null;a=parseFloat(d.getAttribute("X"));this.x=isNaN(a)?0:a;a=parseFloat(d.getAttribute("Y"));this.y=isNaN(a)?0:a;a=parseFloat(d.getAttribute("ZOOM"));this.z=isNaN(a)?-1:a;a=parseFloat(d.getAttribute("XSCALE"));this.xScale=isNaN(a)?100:a;a=parseFloat(d.getAttribute("YSCALE"));this.yScale=isNaN(a)?100:a;this.clickURL=
d.getAttribute("CLICKURL");this.urlTarget=d.getAttribute("URLTARGET");a=d.getAttribute("ROLLOVER");this.rollover="1"==a||"true"==a;this.caption=d.getAttribute("CAPTION");this.tooltip=d.getAttribute("TOOLTIP");this.user=d.getAttribute("USER");this.date=d.getAttribute("DATE");this.textColor=d.getAttribute("TEXTCOLOR");this.backColor=d.getAttribute("BACKCOLOR");this.lineColor=d.getAttribute("LINECOLOR");this.fillColor=d.getAttribute("FILLCOLOR");a=d.getAttribute("TEXTVISIBLE");this.textVisible="false"!=
a;a=d.getAttribute("BACKVISIBLE");this.backVisible="false"!=a;a=d.getAttribute("LINEVISIBLE");this.lineVisible="false"!=a;a=d.getAttribute("FILLVISIBLE");this.fillVisible="false"!=a&&"0"!=a;a=d.getAttribute("CAPTIONPOSITION");this.captionPosition=Z.Utils.stringValidate(a)?a:"8";a=d.getAttribute("SAVED");this.saved=null===a?!0:a;this.visibility=!0;a=d.getElementsByTagName("CAPTION");0<a.length&&(this.captionHTML=unescape(Z.Utils.xmlConvertDocToText(a[0])));a=d.getElementsByTagName("TOOLTIP");0<a.length&&
(this.tooltipHTML=unescape(Z.Utils.xmlConvertDocToText(a[0])));if(("freehand"==d.getAttribute("MEDIA")||"rectangle"==d.getAttribute("MEDIA")||"polygon"==d.getAttribute("MEDIA")||"measure"==d.getAttribute("MEDIA"))&&0<d.getElementsByTagName("POLYGON").length){a=d.getElementsByTagName("POLYGON")[0];this.polyClosed="0"!=a.getAttribute("CLOSED");a=a.getElementsByTagName("POINT");for(var b=[],n=0,v=a.length;n<v;n++){var c=parseFloat(a[n].getAttribute("X")),c=isNaN(c)?0:c,e=parseFloat(a[n].getAttribute("Y")),
e=isNaN(e)?0:e;b[b.length]={x:c,y:e}}this.polygonPts=b}this.audio=d.getAttribute("AUDIO");Z.Utils.stringValidate(this.audio)&&(Z.audioContent=!0);a=parseFloat(d.getAttribute("SHOWFOR"));this.showFor=isNaN(a)?0:a;this.transition=d.getAttribute("TRANSITION");a=parseFloat(d.getAttribute("CHANGEFOR"));this.changeFor=isNaN(a)?0:a;a=parseFloat(d.getAttribute("ROTATION"));this.rotation=isNaN(a)?0:a;this.category=d.getAttribute("CATEGORY");this.zIndex=q.length.toString()}function wa(d,a,b){if(d&&a&&b){a=
new Ab;for(var n=0,v=q.length;n<v;n++){var c=q[n];if(c.media==d){var e=Z.Utils.arrayIndexOfObjectValue(ub,"media",d);-1!=e?ub[e].element=b:ub[ub.length]={media:d,element:b};c.image=b.cloneNode(!1);c.iW=b.width;c.iH=b.height;Sc(c,a)}}}else Z.Utils.showMessage(Z.Utils.getResource("z248"))}function Va(){aa&&k.getInitialized()&&(Z.Utils.clearDisplay(aa),Ya&&Z.Utils.clearDisplay(Ya),Aa&&Z.Utils.clearDisplay(Aa),"inline-block"==vc.display&&Ag())}function Ag(){for(var d=new Ab,a=0,b=q.length;a<b;a++)Sc(q[a],
d);0==aa.childNodes.length&&(d=Z.Utils.createContainerElement("div","hotspotImmortal","inline-block","absolute","visible","1px","1px","0px","0px","none","0px","transparent none","0px","0px","normal"),aa.appendChild(d))}function Sc(d,a){if(0<xe.length){var b=Z.Utils.arrayIndexOf(xe,d.id);if(-1==b)return}else if(0<ye.length&&(b=Z.Utils.arrayIndexOf(ye,d.internalID),-1==b))return;"polygon"==d.media&&(!Z.hotspotsDrawOnlyInView||d.x+Hc>a.box.l&&d.x-Hc<a.box.r&&d.y+Hc>a.box.t&&d.y-Hc<a.box.b)&&xc(d,a);
(!Z.hotspotsDrawOnlyInView||d.x>a.box.l&&d.x<a.box.r&&d.y>a.box.t&&d.y<a.box.b)&&nf(d,a)}function nf(d,a,b){-1!=Z.Utils.arrayIndexOfObjectValue(q,"internalID",d.internalID)&&Tc(d.internalID);Z.useCanvas&&"polygon"==d.media&&(b=Z.Utils.polygonDimensions(d.polygonPts,b),d.iW=b.x,d.iH=b.y);var n=!Z.Utils.stringValidate(d.media);b=!Z.Utils.stringValidate(d.caption)&&!Z.Utils.stringValidate(d.captionHTML)&&"measure"!=d.mediaType;var v=null===d.iW||null===d.iH,c="polygon"!=d.media;if(!(n&&b&&v&&c)){v=a.currentZ/
("polygon"!=d.media?d.z/100:1);"polygon"!=d.media&&(0<a.constrainedScaleMin&&v<a.constrainedScaleMin&&(v=a.constrainedScaleMin),0<a.constrainedScaleMax&&v>a.constrainedScaleMax&&(v=a.constrainedScaleMax));var n=d.xScale/100*v*d.iW,v=d.yScale/100*v*d.iH,e;"placeholder"!=d.media&&d.image&&(e=d.image,e.align="top",e.width=n,e.height=v);var f=Math.round(d.x*a.currentZ-n/2-a.displayOffsetL+a.imageOffsetL),A=Math.round(d.y*a.currentZ-v/2-a.displayOffsetT+a.imageOffsetT),h=c=null;b||(Z.captionBoxes||"measure"==
d.mediaType?c=Lb(d,a):(h=Lb(d,a,!0,!0),c=Lb(d,a,!0,!1)));a=Z.Utils.createContainerElement("div","hCloak","inline-block","absolute","visible");b=Z.Utils.createContainerElement("div","hot"+d.internalID.toString(),"inline-block","absolute","visible",n+"px",v+"px",f+"px",A+"px","none","0px","transparent none","0px","0px","normal");b.title=Z.Utils.stringValidate(d.tooltip)?unescape(d.tooltip):"";if(Z.Utils.stringValidate(d.clickURL)){if(null!==Z.editMode)Z.mobileDevice?Z.Utils.addEventListener(a,"touchstart",
of):Z.Utils.addEventListener(a,"mousedown",ze);else if("function"==d.clickURL)Z.mobileDevice?Z.Utils.addEventListener(b,"touchstart",Uc):Z.Utils.addEventListener(b,"mousedown",Uc);else{if(e){var l=document.createElement("a");l.setAttribute("href",d.clickURL);l.setAttribute("target",d.urlTarget);l.setAttribute("outline","none");l.appendChild(e);e.style.cursor="help";e.style.border="none"}if(c){var g=document.createElement("a");g.setAttribute("href",d.clickURL);g.setAttribute("target",d.urlTarget);
g.setAttribute("outline","none");h&&(g.appendChild(h),h.style.cursor="help");g.appendChild(c);c.style.cursor="help"}a.style.border="none"}null===Z.editMode&&(Z.clickZoom||Z.clickPan)&&(Z.mobileDevice?Z.Utils.addEventListener(a,"touchstart",pf):Z.Utils.addEventListener(a,"mousedown",ld))}Z.Utils.stringValidate(d.clickURL)&&null===Z.editMode&&"function"!=d.clickURL?(l&&a.appendChild(l),g&&a.appendChild(g)):(e&&a.appendChild(e),h&&a.appendChild(h),c&&a.appendChild(c));b.appendChild(a);aa.appendChild(b);
b.zIndex=d.zIndex;d.rollover&&(a.rollover=d.rollover);b.internalID=d.internalID;k.setHotspotVisibility(b,!d.rollover&&d.visibility);h&&Vc(d,h,n,v,!0);Vc(d,c,n,v);d.rollover&&(Z.Utils.addEventListener(b,"mouseover",qf),Z.Utils.addEventListener(b,"mouseout",Ae));Z.mobileDevice||(Z.Utils.addEventListener(b,"mousedown",Z.Utils.preventDefault),Z.Utils.addEventListener(b,"contextmenu",Z.Utils.preventDefault))}}function Ab(){this.box=Oa();this.currentZ=k.getZoom();this.constrainedScale=this.currentZ<Be?
Be:this.currentZ>Ce?Ce:this.currentZ;this.constrainedScaleMax=Ce;this.constrainedScaleMin=Be;this.displayOffsetL=(Z.imageW*this.currentZ-aa.width)/2;this.displayOffsetT=(Z.imageH*this.currentZ-aa.height)/2;this.imageOffsetL=(Z.imageW/2-Z.imageX)*this.currentZ;this.imageOffsetT=(Z.imageH/2-Z.imageY)*this.currentZ}function Bb(d){if("undefined"===typeof d||null===d)d=document.getElementById("progressTextBox");var a=null;-1!=d.id.indexOf("hot")&&-1==d.id.indexOf("hotspotDisplay")?a=d:d.parentNode&&-1!=
d.parentNode.id.indexOf("hot")&&-1==d.parentNode.id.indexOf("hotspotDisplay")?a=d.parentNode:d.parentNode.parentNode&&-1!=d.parentNode.parentNode.id.indexOf("hot")&&-1==d.parentNode.parentNode.id.indexOf("hotspotDisplay")?a=d.parentNode.parentNode:d.parentNode.parentNode.parentNode&&-1!=d.parentNode.parentNode.parentNode.id.indexOf("hot")&&-1==d.parentNode.parentNode.parentNode.id.indexOf("hotspotDisplay")&&(a=d.parentNode.parentNode.parentNode);return a}function Ea(d,a,b){var n=a.id.substring(3,
a.id.length),n=Z.Utils.arrayIndexOfObjectValue(q,"internalID",n);if(-1!=n&&(n=q[n],"mouseup"==d.type||"mousemove"==d.type&&"polygon"==n.media)){var v=b.x-=a.mouseXOffset-parseFloat(a.style.width)/2;a=b.y-=a.mouseYOffset-parseFloat(a.style.height)/2;a=new Z.Utils.Point(v,a);d=k.getClickCoordsInImage(d,k.getZoom(),a);"polygon"==n.media&&(jb(n,d),Ic());n.x=d.x;n.y=d.y}}function jb(d,a){for(var b=a.x-d.x,n=a.y-d.y,v=d.polygonPts.slice(0),c=0,e=v.length;c<e;c++)v[c].x+=b,v[c].y+=n;d.polygonPts=v.slice(0)}
function Lb(d,a,b,n){var c=a.currentZ/(d.z/100);0<a.constrainedScaleMin&&c<a.constrainedScaleMin&&(c=a.constrainedScaleMin);0<a.constrainedScaleMax&&c>a.constrainedScaleMax&&(c=a.constrainedScaleMax);a=Math.round(gh*c);a=a<Bg?Bg:a>Cg?Cg:a;var c=hh*c,c=c<Dg?Dg:c>Eg?Eg:c,e,f;"undefined"!==typeof b&&null!==b&&b?(e="0px",f="transparent none"):(e="1px",f=d.backColor);b=null===d.textColor?Wc:d.textColor;"undefined"!==typeof n&&null!==n&&n&&(b=d.backColor);Z.captionBoxes&&(b=d.backColor,f=d.textColor);n=
Z.Utils.createContainerElement("div","captionTextBox","inline-block","absolute","hidden","auto","auto","1px","1px","solid",e,f,"0px",c+"px","pre");"undefined"!==typeof d.captionHTML&&Z.Utils.stringValidate(d.captionHTML)?(n.innerHTML=d.captionHTML,Z.Utils.setHTMLTextDefaultCaptionStyle(n,d.captionHTML,b,"verdana",a+"px","none","normal","normal","normal","normal","1em","center","none")):"undefined"!==typeof d.caption&&Z.Utils.stringValidate(d.caption)?(d=document.createTextNode(unescape(d.caption)),
n.appendChild(d),Z.Utils.setTextNodeStyle(d,b,"verdana",a+"px","none","normal","normal","normal","normal","1em","center","none"),Z.Utils.disableTextInteraction(d)):"measure"==d.mediaType&&(a=new Z.Utils.Point(d.x,d.y),rf(d,a));Z.Utils.addEventListener(n,"contextmenu",Z.Utils.preventDefault);return n}function Vc(d,a,b,n,c){if(a){var e,f=d.captionPosition;e=Z.imageR;var ea=u==d.internalID&&"polygon"==d.media,A,h;d=a.style;A=k.getZoom();var ea=!ea||"addLabel"!=Z.editing&&"editLabel"!=Z.editing?0:40,
l=parseFloat(d.padding);h=e;f=parseInt(f,10);0>h&&(h+=360);switch(f){case 1:f=0==h?f:90==h?7:180==h?9:270==h?3:5;break;case 2:f=0==h?f:90==h?4:180==h?8:270==h?6:5;break;case 3:f=0==h?f:90==h?1:180==h?7:270==h?9:5;break;case 4:f=0==h?f:90==h?8:180==h?6:270==h?2:5;break;case 6:f=0==h?f:90==h?2:180==h?4:270==h?8:5;break;case 7:f=0==h?f:90==h?9:180==h?3:270==h?1:5;break;case 8:f=0==h?f:90==h?6:180==h?2:270==h?4:5;break;case 9:f=0==h?f:90==h?3:180==h?1:270==h?7:5}f=f.toString();f=parseInt(f,10);0>e&&(e+=
360);var g=parseFloat(Z.Utils.getElementStyleProperty(a,"width"));isNaN(g)&&(h=parseFloat(Z.Utils.getResource("z115")),h=parseFloat(d.fontSize)/h,g=Math.round(parseFloat(a.firstChild.length*h)));var m=20*A;A=(b-g)/2-l;h=(n-m)/2-l;Z.Utils.rotateElement(d,-e);n=n/2+m+l+ea;b=b/2+g/2+l+ea;if(90==e||270==e)e=b,b=n,n=e;switch(f){case 1:A-=b;h-=n;break;case 2:h-=n;break;case 3:A+=b;h-=n;break;case 4:A-=b;break;case 6:A+=b;break;case 7:A-=b;h+=n;break;case 8:h+=n;break;case 9:A+=b,h+=n}if(e=new Z.Utils.Point(A,
h))c=c?1:0,a.style.left=e.x+c+"px",a.style.top=e.y+c+"px"}}function rf(d,a){var b=d.polyClosed,n=d.polygonPts.slice(0),c=n.length,e="",h=0,f="",A="pixels"==Z.units?1:5,k="um"!=Z.units?Z.units:"\u03bcm";b?(e=ih,h=Z.Utils.polygonPerimeter(n,b,a,A),f=jh,captionText="<CAPTION>"+e+h.toString()+"  "+k,e=kh,h=Z.Utils.polygonArea(n,b,a,A),captionText+="<br/>"+e+h.toString()+"  "+k+f+"</CAPTION>",d.captionHTML=captionText):0<c?(e=lh,h=Z.Utils.polygonPerimeter(n,b,a,A),captionText=e+h.toString()+"  "+k,d.caption=
captionText):0==c&&(e=mh,h=Z.Utils.polygonPerimeter(n,b,a,A),captionText=e+h.toString()+"  "+k,d.caption=captionText)}function sf(d,a,b){var n="0"==d?"hidden":"visible",c=parseInt(Z.Utils.getResource("z133"),10),e=gf(d,c,Ga,Ba);"undefined"===typeof oa||null===oa?(If=oa=new Z.Utils.createSelectElement("hotspotList",a,b,c,e.x,e.y,null,n,De),Kf=If.style,"0"!=d&&Z.ViewerDisplay.appendChild(oa),Z.tourPath&&(yc=0),d=Z.Utils.stringValidate(Z.hotspotListTitle)&&"none"!=Z.hotspotListTitle?1:0,oa.selectedIndex=
d):Z.Utils.arrayClear(b)}function Tc(d){d=document.getElementById("hot"+d);null!==d&&d.parentNode.removeChild(d)}function gf(d,a,b,n){switch(d){case "0":n=d=0;break;case "1":n=d=25;break;case "2":d=b-a-25;n=20;break;case "3":d=b-a-25;n=null!=toolbar?n-50:n-37.5;break;case "4":d=25;n=null!=toolbar?n-50:n-37.5;break;default:d=b-a,n=25}return new Z.Utils.Point(d,n)}function Jc(d){var a=d.getAttribute("MEDIATYPE"),b=d.getAttribute("MEDIA");if("symbol"==a){switch(b){case "circle":b=Z.annotationFolder+
"/circle.png";break;case "square":b=Z.annotationFolder+"/square.png";break;case "triangle":b=Z.annotationFolder+"/triangle.png";break;case "arrowDown":b=Z.annotationFolder+"/arrowDown.png";break;case "arrowDownLeft":b=Z.annotationFolder+"/arrowDownLeft.png";break;case "arrowLeft":b=Z.annotationFolder+"/arrowLeft.png";break;case "arrowUpLeft":b=Z.annotationFolder+"/arrowUpLeft.png";break;case "arrowUp":b=Z.annotationFolder+"/arrowUp.png";break;case "arrowUpRight":b=Z.annotationFolder+"/arrowUpRight.png";
break;case "arrowRight":b=Z.annotationFolder+"/arrowRight.png";break;case "arrowDownRight":b=Z.annotationFolder+"/arrowDownRight.png";break;case "lineHorizontal":b=Z.annotationFolder+"/lineHorizontal.png";break;case "lineVertical":b=Z.annotationFolder+"/lineVertical.png";break;default:b=Z.annotationFolder+"/noSubstitutePlaceholder.png"}d.setAttribute("MEDIATYPE","icon");d.setAttribute("MEDIA",b);Ee=!0}return d}function nc(){return Z.Utils.xmlConvertTextToDoc("<ZAS></ZAS>")}function $a(d,a){var b;
switch(a){case "root":b=d.getElementsByTagName("ZAS")[0];break;case "setup":b=d.createElement("SETUP");b.setAttribute("PANELPOSITION","2");b.setAttribute("INITIALVISIBILITY","1");b.setAttribute("POIVISIBILITY","1");b.setAttribute("LABELVISIBILITY","1");b.setAttribute("NOTEVISIBILITY","1");b.setAttribute("MINSCALE","0.02");b.setAttribute("MAXSCALE","2");b.setAttribute("ZOOMIFYXMLVERSION","5");break;case "poi":b=d.createElement("POI");b.setAttribute("ID","0");b.setAttribute("NAME",Z.Utils.getResource("z43"));
b.setAttribute("X","center");b.setAttribute("Y","center");b.setAttribute("ZOOM","-1");b.setAttribute("USER",Z.Utils.getResource("z44"));b.setAttribute("DATE",Z.Utils.getCurrentUTCDateAsString());break;case "label":b=d.createElement("LABEL");b.setAttribute("ID","0");b.setAttribute("NAME",Z.Utils.getResource("z37"));b.setAttribute("MEDIATYPE","text");b.setAttribute("MEDIA","");b.setAttribute("X","center");b.setAttribute("Y","center");b.setAttribute("ZOOM","100");b.setAttribute("XSCALE","100");b.setAttribute("YSCALE",
"100");b.setAttribute("CLICKURL","");b.setAttribute("URLTARGET","");b.setAttribute("ROLLOVER","0");b.setAttribute("TOOLTIP","");b.setAttribute("USER",Z.Utils.getResource("z39"));b.setAttribute("DATE",Z.Utils.getCurrentUTCDateAsString());b.setAttribute("TEXTCOLOR",Z.Utils.getResource("z25"));b.setAttribute("BACKCOLOR",Z.Utils.getResource("z22"));b.setAttribute("LINECOLOR",Z.Utils.getResource("z48"));b.setAttribute("FILLCOLOR",Z.Utils.getResource("z46"));b.setAttribute("TEXTVISIBLE",Z.Utils.getResource("z26"));
b.setAttribute("BACKVISIBLE",Z.Utils.getResource("z23"));b.setAttribute("LINEVISIBLE",Z.Utils.getResource("z49"));b.setAttribute("FILLVISIBLE",Z.Utils.getResource("z47"));b.setAttribute("CAPTIONPOSITION",Z.Utils.getResource("z24"));b.setAttribute("CATEGORY","");break;case "polygon":b=d.createElement("POLYGON");break;case "point":b=d.createElement("POINT");b.setAttribute("X","0");b.setAttribute("Y","0");break;case "note":b=d.createElement("NOTE"),b.setAttribute("ID","0"),b.setAttribute("NAME",Z.Utils.getResource("z40")),
b.setAttribute("TEXT",Z.Utils.getResource("z41")),b.setAttribute("USER",Z.Utils.getResource("z42")),b.setAttribute("DATE",Z.Utils.getCurrentUTCDateAsString())}return b}function Wd(d,a,b,n,c,e){d=Z.Utils.arrayToArrayOfStrings([d,a,b,n,c,e]);d=Z.Utils.xmlConvertTextToDoc('<POI ID="'+d[0]+'" NAME="'+d[1]+'" X="'+d[2]+'" Y="'+d[3]+'" ZOOM="'+d[4]+'" INTERNALID="'+d[5]+'" ></POI>').getElementsByTagName("POI")[0];md(d,!0)}function md(d,a){k.saveEditsPOI(!0);a&&(d=td(d,"poi"));var b=Z.Utils.arrayIndexOfObjectValue(fa,
"value",d.getAttribute("INTERNALID"));-1==b&&(b=fa.length);fa[b]={text:unescape(d.getAttribute("NAME")),value:d.getAttribute("INTERNALID"),id:d.getAttribute("ID"),x:d.getAttribute("X"),y:d.getAttribute("Y"),z:d.getAttribute("ZOOM"),user:d.getAttribute("USER"),date:d.getAttribute("DATE")}}function Xd(d,a){k.saveEditsNote(!0);a&&(d=td(d,"note"));var b=Z.Utils.arrayIndexOfObjectValue(ta,"value",d.getAttribute("INTERNALID"));-1==b&&(b=ta.length);ta[b]={text:unescape(d.getAttribute("NAME")),value:d.getAttribute("INTERNALID"),
noteText:unescape(d.getAttribute("TEXT")),poiID:d.getAttribute("POIID"),id:d.getAttribute("ID"),user:d.getAttribute("USER"),date:d.getAttribute("DATE")}}function td(d,a){var b;switch(a){case "hotspot":b=oa?ib("hotspot"):ib("label");Z.Utils.stringValidate(d.getAttribute("ID"))||d.setAttribute("ID",b);var n=oa?Z.Utils.getResource("z34"):Z.Utils.getResource("z37");Z.Utils.stringValidate(d.getAttribute("NAME"))||d.setAttribute("NAME",n+b);n=oa?Z.Utils.getResource("z33"):Z.Utils.getResource("z35");Z.Utils.stringValidate(d.getAttribute("CAPTION"))||
"freehand"==Z.editMode||Z.tourPath||Z.Utils.stringValidate(d.getAttribute("MEDIA"))||Z.Utils.stringValidate(d.getAttribute("MEDIA")&&"polygon"==d.getAttribute("MEDIA"))||d.setAttribute("CAPTION",n+b);Z.Utils.stringValidate(d.getAttribute("X"))||d.setAttribute("X",Z.imageX.toString());Z.Utils.stringValidate(d.getAttribute("Y"))||d.setAttribute("Y",Z.imageY.toString());Z.Utils.stringValidate(d.getAttribute("ZOOM"))||d.setAttribute("ZOOM",(100*Z.imageZ).toString());!Z.Utils.stringValidate(d.getAttribute("CLICKURL"))&&
Z.Utils.stringValidate(d.getAttribute("URL"))&&d.setAttribute("CLICKURL",d.getAttribute("URL"));isNaN(parseInt(d.getAttribute("INTERNALID"),10))&&d.setAttribute("INTERNALID",b);n=d.getAttribute("MEDIATYPE");!Z.captionBoxes&&"measure"!=n||Z.Utils.stringValidate(d.getAttribute("TEXTCOLOR"))&&Z.Utils.stringValidate(d.getAttribute("BACKCOLOR"))||(d.setAttribute("TEXTCOLOR",Z.Utils.getResource("z25")),d.setAttribute("BACKCOLOR",Z.Utils.getResource("z22")));break;case "poi":b=ib("poi");Z.Utils.stringValidate(d.getAttribute("ID"))||
d.setAttribute("ID",b);Z.Utils.stringValidate(d.getAttribute("NAME"))||d.setAttribute("NAME",Z.Utils.getResource("z43")+b);Z.Utils.stringValidate(d.getAttribute("X"))||d.setAttribute("X",Z.imageX.toString());Z.Utils.stringValidate(d.getAttribute("Y"))||d.setAttribute("Y",Z.imageY.toString());Z.Utils.stringValidate(d.getAttribute("ZOOM"))||d.setAttribute("ZOOM",(100*Z.imageZ).toString());isNaN(parseInt(d.getAttribute("INTERNALID"),10))&&d.setAttribute("INTERNALID",b);break;case "label":b=ib("label");
Z.Utils.stringValidate(d.getAttribute("ID"))||d.setAttribute("ID",b);Z.Utils.stringValidate(d.getAttribute("NAME"))||d.setAttribute("NAME",Z.Utils.getResource("z37")+b);var n=d.getAttribute("MEDIATYPE"),c=d.getAttribute("MEDIA");Z.Utils.stringValidate(c)||"text"==n||(d.setAttribute("MEDIA",Z.annotationFolder+"/"+Z.Utils.getResource("z57")),d.setAttribute("MEDIATYPE",Z.Utils.getResource("z57TYPE")));Z.Utils.stringValidate(d.getAttribute("CAPTION"))||d.setAttribute("CAPTION",Z.Utils.getResource("z35")+
b);!Z.Utils.stringValidate(d.getAttribute("CLICKURL"))&&Z.Utils.stringValidate(d.getAttribute("URL"))&&d.setAttribute("CLICKURL",d.getAttribute("URL"));Z.Utils.stringValidate(d.getAttribute("X"))||d.setAttribute("X",Z.imageX.toString());Z.Utils.stringValidate(d.getAttribute("Y"))||d.setAttribute("Y",Z.imageY.toString());Z.Utils.stringValidate(d.getAttribute("ZOOM"))||d.setAttribute("ZOOM",(100*Z.imageZ).toString());isNaN(parseInt(d.getAttribute("INTERNALID"),10))&&d.setAttribute("INTERNALID",b);isNaN(parseInt(d.getAttribute("POIID"),
10))&&d.setAttribute("POIID",V.options[V.selectedIndex].value);break;case "note":b=ib("note"),Z.Utils.stringValidate(d.getAttribute("ID"))||d.setAttribute("ID",b),Z.Utils.stringValidate(d.getAttribute("NAME"))||d.setAttribute("NAME",Z.Utils.getResource("z40")+b),Z.Utils.stringValidate(d.getAttribute("TEXT"))||d.setAttribute("TEXT",""),isNaN(parseInt(d.getAttribute("INTERNALID"),10))&&d.setAttribute("INTERNALID",b),isNaN(parseInt(d.getAttribute("POIID"),10))&&d.setAttribute("POIID",V.options[V.selectedIndex].value)}return d}
function Ub(d,a){var b=0,n="",c="";if("none"!=Z.annotationSort){switch(Z.annotationSort){case "id":n=d.value.toLowerCase();c=a.value.toLowerCase();break;case "name":n=d.text.toLowerCase(),c=a.text.toLowerCase()}n<c?b=-1:n>c&&(b=1)}return b}function Yd(){if(Z.ToolbarDisplay&&Z.Toolbar.getInitialized()){var d=Z.Toolbar.getSkinArray(),a=Z.Toolbar.getSkinSizes(),b=parseInt(Z.Utils.getResource("z63"),10);if("markup"!=Z.editMode)var n=parseFloat(Z.Utils.getResource("z86")/1.5),c=Z.Utils.getResource("z83"),
e=Z.Utils.getResource("z83NOALPHA");if("markup"!=Z.editMode){var h=Z.Utils.createContainerElement("div","buttonContainerPOI","inline-block","absolute","visible","1px","1px","0px","0px","none","0px","transparent none","0px","0px","normal","default",!0);Z.AnnotationPanelDisplay.appendChild(h);Z.mobileDevice||Z.Utils.addEventListener(h,"mouseover",Z.Toolbar.backgroundEventsHandler);var f=Z.Utils.createTextElement("poiNameTextElement","","1px","1px","1px","1px","0px","solid","1px",!1,"verdana","1px",
"none",null,1,"hidden","hidden","off");Z.Utils.addEventListener(f.firstChild,"focus",ec);Z.Utils.addEventListener(f.firstChild,"blur",zc);Z.AnnotationPanelDisplay.appendChild(f);if(f=document.getElementById("textBoxFor-poiNameTextElement"))f.style.visibility="hidden";f=new Z.Utils.Button("buttonPOIAdd",null,Z.skinPath,d[153],d[154],d[155],"1px","1px","1px","1px","mouseover",Z.Toolbar.z457,"z373");h.appendChild(f.elmt);f=new Z.Utils.Button("buttonPOIEdit",null,Z.skinPath,d[156],d[157],d[158],"1px",
"1px","1px","1px","mouseover",Z.Toolbar.z457,"z376");h.appendChild(f.elmt);f=new Z.Utils.Button("buttonPOIDelete",null,Z.skinPath,d[147],d[148],d[149],"1px","1px","1px","1px","mouseover",Z.Toolbar.z457,"z375");h.appendChild(f.elmt);f=new Z.Utils.Button("buttonPOICancel",null,Z.skinPath,d[159],d[160],d[161],"1px","1px","1px","1px","mouseover",Z.Toolbar.z457,"z374");h.appendChild(f.elmt);Z.saveHandlerProvided&&(f=new Z.Utils.Button("buttonPOISave",null,Z.skinPath,d[150],d[151],d[152],"1px","1px","1px",
"1px","mouseover",Z.Toolbar.z457,"z377"),h.appendChild(f.elmt));h=Z.Utils.createContainerElement("div","overlayPOIDisable","none","absolute","visible","1px","1px","0px","0px","none","0px",c,"0px","0px","normal","default",!0);Z.Utils.setOpacity(h,n,e);Z.AnnotationPanelDisplay.appendChild(h)}null!==Z.editMode&&(h=Z.Utils.createTextElement("labelNameTextElement","","1px","1px","1px","1px","0px","solid","1px",!1,"verdana","1px","none",null,1,"hidden","hidden","off"),Z.Utils.addEventListener(h.firstChild,
"focus",ec),Z.Utils.addEventListener(h.firstChild,"blur",zc),Z.AnnotationPanelDisplay.appendChild(h),"markup"!=Z.editMode&&(h=document.getElementById("textBoxFor-labelNameTextElement")))&&(h.style.visibility="hidden");"markup"!=Z.editMode&&(h=Z.Utils.createContainerElement("div","buttonBorderLabel","inline-block","absolute","visible","1px","1px","0px","0px","solid","1px","transparent none","0px","0px","normal","default",!0),Z.AnnotationPanelDisplay.appendChild(h));f=Z.Utils.createContainerElement("div",
"buttonContainerLabel","inline-block","absolute","visible","1px","1px","0px","0px","none","0px","transparent none","0px","0px","normal","default",!0);Z.AnnotationPanelDisplay.appendChild(f);h=Z.Utils.createContainerElement("div","buttonContainerLabel2","inline-block","absolute","visible","1px","1px","0px","0px","none","0px","transparent none","0px","0px","normal","default",!0);Z.AnnotationPanelDisplay.appendChild(h);Z.mobileDevice||(Z.Utils.addEventListener(f,"mouseover",Z.Toolbar.backgroundEventsHandler),
Z.Utils.addEventListener(h,"mouseover",Z.Toolbar.backgroundEventsHandler));c=Z.Utils.createContainerElement("div","buttonBorderLg","inline-block","absolute","hidden","1px","1px","1px","1px","solid","2px","transparent none","0px","0px","normal",null,!0);c.style.borderColor=Z.Utils.getResource("z87");f.appendChild(c);bblG=c;bblgS=bblG.style;c=new Z.Utils.Button("buttonViewMode",null,Z.skinPath,d[101],d[102],d[103],"1px","1px","1px","1px","mouseover",Z.Toolbar.z457,"z397");f.appendChild(c.elmt);"markup"!=
Z.editMode&&(c=new Z.Utils.Button("buttonEditColorPicker",null,Z.skinPath,d[104],d[105],d[106],"1px","1px","1px","1px","mouseover",Z.Toolbar.z457,"z334"),f.appendChild(c.elmt));c=new Z.Utils.Graphic("editModeDivider",Z.skinPath,d[107],"1px","1px","1px","1px");f.appendChild(c.elmt);Z.freehandVisible&&(c=new Z.Utils.Button("buttonEditModeFreehand",null,Z.skinPath,d[108],d[109],d[110],"1px","1px","1px","1px","mouseover",Z.Toolbar.z457,"z335"),f.appendChild(c.elmt));Z.textVisible&&(c=new Z.Utils.Button("buttonEditModeText",
null,Z.skinPath,d[111],d[112],d[113],"1px","1px","1px","1px","mouseover",Z.Toolbar.z457,"z340"),f.appendChild(c.elmt));Z.iconVisible&&(c=new Z.Utils.Button("buttonEditModeIcon",null,Z.skinPath,d[114],d[115],d[116],"1px","1px","1px","1px","mouseover",Z.Toolbar.z457,"z336"),f.appendChild(c.elmt));Z.rectangleVisible&&(c=new Z.Utils.Button("buttonEditModeRectangle",null,Z.skinPath,d[117],d[118],d[119],"1px","1px","1px","1px","mouseover",Z.Toolbar.z457,"z339"),f.appendChild(c.elmt));Z.polygonVisible&&
(c=new Z.Utils.Button("buttonEditModePolygon",null,Z.skinPath,d[120],d[121],d[122],"1px","1px","1px","1px","mouseover",Z.Toolbar.z457,"z338"),f.appendChild(c.elmt));Z.measureVisible&&(c=new Z.Utils.Button("buttonEditModeMeasure",null,Z.skinPath,d[46],d[47],d[48],"1px","1px","1px","1px","mouseover",Z.Toolbar.z457,"z337"),f.appendChild(c.elmt));var c=Z.Utils.createContainerElement("div","labelCaptionTextBox","inline-block","absolute","hidden","1px","1px","0px","0px","none","0px","transparent none",
"0px","0px","nowrap",null,!0),A=document.createTextNode(Z.Utils.getResource("z407"));c.appendChild(A);A=Z.Utils.getResource("z35");A=Z.Utils.createTextElement("captionTextElement",A,"1px","1px","1px","1px","0px","solid","1px",!1,"verdana","1px","none",null,1,"hidden","hidden","off");Z.Utils.addEventListener(A.firstChild,"focus",ec);Z.Utils.addEventListener(A.firstChild,"blur",zc);Z.AnnotationPanelDisplay.appendChild(c);Z.AnnotationPanelDisplay.appendChild(A);if("markup"!=Z.editMode){c=Z.Utils.createContainerElement("div",
"labelTooltipTextBox","inline-block","absolute","hidden","1px","1px","0px","0px","none","0px","transparent none","0px","0px","nowrap",null,!0);A=document.createTextNode(Z.Utils.getResource("z413"));c.appendChild(A);A=Z.Utils.getResource("z38");A=Z.Utils.createTextElement("tooltipTextElement",A,"1px","1px","1px","1px","0px","solid","1px",!1,"verdana","1px","none",null,1,"hidden","hidden","off");Z.Utils.addEventListener(A.firstChild,"focus",ec);Z.Utils.addEventListener(A.firstChild,"blur",zc);Z.AnnotationPanelDisplay.appendChild(c);
Z.AnnotationPanelDisplay.appendChild(A);c=Z.Utils.createContainerElement("div","labelClickURLTextBox","inline-block","absolute","hidden","1px","1px","0px","0px","none","0px","transparent none","0px","0px","nowrap",null,!0);A=document.createTextNode(Z.Utils.getResource("z414"));c.appendChild(A);A=Z.Utils.getResource("z36");A=Z.Utils.createTextElement("clickURLTextElement",A,"1px","1px","1px","1px","0px","solid","1px",!1,"verdana","1px","none",null,1,"hidden","hidden","off");Z.Utils.addEventListener(A.firstChild,
"focus",ec);Z.Utils.addEventListener(A.firstChild,"blur",zc);Z.AnnotationPanelDisplay.appendChild(c);Z.AnnotationPanelDisplay.appendChild(A);for(var c=Z.Utils.getResource("z401").split(","),A=Z.Utils.getResource("z402").split(","),k=0,l=c.length;k<l;k++)labelCaptionPositionListDP[labelCaptionPositionListDP.length]={text:c[k],value:A[k]};c=new Z.Utils.createSelectElement("labelCaptionPositionList","",labelCaptionPositionListDP,1,1,0,b,"hidden",tf);Z.AnnotationPanelDisplay.appendChild(c);c=Z.Utils.getResource("z405").split(",");
A=Z.Utils.getResource("z406").split(",");k=0;for(l=c.length;k<l;k++)labelTargetListDP[labelTargetListDP.length]={text:c[k],value:A[k]};c=new Z.Utils.createSelectElement("labelTargetList","",labelTargetListDP,1,1,0,b,"hidden",Fe);Z.AnnotationPanelDisplay.appendChild(c);c=Z.Utils.createContainerElement("div","labelScaleTextBox","inline-block","absolute","hidden","1px","1px","0px","0px","none","0px","transparent none","0px","0px","nowrap",null,!0);A=document.createTextNode(Z.Utils.getResource("z412"));
c.appendChild(A);Z.AnnotationPanelDisplay.appendChild(c);c=new Z.Utils.Button("buttonLabelScaleDown",null,Z.skinPath,d[27],d[28],d[29],"1px","1px","1px","1px","mouseover",Z.Toolbar.z457,"z358");Z.AnnotationPanelDisplay.appendChild(c.elmt);c=new Z.Utils.Button("buttonLabelScaleUp",null,Z.skinPath,d[24],d[25],d[26],"1px","1px","1px","1px","mouseover",Z.Toolbar.z457,"z359");Z.AnnotationPanelDisplay.appendChild(c.elmt);c=Z.Utils.createContainerElement("div","labelRolloverTextBox","inline-block","absolute",
"hidden","1px","1px","0px","0px","none","0px","transparent none","0px","0px","nowrap",null,!0);A=document.createTextNode(Z.Utils.getResource("z411"));c.appendChild(A);A=new Z.Utils.Checkbox("checkboxRollover","test","1px","1px","1px","1px","click",uf,"z379");Z.AnnotationPanelDisplay.appendChild(c);Z.AnnotationPanelDisplay.appendChild(A)}A=Z.Utils.createContainerElement("div","buttonContainerLabelColors","inline-block","absolute","visible","1px","1px","0px","0px","none","0px","transparent none","0px",
"0px","normal","default",!0);f.appendChild(A);"markup"!=Z.editMode&&(c=Z.Utils.getResource("z83"),c=Z.Utils.createContainerElement("div","buttonContainerLabelColorsBackground","inline-block","absolute","visible","1px","1px","0px","0px","solid","1px",c,"0px","0px","normal",null,!0),A.appendChild(c),A.style.display="none");c=Z.Utils.createContainerElement("div","buttonBorderSm","inline-block","absolute","hidden","1px","1px","1px","1px","solid","2px","transparent none","0px","0px","normal",null,!0);
c.style.borderColor=Z.Utils.getResource("z87");A.appendChild(c);bbsM=c;bbsmS=bbsM.style;c=new Z.Utils.Button("buttonColor0",null,Z.skinPath,d[123],d[124],d[125],"1px","1px","1px","1px","mouseover",Z.Toolbar.z457,"z324");A.appendChild(c.elmt);c=new Z.Utils.Button("buttonColor1",null,Z.skinPath,d[126],d[127],d[128],"1px","1px","1px","1px","mouseover",Z.Toolbar.z457,"z325");A.appendChild(c.elmt);c=new Z.Utils.Button("buttonColor2",null,Z.skinPath,d[129],d[130],d[131],"1px","1px","1px","1px","mouseover",
Z.Toolbar.z457,"z326");A.appendChild(c.elmt);c=new Z.Utils.Button("buttonColor3",null,Z.skinPath,d[132],d[133],d[134],"1px","1px","1px","1px","mouseover",Z.Toolbar.z457,"z327");A.appendChild(c.elmt);c=new Z.Utils.Button("buttonColor4",null,Z.skinPath,d[135],d[136],d[137],"1px","1px","1px","1px","mouseover",Z.Toolbar.z457,"z328");A.appendChild(c.elmt);c=new Z.Utils.Button("buttonColor5",null,Z.skinPath,d[138],d[139],d[140],"1px","1px","1px","1px","mouseover",Z.Toolbar.z457,"z329");A.appendChild(c.elmt);
c=new Z.Utils.Button("buttonColor6",null,Z.skinPath,d[141],d[142],d[143],"1px","1px","1px","1px","mouseover",Z.Toolbar.z457,"z330");A.appendChild(c.elmt);c=new Z.Utils.Button("buttonColor7",null,Z.skinPath,d[144],d[145],d[146],"1px","1px","1px","1px","mouseover",Z.Toolbar.z457,"z331");A.appendChild(c.elmt);"edit"==Z.editMode&&(c=new Z.Utils.Button("buttonLabelAdd",null,Z.skinPath,d[153],d[154],d[155],"1px","1px","1px","1px","mouseover",Z.Toolbar.z457,"z353"),h.appendChild(c.elmt),c=new Z.Utils.Button("buttonLabelEdit",
null,Z.skinPath,d[156],d[157],d[158],"1px","1px","1px","1px","mouseover",Z.Toolbar.z457,"z356"),h.appendChild(c.elmt),c=new Z.Utils.Button("buttonLabelCancel",null,Z.skinPath,d[159],d[160],d[161],"1px","1px","1px","1px","mouseover",Z.Toolbar.z457,"z354"),h.appendChild(c.elmt));c=new Z.Utils.Button("buttonLabelDelete",null,Z.skinPath,d[147],d[148],d[149],"1px","1px","1px","1px","mouseover",Z.Toolbar.z457,"z355");h.appendChild(c.elmt);Z.saveHandlerProvided&&(c=new Z.Utils.Button("buttonLabelSave",null,
Z.skinPath,d[150],d[151],d[152],"1px","1px","1px","1px","mouseover",Z.Toolbar.z457,"z357"),h.appendChild(c.elmt));var g=Z.Utils.createContainerElement("div","buttonContainerLabelIcons","inline-block","absolute","visible","1px","1px","0px","0px","none","0px","transparent none","0px","0px","normal","default",!1);Z.AnnotationPanelDisplay.appendChild(g);c=Z.Utils.getResource("z83");k=Z.Utils.createContainerElement("div","buttonContainerLabelIconsBackground","inline-block","absolute","visible","1px","1px",
"0px","0px","solid","1px",c,"0px","0px","normal",null,!0);g.appendChild(k);g.style.display="none";for(var m=Z.Utils.getResource("z403").split(","),r=Z.Utils.getResource("z404").split(","),k=0,l=m.length;k<l;k++)Ge[Ge.length]={text:m[k],value:r[k]};b=new Z.Utils.createSelectElement("labelIconList","",Ge,1,1,0,b,"visible",He);g.appendChild(b);if("markup"!=Z.editMode){var k=Z.Utils.createContainerElement("div","overlayLabelDisable","none","absolute","visible","1px","1px","0px","0px","none","0px",c,"0px",
"0px","normal","default",!0),b=Z.Utils.createContainerElement("div","overlayLabelDetailDisable","none","absolute","visible","1px","1px","0px","0px","none","0px",c,"0px","0px","normal","default",!0),l=Z.Utils.createContainerElement("div","overlayLabelDetailEditableDisable","none","absolute","visible","1px","1px","0px","0px","none","0px",c,"0px","0px","normal","default",!0),m=Z.Utils.createTextElement("overlayMessageBox","","1px","1px","4px","4px","4px","solid","1px",!0,"verdana","12px","none",null,
1,"auto","auto",null),r=Z.Utils.createContainerElement("div","overlayLabelNameEditableDisable","none","absolute","visible","1px","1px","0px","0px","none","0px",c,"0px","0px","normal","default",!0),p=Z.Utils.createContainerElement("div","overlayLabelCaptionPositionDisable","none","absolute","visible","1px","1px","0px","0px","none","0px",c,"0px","0px","normal","default",!0);Z.Utils.setOpacity(k,n,e);Z.Utils.setOpacity(b,n,e);Z.Utils.setOpacity(l,n,e);Z.Utils.setOpacity(r,n,e);Z.Utils.setOpacity(p,n,
e);Z.AnnotationPanelDisplay.appendChild(k);Z.AnnotationPanelDisplay.appendChild(b);Z.AnnotationPanelDisplay.appendChild(l);Z.AnnotationPanelDisplay.appendChild(m);Z.AnnotationPanelDisplay.appendChild(r);Z.AnnotationPanelDisplay.appendChild(p);Z.overlayMessage=document.getElementById("overlayMessageBox");k=document.getElementById("textBoxFor-overlayMessageBox");Z.overlayMessage&&k&&(Z.overlayMessage.value=Z.Utils.getResource("z4SHORT"),Z.Utils.setHTMLTextStyle(Z.overlayMessage,"#666666","verdana",
"12px","none","normal","normal","normal","normal","1em","center","none"),k.style.display="none");k=parseInt(Z.Utils.getResource("z230"),10);A.style.zIndex=(k+5).toString();k=parseInt(Z.Utils.getResource("z230"),10);f.style.zIndex=(k+6).toString();g.style.zIndex=(k+7).toString();b.style.zIndex=(k+8).toString()}if("markup"!=Z.editMode){var t=Z.Utils.createTextElement("noteNameTextElement","","1px","1px","1px","1px","0px","solid","1px",!1,"verdana","1px","none",null,1,"hidden","hidden","off");Z.Utils.addEventListener(t.firstChild,
"focus",ec);Z.Utils.addEventListener(t.firstChild,"blur",zc);Z.AnnotationPanelDisplay.appendChild(t);if(t=document.getElementById("textBoxFor-noteNameTextElement"))t.style.visibility="hidden";t=Z.Utils.createContainerElement("div","buttonContainerNote","inline-block","absolute","visible","1px","1px","0px","0px","none","0px","transparent none","0px","0px","normal","default",!0);Z.AnnotationPanelDisplay.appendChild(t);Z.mobileDevice||Z.Utils.addEventListener(t,"mouseover",Z.Toolbar.backgroundEventsHandler);
b=new Z.Utils.Button("buttonNoteAdd",null,Z.skinPath,d[153],d[154],d[155],"1px","1px","1px","1px","mouseover",Z.Toolbar.z457,"z364");t.appendChild(b.elmt);b=new Z.Utils.Button("buttonNoteEdit",null,Z.skinPath,d[156],d[157],d[158],"1px","1px","1px","1px","mouseover",Z.Toolbar.z457,"z367");t.appendChild(b.elmt);b=new Z.Utils.Button("buttonNoteDelete",null,Z.skinPath,d[147],d[148],d[149],"1px","1px","1px","1px","mouseover",Z.Toolbar.z457,"z366");t.appendChild(b.elmt);b=new Z.Utils.Button("buttonNoteCancel",
null,Z.skinPath,d[159],d[160],d[161],"1px","1px","1px","1px","mouseover",Z.Toolbar.z457,"z365");t.appendChild(b.elmt);Z.saveHandlerProvided&&(b=new Z.Utils.Button("buttonNoteSave",null,Z.skinPath,d[150],d[151],d[152],"1px","1px","1px","1px","mouseover",Z.Toolbar.z457,"z368"),t.appendChild(b.elmt));b=Z.Utils.createContainerElement("div","overlayNoteDetailDisable","none","absolute","visible","1px","1px","0px","0px","none","0px",c,"0px","0px","normal","default",!0);Z.Utils.setOpacity(b,n,e);f=Z.Utils.createContainerElement("div",
"overlayNoteDisable","none","absolute","visible","1px","1px","0px","0px","none","0px",c,"0px","0px","normal","default",!0);Z.Utils.setOpacity(f,n,e);Z.AnnotationPanelDisplay.appendChild(b);Z.AnnotationPanelDisplay.appendChild(f)}if(1==Z.helpVisible||2==Z.helpVisible)"markup"==Z.editMode?(d=new Z.Utils.Button("buttonHelpMarkup",null,Z.skinPath,d[43],d[44],d[45],"1px","1px","1px","1px","mouseover",Z.Toolbar.z457,"z342MARKUP"),h.appendChild(d.elmt)):"edit"==Z.editMode&&(d=new Z.Utils.Button("buttonHelpAnnotation",
null,Z.skinPath,d[43],d[44],d[45],"1px","1px","1px","1px","mouseover",Z.Toolbar.z457,"z342ANNOTATION"),t.appendChild(d.elmt));dc(a);fc("0");nd(!0);Z.unsavedEditsTest&&Z.Viewer.initializePageExitEventHandler()}else window.setTimeout(Yd,100)}function dc(d){var a=new k.calculateAnnotationPanelDimensions(wd,xb,xd),b=k.calculateAnnotationPanelCoords(jf,a.w,a.h,Ga,Ba);k.sizeAndPositionAnnotationPanel(se,a.w,a.h,b.x,b.y);se.display=0==Z.annotationPanelVisible||3==Z.annotationPanelVisible||"0"==jf||Z.measureVisible&&
null===Z.editMode?"none":"inline-block";var c=parseInt(Z.Utils.getResource("z53"),10),e=parseInt(Z.Utils.getResource("z51"),10),L=parseInt(Z.Utils.getResource("z55"),10),h=parseInt(Z.Utils.getResource("z54"),10),f=parseInt(Z.Utils.getResource("z56"),10),A=parseInt(Z.Utils.getResource("z62"),10);parseInt(Z.Utils.getResource("z63"),10);var l=parseInt(Z.Utils.getResource("z64"),10),g=parseInt(Z.Utils.getResource("z72SMALL"),10),m=parseInt(Z.Utils.getResource("z72"),10),r=parseFloat(Z.Utils.getResource("z82")),
p=Z.Utils.getResource("z83"),t=Z.Utils.getResource("z83LIGHT"),s=Z.Utils.getResource("z83NOALPHA"),q=parseInt(Z.Utils.getResource("z59"),10),ga=9,ma=L-24,B=0,ob=Z.browser==Z.browsers.CHROME||Z.browser==Z.browsers.SAFARI?-2:0,u=0,pb=0,y=0,D=0,E=0,x=0,K=0,F=0;if("edit"==Z.editMode)var C=0,G=0,zb=0,H=0,S=0,I=0,J=0,T=0,N=0,M=0,U=0,O=0;var Q=0;if(null===Z.editMode)wd&&(C=f+4,Q=C+17),xb&&(u=Q+4+1,Q=u+17),xd&&(N=Q+4+1,M=N+17+4);else{var w=d[6],$=d[7],R=d[8],W=d[4],fa=d[5];15<w&&(w=15);15<$&&($=15);22<R&&
(R=22);1<W&&(W=1);18<fa&&(fa=18);var X=.75*w,Y=.75*$,da=2*X,ia=f+3,Da=1.5*$,ja=2*$+1.5*Y,ca=w/2,la=(fa-$)/2,rd=.5*$,ba=1.75*f,na=a.w-2*f-2,oa=7*$+46.5,P=0,te=a.w-3*f,ra=40.5,aa=a.w-f-w-5,Gc=aa-R,Ud=Gc-R;if("markup"==Z.editMode){if(ga=0,ba=f+4,L=a.w-2*f,ma=L-24,ia=0,pb=2,y=rd,D=y+$+8.5-1,E=pb+2*$-1,rIconList=11.5,u=pb+ja+8.5-4-2,x=u+15+8,K=x+15+5,F=rd-5,1==Z.helpVisible||2==Z.helpVisible)B=R}else if("edit"==Z.editMode){wd&&(C=f+4,G=C+17-1,zb=rd,Q=G+Da+4);xb&&(u=Q+f,pb=u+17+4+1,y=rd+1,H=y+$+rd,D=5,
E=pb+2*$-1,rIconList=12.75,x=pb+Da+8.5+4,S=x+$+8.5,I=S+$+8.5,J=I+$+8.5,T=J+$+8.5,K=T+$+8.5+5,F=rd-5,Q=K+Da+4-5);xd&&(N=Q+f,M=N+17+4+1,U=M+q+2,O=rd);var ha=8.5*da+1,wa=1.8*Y}}var ua=document.getElementById("annotationPanelBackground");if(ua){var ta=ua.style;ta.width=a.w+"px";ta.height=a.h+"px";ta.backgroundColor=p;Z.Utils.setOpacity(annotationPanelBackground,r,s)}if(wd){var va=document.getElementById("labelPOITextBox");if(va&&V){var qa=va.style;qa.width=c+"px";qa.height="15px";qa.left=f+"px";qa.top=
C+3+"px";qa.visibility="visible";Z.Utils.setTextNodeStyle(va,"black","verdana",A+"px","none","normal","normal","normal","normal","1em","left","none");var Ad=V.style;Ad.width=L+"px";Ad.left=c+"px";Ad.top=C+ob+"px";Ad.visibility="visible";if(null!==Z.editMode){var ve=document.getElementById("textBoxFor-poiNameTextElement");if(ve){var xa=ve.style;xa.width=ma+"px";xa.height="15px";xa.left=c+"px";xa.top=C+"px";Z.Utils.setTextAreaStyle(ve,"black","verdana",l+"px","none","normal","normal","normal","normal",
"1em","left","none",g+"px")}var Tb=document.getElementById("buttonContainerPOI");if(Tb){var Aa=Tb.style;Aa.width=a.w+"px";Aa.height=Da+"px";Aa.left="0px";Aa.top=G+"px"}var ka=document.getElementById("buttonPOIEdit");if(ka){Z.Utils.buttonSize(ka,w,$);var Fa=ka.style;Fa.left=aa+"px";Fa.top=zb+"px"}var Ea=document.getElementById("buttonPOIAdd");if(Ea){Z.Utils.buttonSize(Ea,w,$);var La=Ea.style;La.left=Gc+"px";La.top=zb+"px"}var za=document.getElementById("buttonPOISave");if(za){Z.Utils.buttonSize(za,
w,$);var Ha=za.style;Ha.left=aa+"px";Ha.top=zb+"px";Ha.display="none"}var Ca=document.getElementById("buttonPOICancel");if(Ca){Z.Utils.buttonSize(Ca,w,$);var Ia=Ca.style;Ia.left=za?Gc+"px":aa+"px";Ia.top=zb+"px";Ia.display="none"}var Ma=document.getElementById("buttonPOIDelete");if(Ma){Z.Utils.buttonSize(Ma,w,$);var Oa=Ma.style;Oa.left=za&&Ca?Ud+"px":za?Gc+"px":aa+"px";Oa.top=zb+"px";Oa.display="none"}var Ua=document.getElementById("overlayPOIDisable");if(Ua){var Ja=Ua.style;Ja.width=a.w+"px";Ja.height=
f+15+$+17+4+"px";Ja.left="0px";Ja.top="0px"}}}}if(xb){var Wa=document.getElementById("labelLabelTextBox");if(Wa){var Ka=Wa.style;Ka.width=c+"px";Ka.height="15px";Ka.left=f+"px";Ka.top=u+3+"px";Ka.visibility="visible";Z.Utils.setTextNodeStyle(Wa,"black","verdana",A+"px","none","normal","normal","normal","normal","1em","left","none")}}if(("markup"==Z.editMode||xb)&&sa){var Pa=sa.style;Pa.width=L+"px";Pa.left="markup"==Z.editMode?f+"px":c+"px";Pa.top=u+ob+"px";Pa.visibility="visible"}if("edit"==Z.editMode&&
xb||"markup"==Z.editMode){var Xa=document.getElementById("textBoxFor-labelNameTextElement");if(Xa){var Qa=Xa.style;Qa.width=ma+"px";Qa.height="15px";Qa.left="markup"==Z.editMode?f+"px":c+"px";Qa.top=u+"px";Z.Utils.setTextAreaStyle(Xa,"black","verdana",l+"px","none","normal","normal","normal","normal","1em","left","none",g+"px")}var cb=document.getElementById("buttonBorderLabel");if(cb){var pa=cb.style;pa.width=na+"px";pa.height=oa+"px";pa.left=f+"px";pa.top=pb+"px"}var Ra=document.getElementById("buttonContainerLabel");
if(Ra){var Sa=Ra.style;Sa.width=a.w-2+"px";Sa.height="markup"==Z.editMode?ja+"px":.7*ja+"px";Sa.left="0px";Sa.top=pb+"px"}var Ta=document.getElementById("buttonViewMode");if(Ta){P+=ba+1;Z.Utils.buttonSize(Ta,w,$);var Va=Ta.style;Va.left=P+"px";Va.top=y+"px"}var $a=document.getElementById("buttonEditColorPicker");if($a){P+=R;Z.Utils.buttonSize($a,w,$);var db=$a.style;db.left=P+"px";db.top=y+"px"}var ab=document.getElementById("editModeDivider");if(ab){P+=R+1;"markup"==Z.editMode&&(P+=ca-1);Z.Utils.graphicSize(ab,
W,fa);var fb=ab.style;fb.left=P+"px";fb.top=y-la+"px"}var Ya=document.getElementById("buttonEditModeFreehand");if(Ya){P+=R-w+4;"markup"==Z.editMode&&(P+=ca-4);Z.Utils.buttonSize(Ya,w,$);var bb=Ya.style;bb.left=P+"px";bb.top=y+"px"}var gb=document.getElementById("buttonEditModeText");if(gb){P+=R;Z.Utils.buttonSize(gb,w,$);var rb=gb.style;rb.left=P+"px";rb.top=y+"px"}var nb=document.getElementById("buttonEditModeIcon");if(nb){P+=R;Z.Utils.buttonSize(nb,w,$);var sb=nb.style;sb.left=P+"px";sb.top=y+"px"}var hb=
document.getElementById("buttonEditModeRectangle");if(hb){P+=R;Z.Utils.buttonSize(hb,w,$);var Za=hb.style;Za.left=P+"px";Za.top=y+"px"}var ib=document.getElementById("buttonEditModePolygon");if(ib){P+=R;Z.Utils.buttonSize(ib,w,$);var jb=ib.style;jb.left=P+"px";jb.top=y+"px"}var kb=document.getElementById("buttonEditModeMeasure");if(kb){P+=R;Z.Utils.buttonSize(kb,w,$);var lb=kb.style;lb.left=P+"px";lb.top=y+"px"}if("markup"!=Z.editMode){var Bb=document.getElementById("buttonContainerLabelColorsBackground");
if(Bb){var qb=Bb.style;qb.width=ha+"px";qb.height=wa+"px";qb.left="0px";qb.top="0px"}}var Db=document.getElementById("buttonContainerLabelColors");if(Db){var Eb=Db.style;Eb.left=ia+"px";Eb.top=H+"px"}var tb=document.getElementById("buttonColor0");if(tb){P=f+4+1;Z.Utils.buttonSize(tb,X,Y);var mb=tb.style;mb.left=P+"px";mb.top=D+"px"}var ub=document.getElementById("buttonColor1");if(ub){P+=da;Z.Utils.buttonSize(ub,X,Y);var Fb=ub.style;Fb.left=P+"px";Fb.top=D+"px"}var vb=document.getElementById("buttonColor2");
if(vb){P+=da;Z.Utils.buttonSize(vb,X,Y);var Ib=vb.style;Ib.left=P+"px";Ib.top=D+"px"}var yb=document.getElementById("buttonColor3");if(yb){P+=da;Z.Utils.buttonSize(yb,X,Y);var Kb=yb.style;Kb.left=P+"px";Kb.top=D+"px"}var Ab=document.getElementById("buttonColor4");if(Ab){P+=da;Z.Utils.buttonSize(Ab,X,Y);var Mb=Ab.style;Mb.left=P+"px";Mb.top=D+"px"}var Hb=document.getElementById("buttonColor5");if(Hb){P+=da;Z.Utils.buttonSize(Hb,X,Y);var Rb=Hb.style;Rb.left=P+"px";Rb.top=D+"px"}var Lb=document.getElementById("buttonColor6");
if(Lb){P+=da;Z.Utils.buttonSize(Lb,X,Y);var Ub=Lb.style;Ub.left=P+"px";Ub.top=D+"px"}var Nb=document.getElementById("buttonColor7");if(Nb){P+=da;Z.Utils.buttonSize(Nb,X,Y);var Yb=Nb.style;Yb.left=P+"px";Yb.top=D+"px"}var Zb=document.getElementById("buttonBorderLg");if(Zb){var Na=Zb.style;Na.width=w+"px";Na.height=$+"px";Ta?(Na.left=parseFloat(Va.left)-2+"px",Na.top=parseFloat(Va.top)-2+"px"):Ya?(Na.left=parseFloat(bb.left)-2+"px",Na.top=parseFloat(bb.top)-2+"px"):hb?(Na.left=parseFloat(Za.left)-2+
"px",Na.top=parseFloat(Za.top)-2+"px"):ib?(Na.left=parseFloat(jb.left)-2+"px",Na.top=parseFloat(jb.top)-2+"px"):kb&&(Na.left=parseFloat(lb.left)-2+"px",Na.top=parseFloat(lb.top)-2+"px")}var ac=document.getElementById("buttonBorderSm");if(ac&&mb){var Gb=ac.style;Gb.width=X+"px";Gb.height=Y+"px";Gb.left=parseFloat(mb.left)-2+"px";Gb.top=parseFloat(mb.top)-2+"px"}}if("markup"==Z.editMode||"edit"==Z.editMode&&xb){var Pb=document.getElementById("labelCaptionTextBox"),Sb=document.getElementById("textBoxFor-captionTextElement");
if(Pb&&Sb){var wb=Pb.style;wb.width=c+"px";wb.height="15px";wb.left=ba+"px";wb.top=x+3+"px";wb.visibility="markup"==Z.editMode?"hidden":"visible";Z.Utils.setTextNodeStyle(Pb,"black","verdana",A+"px","none","normal","normal","normal","normal","1em","left","none");var Jb=Sb.style;Jb.width="markup"==Z.editMode?a.w-2*f-4+1+"px":e+ga+"px";Jb.height="15px";Jb.left="markup"==Z.editMode?f+"px":ba+c+"px";Jb.top=x+"px";Z.Utils.setTextAreaStyle(Sb,"black","verdana",l+"px","none","normal","normal","normal","normal",
"1em","left","none",g+"px")}}if("edit"==Z.editMode&&xb){var Vb=document.getElementById("labelTooltipTextBox"),Wb=document.getElementById("textBoxFor-tooltipTextElement");if(Vb&&Wb){var Cb=Vb.style;Cb.width=c+"px";Cb.height="15px";Cb.left=ba+"px";Cb.top=S+3+"px";Cb.visibility="visible";Z.Utils.setTextNodeStyle(Vb,"black","verdana",A+"px","none","normal","normal","normal","normal","1em","left","none");var eb=Wb.style;eb.width=e+ga+"px";eb.height="15px";eb.left=ba+c+"px";eb.top=S+"px";Z.Utils.setTextAreaStyle(Wb,
"black","verdana",l+"px","none","normal","normal","normal","normal","1em","left","none",g+"px")}var bc=document.getElementById("labelClickURLTextBox"),cc=document.getElementById("textBoxFor-clickURLTextElement");if(bc&&cc){var Ob=bc.style;Ob.width=c+"px";Ob.height="15px";Ob.left=ba+"px";Ob.top=I+3+"px";Ob.visibility="visible";Z.Utils.setTextNodeStyle(bc,"black","verdana",A+"px","none","normal","normal","normal","normal","1em","left","none");eb=cc.style;eb.width=e+ga+"px";eb.height="15px";eb.left=
ba+c+"px";eb.top=I+"px";Z.Utils.setTextAreaStyle(cc,"black","verdana",l+"px","none","normal","normal","normal","normal","1em","left","none",g+"px")}var hc=document.getElementById("labelCaptionPositionList");if(hc){var Qb=hc.style;Qb.width=h+"px";Qb.left=ba+"px";Qb.top=J+"px";Qb.visibility="visible"}var nc=document.getElementById("labelTargetList");if(nc){var dc=nc.style;dc.width=h+"px";dc.left=ba+h+R-w+"px";dc.top=J+"px";dc.visibility="visible"}var gc=document.getElementById("labelScaleTextBox"),
ic=document.getElementById("buttonLabelScaleDown"),jc=document.getElementById("buttonLabelScaleUp");if(gc&&ic&&jc){var P=ba+12,Xb=gc.style;Xb.width=c+"px";Xb.height="15px";Xb.left=P+"px";Xb.top=T+3+"px";Xb.visibility="visible";Z.Utils.setTextNodeStyle(gc,"black","verdana",A+"px","none","normal","normal","normal","normal","1em","left","none");P+=c-10;Z.Utils.buttonSize(ic,w,$);var sc=ic.style;sc.left=P+"px";sc.top=T+"px";P+=R;Z.Utils.buttonSize(jc,w,$);var tc=jc.style;tc.left=P+"px";tc.top=T+"px";
P+=R+3}var kc=document.getElementById("labelRolloverTextBox"),wc=document.getElementById("containerFor-checkboxRollover"),lc=document.getElementById("checkboxRollover");if(kc&&wc&&lc){var sd=kc.style;sd.width=c+"px";sd.height="15px";sd.left=P+"px";sd.top=T+3+"px";sd.visibility="visible";Z.Utils.setTextNodeStyle(kc,"black","verdana",A+"px","none","normal","normal","normal","normal","1em","left","none");var P=P+(c-1),ec=wc.style;ec.width=1.5*w+"px";ec.height=1.5*$+"px";ec.left=P+3+"px";ec.top=T-3+"px";
lc.width=w;lc.height=$}}if("edit"==Z.editMode&&xb||"markup"==Z.editMode){var zc=document.getElementById("buttonContainerLabel2");if(zc){var fc=zc.style;fc.width=a.w+"px";fc.height=Da+"px";fc.left="0px";fc.top=K+"px"}}if("edit"==Z.editMode&&xb){var oc=document.getElementById("buttonLabelEdit");if(oc){Z.Utils.buttonSize(oc,w,$);var Bc=oc.style;Bc.left=aa+"px";Bc.top=F+"px"}var qc=document.getElementById("buttonLabelAdd");if(qc){Z.Utils.buttonSize(qc,w,$);var Ec=qc.style;Ec.left=Gc+"px";Ec.top=F+"px"}}if("edit"==
Z.editMode&&xb||"markup"==Z.editMode){var $b=document.getElementById("buttonLabelSave");if($b){Z.Utils.buttonSize($b,w,$);var vc=$b.style;vc.left=aa-B+"px";vc.top=F+"px";"markup"!=Z.editMode&&(vc.display="none")}}if("edit"==Z.editMode&&xb){var mc=document.getElementById("buttonLabelCancel");if(mc){Z.Utils.buttonSize(mc,w,$);var Vd=mc.style;Vd.left=$b?Gc+"px":aa+"px";Vd.top=F+"px";"markup"!=Z.editMode&&(Vd.display="none")}}if("edit"==Z.editMode&&xb||"markup"==Z.editMode){var Sc=document.getElementById("buttonLabelDelete");
if(Sc){Z.Utils.buttonSize(Sc,w,$);var we=Sc.style;we.left=$b&&mc?Ud-B+"px":$b?Gc-B+"px":aa-B+"px";we.top=F+"px";"markup"!=Z.editMode&&(we.display="none")}}if("markup"==Z.editMode){var Cc=document.getElementById("buttonHelpMarkup");if(Cc){Z.Utils.buttonSize(Cc,w,$);var Nc=Cc.style;Nc.left=aa+"px";Nc.top=F+"px"}}if("edit"==Z.editMode&&xb||"markup"==Z.editMode){var Oc=document.getElementById("buttonContainerLabelIcons");if(Oc){var Pc=Oc.style;Pc.left=f/2+"px";Pc.top=E+"px"}var Qc=document.getElementById("buttonContainerLabelIconsBackground");
if(Qc){var xc=Qc.style;xc.width=te+2*f-1+"px";xc.height=ra+"px";xc.left="0px";xc.top="0px"}var Uc=document.getElementById("labelIconList");if(Uc){var Ic=Uc.style;Ic.width=te+"px";Ic.left=f+"px";Ic.top=rIconList+"px"}}if("edit"==Z.editMode&&xb){var Wc=document.getElementById("overlayLabelDisable");if(Wc){var Ac=Wc.style;Ac.width=a.w+"px";Ac.height=oa+2*rd+2*$+8+"px";Ac.left="0px";Ac.top=u+"px"}var Zc=document.getElementById("overlayLabelDetailDisable");if(Zc&&pa){var pc=Zc.style;pc.width=parseFloat(pa.width)+
2+"px";pc.height=parseFloat(pa.height)+2+"px";pc.left=parseFloat(pa.left)+"px";pc.top=parseFloat(pa.top)+"px";pc.display="inline-block"}var bd=document.getElementById("overlayLabelDetailEditableDisable");if(bd){var Dc=bd.style;Dc.width=parseFloat(pa.width)+"px";Dc.height=parseFloat(pa.height)+"px";Dc.left=parseFloat(pa.left)+1+"px";Dc.top=parseFloat(pa.top)+1+"px"}var dd=document.getElementById("overlayMessageBox"),ed=document.getElementById("textBoxFor-overlayMessageBox");if(dd&&ed){var uc=ed.style;
uc.width=na-50+"px";uc.height="25px";uc.left=parseFloat(pa.left)+21+"px";uc.top=parseFloat(pa.top)+45+"px";uc.backgroundColor=t;dd.style.backgroundColor=t}var gd=document.getElementById("overlayLabelNameEditableDisable");if(gd){var Fc=gd.style;Fc.width=a.w+"px";Fc.height="25px";Fc.left="0px";Fc.top=u-4+"px"}var kd=document.getElementById("overlayLabelCaptionPositionDisable");if(kd){var Hc=kd.style;Hc.width=a.w/2-12+"px";Hc.height="24.5px";Hc.left=f+1+"px";Hc.top=parseFloat(Qb.top)-4+"px"}}if(xd){var Tc=
document.getElementById("labelNoteTextBox"),Vc=document.getElementById("textBoxFor-noteTextElement");if(Tc&&ya&&Vc){var yc=Tc.style;yc.width=c+"px";yc.height="15px";yc.left=f+"px";yc.top=N+3+"px";yc.visibility="visible";Z.Utils.setTextNodeStyle(Tc,"black","verdana",A+"px","none","normal","normal","normal","normal","1em","left","none");var Jc=ya.style;Jc.width=L+"px";Jc.left=c+"px";Jc.top=N+ob+"px";Jc.visibility="visible";var md=a.w-2*f-2,yd=Vc.style;yd.width=md+"px";yd.height=q+"px";yd.left=f+"px";
yd.top=M+"px";yd.visibility="visible";Z.Utils.setTextAreaStyle(Vc,"black","verdana",l+"px","none","normal","normal","normal","normal","1.5em","left","none","0px");var nd=document.getElementById("noteTextElement"),f=md*(1-.98);nd.style.marginLeft=f+"px";nd.style.width="98%";if(null!==Z.editMode){var Xc=document.getElementById("textBoxFor-noteNameTextElement");if(Xc){var Kc=Xc.style;Kc.width=ma+"px";Kc.height="15px";Kc.left=c+"px";Kc.top=N+"px";Z.Utils.setTextAreaStyle(Xc,"black","verdana",l+"px","none",
"normal","normal","normal","normal","1em","left","none",g+"px")}var od=document.getElementById("buttonContainerNote");if(od){var Lc=od.style;Lc.width=a.w+"px";Lc.height=ja+"px";Lc.left="0px";Lc.top=U+"px"}var $c=document.getElementById("buttonNoteEdit");if($c){Z.Utils.buttonSize($c,w,$);var pd=$c.style;pd.left=aa+"px";pd.top=O+"px"}var ad=document.getElementById("buttonNoteAdd");if(ad){Z.Utils.buttonSize(ad,w,$);var qd=ad.style;qd.left=Gc+"px";qd.top=O+"px"}var rc=document.getElementById("buttonNoteSave");
if(rc){Z.Utils.buttonSize(rc,w,$);var cd=rc.style;cd.left=aa+"px";cd.top=O+"px";cd.display="none"}var Rc=document.getElementById("buttonNoteCancel");if(Rc){Z.Utils.buttonSize(Rc,w,$);var fd=Rc.style;fd.left=rc?Gc+"px":aa+"px";fd.top=O+"px";fd.display="none"}var hd=document.getElementById("buttonNoteDelete");if(hd){Z.Utils.buttonSize(hd,w,$);var jd=hd.style;jd.left=rc&&Rc?Ud+"px":rc?Gc+"px":aa+"px";jd.top=O+"px";jd.display="none"}if("edit"==Z.editMode){var ld=document.getElementById("buttonHelpAnnotation");
if(ld){Z.Utils.buttonSize(ld,w,$);var td=ld.style;td.left=ba+"px";td.top=O+"px"}}var ud=document.getElementById("overlayNoteDetailDisable");if(ud){var Mc=ud.style;Mc.width=parseFloat(yd.width)+2+"px";Mc.height=parseFloat(yd.height)+2+"px";Mc.left=parseFloat(yd.left)+"px";Mc.top=parseFloat(yd.top)+"px";Mc.display="inline-block"}var vd=document.getElementById("overlayNoteDisable");if(vd){var Yc=vd.style;Yc.width=a.w+"px";Yc.height=23.5+q+m+8.5+$+4+"px";Yc.left="0px";Yc.top=N+"px"}}}}}function nd(d){Ie=
d;if(document.getElementById("buttonLabelSave")&&d&&null!==Z.onAnnotationReady)Z.onAnnotationReady()}function ib(d){var a=0,b=[];switch(d){case "slide":d=0;for(var c=Mb.length;d<c;d++)b[b.length]=parseInt(Mb[d].internalID,10);break;case "hotspot":d=0;for(c=q.length;d<c;d++)b[b.length]=parseInt(q[d].internalID,10);break;case "poi":d=0;for(c=fa.length;d<c;d++)b[b.length]=parseInt(fa[d].value,10);break;case "label":d=0;for(c=Y.length;d<c;d++)b[b.length]=parseInt(Y[d].value,10);break;case "labelExternal":d=
0;for(c=q.length;d<c;d++)b[b.length]=parseInt(q[d].id,10);break;case "note":for(d=0,c=ta.length;d<c;d++)b[b.length]=parseInt(ta[d].value,10)}b=Z.Utils.arraySortNumericAscending(b);0<b.length&&(a=b[b.length-1]+1);return a.toString()}function qf(d){if(d=Z.Utils.event(d)){var a=Z.Utils.target(d);d=Z.Utils.relatedTarget(d);var b=Bb(a);null===b||null===d||"captionTextBox"==d.id&&-1!=a.id.indexOf("hot")&&-1==a.id.indexOf("hotspotDisplay")||"captionTextBox"==a.id&&-1!=d.id.indexOf("hot")&&-1==d.id.indexOf("hotspotDisplay")||
k.setHotspotVisibility(b,!0)}}function Uc(){var d=Z.Viewport.z538(this),d=d.id.substring(3,d.id.length),d=Z.Utils.arrayIndexOfObjectValue(q,"internalID",d);-1!=d&&(d=unescape(q[d].urlTarget),d=new Function(d),window.setTimeout(d,200))}function ld(d){if(d=Z.Utils.event(d))Z.clickZoomAndPanBlock=!0}function Ae(d){if(d=Z.Utils.event(d)){var a=Z.Utils.target(d);d=Z.Utils.relatedTarget(d);var b=Bb(a);null===b||null===d||"captionTextBox"==d.id&&-1!=a.id.indexOf("hot")&&-1==a.id.indexOf("hotspotDisplay")||
"captionTextBox"==a.id&&-1!=d.id.indexOf("hot")&&-1==d.id.indexOf("hotspotDisplay")||k.setHotspotVisibility(b,!1)}}function pf(d){if(d=Z.Utils.event(d))Z.clickZoomAndPanBlock=!0}function ze(d){(d=Z.Utils.event(d))&&!d.altKey&&(d=Z.Utils.target(d),d=Bb(d),d=d.id.substring(3,d.id.length),Z.Utils.arrayIndexOfObjectValue(q,"internalID",d),d=Z.Utils.getResource("z3"),Z.Utils.showMessage(d,!0,null,"center",!0))}function of(d){(d=Z.Utils.event(d))&&!d.altKey&&(d=Z.Utils.target(d),d=Bb(d),d=d.id.substring(3,
d.id.length),Z.Utils.arrayIndexOfObjectValue(q,"internalID",d),d=Z.Utils.getResource("z3"),Z.Utils.showMessage(d,!0,null,"center",!0))}function De(d){var a="0";if(d=Z.Utils.event(d))Z.tourPlaying&&k.tourStop(),d=Z.Utils.target(d),a=d.options[d.selectedIndex].value;isNaN(parseInt(a),10)||(d=Z.Utils.arrayIndexOfObjectValue(q,"internalID",a),-1!=d&&(Z.Utils.playAudio(Je,q[d].audio),k.zoomAndPanToView(q[d].x,q[d].y,q[d].z/100,q[d].rotation)))}function fc(d,a,b){fa.sort(Ub);Z.Utils.updateSelectElement(V,
fa,d);if("undefined"===typeof d||null===d)0==V.options.length&&(d=Z.Utils.getResource("z27"),Wd("0",d,"center","center","-1","0"),Zd="0"),d="0";else{var c=Z.Utils.arrayIndexOfObjectValue(fa,"value",d);-1!=c&&(d=fa[c].value)}var c=Z.Utils.arrayIndexOfObjectValue(fa,"value",d),e=document.getElementById("poiNameTextElement");e&&-1!=c&&(e.value=fa[c].text);gc(d,a);"markup"!=Z.editMode&&Xc(d,b)}function gc(d,a){Y.sort(Ub);za="markup"==Z.editMode?Z.Utils.arrayClone("labels",Y,za):Kc(Y,d);Z.Utils.updateSelectElement(sa,
za,a);if("undefined"===typeof a||null===a)a=0<sa.options.length?sa.options[0].value:null;Ke(a)}function Ke(d){u=d;qa=Le=null;Ia=!0;var a=Z.Utils.arrayIndexOfObjectValue(q,"internalID",u);H=-1!=a?q[a]:null;if(null!==Z.editMode){if(d=document.getElementById("labelNameTextElement"))d.value=null!==H?H.name:"";if(d=document.getElementById("captionTextElement"))if(d.value="",null!==H){var b=H.captionHTML;"undefined"!==typeof b&&Z.Utils.stringValidate(b)?d.value=b:d.value=H.caption}if("markup"!=Z.editMode){var c=
document.getElementById("labelIconList"),e=document.getElementById("tooltipTextElement"),L=document.getElementById("clickURLTextElement"),f=document.getElementById("labelCaptionPositionList");d=document.getElementById("labelTargetList");b=document.getElementById("checkboxRollover");if(c&&e&&L&&f&&d&&b&&(c.selectedIndex=0,e.value="",L.value="",f.selectedIndex=0,d.selectedIndex=0,b.checked=!1,null!==H)){if("icon"==H.mediaType){var a=H.media,h=a.lastIndexOf("/")+1,A=a.lastIndexOf(".");-1!=h&&-1!=A&&
(a=a.substring(h,A).toLowerCase(),a=Z.Utils.arrayIndexOfObjectValueSubstring(c,"value",a,null,!0),-1!=a&&(c.selectedIndex=a),k.toggleLabelIconPicker(!1))}c=H.captionPosition;Z.Utils.stringValidate(c)&&(a=Z.Utils.arrayIndexOfObjectValue(f,"value",c),-1!=a&&(f.selectedIndex=a));f=H.tooltipHTML;"undefined"!==typeof f&&Z.Utils.stringValidate(f)?e.value=f:e.value=H.tooltip;e=H.clickURL;Z.Utils.stringValidate(e)&&(L.value=e);L=H.urlTarget;Z.Utils.stringValidate(L)&&(a=Z.Utils.arrayIndexOfObjectValue(d,
"value",L),-1!=a&&(d.selectedIndex=a));b.checked=1==H.rollover}}}null!==H&&(u=H.internalID);I?Ic():Va()}function Xc(d,a){ta.sort(Ub);Fb=Kc(ta,d);Z.Utils.updateSelectElement(ya,Fb,a);if("undefined"===typeof a||null===a)a=0<ya.options.length?ya.options[0].value:null;Me(a)}function Me(d){d=Z.Utils.arrayIndexOfObjectValue(Fb,"value",d);if(null!==Z.editMode){var a=document.getElementById("noteNameTextElement");a&&(a.value=-1!=d?Fb[d].text:"")}if(a=document.getElementById("noteTextElement"))a.value=-1!=
d?Fb[d].noteText:""}function Ne(d){if(d=Z.Utils.event(d))if(d=Z.Utils.target(d),(d=d.options[d.selectedIndex].value)&&!isNaN(parseInt(d),10)){k.saveEditsPOI(!0);fc(d);var a=Z.Utils.arrayIndexOfObjectValue(fa,"value",d);if(-1!=a){var b;b=fa[a].x;d="center"==b?Z.imageCenterX:parseFloat(b);b=fa[a].y;var c="center"==b?Z.imageCenterY:parseFloat(b);b=fa[a].z;a="-1"==b?Z.fitZ:parseFloat(b);k.getInitializedAnnotationPanel()?k.zoomAndPanToView(d,c,a/100):k.setView(d,c,a/100)}}}function vf(d){var a;if(d=Z.Utils.event(d))a=
Z.Utils.target(d),a=a.options[a.selectedIndex].value;a&&!isNaN(parseInt(a,10))&&(k.saveEditsLabel(!0),Ke(a),u=a,Ia=!0,a=Z.Utils.arrayIndexOfObjectValue(q,"internalID",u),H=-1!=a?q[a]:null,"view"!=Z.labelMode&&k.setEditModeLabel(H.mediaType,!0,H.media,!0),d&&k.goToLabelByID(null,H))}function He(d){k.toggleLabelIconPicker(!1);d=Z.Utils.event(d);d=Z.Utils.target(d);d=d[d.selectedIndex].value;"External Graphics File"!=d&&"markup"!=Z.editMode&&"editLabel"==Z.editing&&"shim"!=d&&(d=Z.annotationFolder+"/"+
d,k.modifyHotspot(u,"mediaType","icon",!0,!0),k.modifyHotspot(u,"media",d,!1,!0))}function tf(d){d=Z.Utils.event(d);d=Z.Utils.target(d);d=labelCaptionPositionListDP[d.selectedIndex].value;"shim"!==d&&k.modifyHotspot(u,"captionPosition",d,!1,!0)}function Fe(d){d=Z.Utils.event(d);d=Z.Utils.target(d);d=labelTargetListDP[d.selectedIndex].value;"shim"!==d&&k.modifyHotspot(u,"urlTarget",d,!1,!0)}function uf(d){if(d=Z.Utils.event(d))d=Z.Utils.target(d),k.modifyHotspot(u,"rollover",d.checked,!1,!0)}function Oe(d){var a;
if(d=Z.Utils.event(d))d=Z.Utils.target(d),a=d.options[d.selectedIndex].value;a&&!isNaN(parseInt(a,10))&&(k.saveEditsNote(!0),Me(a))}function ec(d){if(d=Z.Utils.event(d))if(d=Z.Utils.target(d))$d(d.id),Z.Utils.removeEventListener(document,"keydown",Na),Z.Utils.removeEventListener(document,"keyup",Na),Z.Utils.removeEventListener(document,"keydown",Z.Utils.preventDefault),Z.Utils.removeEventListener(document,"keyup",Z.Utils.preventDefault)}function zc(d){if(d=Z.Utils.event(d)){if(d=Z.Utils.target(d)){if(0==
sa.options.length&&("labelNameTextElement"==d.id||"captionTextElement"==d.id||"tooltipTextElement"==d.id||"clickURLTextElement"==d.id)){d=parseInt(Z.Utils.getResource("z6"),10);Z.Utils.showMessage(Z.Utils.getResource("z4"),!0,d,"center",!0);return}var a=null;switch(d.id){case "poiNameTextElement":var b=V.selectedIndex,c=V[b].value;fa[b].text=d.value;fa.sort(Ub);Z.Utils.updateSelectElement(V,fa,c);break;case "labelNameTextElement":b=sa.selectedIndex;c=sa[b].value;Y[b].text=d.value;za[b].text=d.value;
Y.sort(Ub);za.sort(Ub);Z.Utils.updateSelectElement(sa,za,c);b=Z.Utils.arrayIndexOfObjectValue(q,"internalID",u);-1!=b&&(q[b].name=d.value);break;case "captionTextElement":b=d.value;a=-1!=b.indexOf("<CAPTION>")?"captionHTML":"caption";break;case "tooltipTextElement":a=b&&-1!=b.indexOf("<TOOLTIP>")?"tooltipHTML":"tooltip";break;case "clickURLTextElement":a="clickURL";break;case "noteNameTextElement":b=ya.selectedIndex;c=ya[b].value;ta[b].text=d.value;Fb[b].text=d.value;ta.sort(Ub);Fb.sort(Ub);Z.Utils.updateSelectElement(ya,
Fb,c);break;case "noteTextElement":ta[ya.selectedIndex].noteText=d.value,Fb[ya.selectedIndex].noteText=d.value}null!==a&&k.modifyHotspot(u,a,d.value,!1,!0)}Z.Utils.addEventListener(document,"keydown",Na);Z.Utils.addEventListener(document,"keyup",Na);Z.Utils.addEventListener(document,"keydown",Z.Utils.preventDefault);Z.Utils.addEventListener(document,"keyup",Z.Utils.preventDefault)}}function $d(d){if("markup"==Z.editMode){var a=document.getElementById("labelNameTextElement"),b=document.getElementById("captionTextElement");
if(a&&b)switch(d){case "labelNameTextElement":labelNameTextElement.tabIndex=1;captionTextElement.tabIndex=2;break;case "captionTextElement":labelNameTextElement.tabIndex=2,captionTextElement.tabIndex=1}}else if(null!==Z.editMode){var c=document.getElementById("poiNameTextElement"),a=document.getElementById("labelNameTextElement"),b=document.getElementById("captionTextElement"),e=document.getElementById("tooltipTextElement"),L=document.getElementById("clickURLTextElement"),f=document.getElementById("noteNameTextElement"),
h=document.getElementById("noteTextElement");c&&a&&b&&e&&L&&f&&h&&(c.tabIndex="",a.tabIndex="",b.tabIndex="",e.tabIndex="",L.tabIndex="",f.tabIndex="",h.tabIndex="");switch(d){case "poi":poiNameTextElement.tabIndex=1;break;case "label":labelNameTextElement.tabIndex=1;captionTextElement.tabIndex=2;tooltipTextElement.tabIndex=3;clickURLTextElement.tabIndex=4;break;case "note":noteNameTextElement.tabIndex=1;noteTextElement.tabIndex=2;break;case "noteNameTextElement":noteNameTextElement.tabIndex=1;noteTextElement.tabIndex=
2;break;case "noteTextElement":noteNameTextElement.tabIndex=2;noteTextElement.tabIndex=1;break;case "clickURLTextElement":labelNameTextElement.tabIndex=2;captionTextElement.tabIndex=3;tooltipTextElement.tabIndex=4;clickURLTextElement.tabIndex=1;break;default:labelNameTextElement.tabIndex=1,captionTextElement.tabIndex=2,tooltipTextElement.tabIndex=3,clickURLTextElement.tabIndex=4}}}function Kc(d,a){for(var b=[],c=0,e=d.length;c<e;c++)d[c].poiID==a&&(b[b.length]=d[c]);return b}function xc(d,a,b,c,e){if(Z.useCanvas&&
"polygon"==d.media){if(d.visibility||d.rollover||c){a=d.internalID;if("undefined"!==typeof d.polygonPts&&null!==d.polygonPts&&0<d.polygonPts.length){targetCtx=e?qb:"view"==Z.labelMode||a!==u?kf:va;targetCtx.save();targetCtx.translate((d.x-Z.imageX)*Z.imageZ,(d.y-Z.imageY)*Z.imageZ);var L=X/tc;e=k.getZoom();c=d.xScale/100/L*e;L=d.yScale/100/L*e;1!=c&&1!=L&&targetCtx.scale(c,L);"freehand"==d.mediaType?targetCtx.lineWidth=Fg/e:(targetCtx.lineWidth=Gg/e,targetCtx.fillStyle=d.fillColor);targetCtx.strokeStyle=
d.lineColor;c=d.polygonPts.slice(0);var L=d.x,f=d.y;"measure"!=Z.labelMode||d.polyClosed||Ia||"undefined"===typeof b||null===b||(c[c.length]={x:b.x,y:b.y});targetCtx.beginPath();var h=c[0].x-L,A=c[0].y-f;targetCtx.moveTo(h,A);for(var l=1,g=c.length;l<g;l++){var m=c[l].x-L,r=c[l].y-f;targetCtx.lineTo(m,r)}"freehand"!=d.mediaType&&(d.polyClosed||Wa&&0==qa)&&(d.polyClosed&&(targetCtx.lineTo(h,A),targetCtx.closePath()),d.fillVisible&&(d.polyClosed||a!=u)&&(targetCtx.globalAlpha=nh,targetCtx.fill()),targetCtx.globalAlpha=
1);targetCtx.stroke();if((null===Z.editMode&&"measure"==Z.labelMode||"addLabel"==Z.editing||"editLabel"==Z.editing)&&("rectangle"==Z.labelMode&&4==c.length||"polygon"==Z.labelMode||"measure"==Z.labelMode)&&d.internalID==u&&"undefined"!==typeof d&&null!==d&&"freehand"!=d.mediaType)for(d=1/e,l=0,g=c.length;l<g;l++)m=c[l].x-L,r=c[l].y-f,ae(m,r,!Ia&&0==l,d);targetCtx.restore()}null===a||"undefined"===typeof b||I||oc(a,b)}}else Hg||(Z.Utils.showMessage(Z.Utils.getResource("z9")),Hg=!0)}function ae(d,a,
b,c){var e=wf*c;va.lineWidth=oh*c;va.strokeStyle=Pf;va.fillStyle=b?ph:qh;va.beginPath();va.arc(d,a,e,0,2*Math.PI,!1);va.closePath();va.globalAlpha=.5;va.fill();va.globalAlpha=1;va.stroke()}function be(d,a,b){Z.Utils.clearDisplay(Aa);var c=new Ab,e=Z.Utils.arrayIndexOfObjectValue(q,"internalID",u);if(-1!=e){e=q[e];xc(e,c);var c=k.getZoom(),L=e.polygonPts,f=L[L.length-1],L=(f.x-Z.imageX)*c,c=(f.y-Z.imageY)*c;e.polyClosed||(va.lineWidth=Gg,va.strokeStyle=lineStrokeColor,va.beginPath(),va.moveTo(L,c),
va.lineTo(d,a),va.closePath(),va.stroke());"polygon"!=Z.labelMode&&"measure"!=Z.labelMode||null===u||oc(u,b,!0)}}function Ic(d){Ya&&Z.Utils.clearDisplay(Ya);Aa&&Z.Utils.clearDisplay(Aa);if("inline-block"==vc.display)for(var a=new Ab,b=0,c=q.length;b<c;b++){var e=q[b];if("polygon"==e.media&&e.visibility&&(d||"rectangle"!=Z.labelMode&&"polygon"!=Z.labelMode&&"measure"!=Z.labelMode||"undefined"===typeof u||null===u||u!==b)){var L=e.x,f=e.y;(!Z.hotspotsDrawOnlyInView||L+Hc>a.box.l&&L-Hc<a.box.r&&f+Hc>
a.box.t&&f-Hc<a.box.b)&&xc(e,a,null,d)}}}function Pe(d,a,b,c,e){va.lineWidth=Fg;va.strokeStyle=lineStrokeColor;va.beginPath();va.moveTo(d,a);va.lineTo(b,c);va.closePath();va.stroke();va.strokeStyle=Pf;2<Z.Utils.calculatePointsDistance(d,a,b,c)&&rb(u,!1,e);oc(u,e)}function ce(d,a,b){od=!0;Z.Utils.clearDisplay(Aa);var c=new Ab;d=Z.Utils.arrayIndexOfObjectValue(q,"internalID",d);if(-1!=d){d=q[d];d.polygonPts[a]=b;var e=d.polygonPts.length;"rectangle"==Z.labelMode&&4==e&&(d.polygonPts=Lc(d.polygonPts,
a));xc(d,c,b)}}function Lc(d,a){var b=d[a].x,c=d[a].y,e=a-1;0>e&&(e+=4);var L=a+1;3<L&&(L-=4);1==e||3==e?(d[e].x=b,d[L].y=c):(d[L].x=b,d[e].y=c);return d}function ud(d,a){d=Z.Utils.event(d);if("undefined"===typeof u||null===u)rb(null,!0,a);else{var b=Z.Utils.arrayIndexOfObjectValue(q,"internalID",u);-1!=b&&(b=q[b],Le=b.polygonPts,b=b.polyClosed,null===Le?(rb(u,!0,a),oc(u,a)):(qa=Mc(d,a),b?null===qa&&rb(null,!0,a):null===qa?d.altKey?(rb(u,!1,a),Ac(u,!1)):rb(u,!1,a):0==qa&&2<Le.length&&!Ia&&Ac(u,!0)))}(!d.altKey||
"measure"==Z.labelMode&&null!==u)&&oc(u,a)}function rb(d,a,b){var c,e=!1,L=!1;"undefined"===typeof d||null===d||"addLabel"==Z.editing&&Ia&&("polygon"==Z.labelMode||"measure"==Z.labelMode)?(null===Z.editMode&&"measure"==Z.labelMode&&0<q.length&&k.deleteAllMeasureHotspots(),c="freehand"==Z.labelMode||"rectangle"==Z.labelMode||"polygon"==Z.labelMode||"measure"==Z.labelMode?Z.labelMode:null,e=[],e[0]={x:b.x,y:b.y},L="undefined"!==typeof V&&0<V.options.length?L=V.options[V.selectedIndex].value:1,d=(100*
k.getZoom()).toString(),k.createHotspotFromParameters(null,null,c,"polygon",null,b.x.toString(),b.y.toString(),d,null,null,null,null,null,null,null,Wc,null,lineStrokeColor,null,null,null,null,null,"8","0",null,L,null,null,"0",e),c=q[q.length-1],u=c.internalID,e=c,L=c.poiID,Z.measureVisible&&null===Z.editMode||(d=Z.Utils.arrayIndexOfObjectValue(Y,"value",u),-1!=d?(Y[d]={text:e.name,value:u,poiID:L},d=Z.Utils.arrayIndexOfObjectValue(za,"value",u),-1!=d&&(za[d]={text:e.name,value:u,poiID:L},Bc||Z.Utils.updateSelectElement(sa,
za))):(Y[Y.length]={text:e.name,value:u,poiID:L},za[za.length]={text:e.name,value:u,poiID:L}),!Bc&&sa&&(e=Y[Y.length-1],gc(e.poiID,e.value))),e=L=!0):(d=Z.Utils.arrayIndexOfObjectValue(q,"internalID",d),-1!=d&&(c=q[d],d=c.polygonPts?c.polygonPts:[],d[d.length]={x:b.x,y:b.y},c.polyClosed=!1,c.polygonPts=d,c.saved=!1));"rectangle"!=Z.labelMode&&"polygon"!=Z.labelMode&&"measure"!=Z.labelMode||"undefined"===typeof c||null===c||"freehand"==c.mediaType||(c=k.getZoom(),ae((b.x-Z.imageX)*c,(b.y-Z.imageY)*
c,e,1));"rectangle"!=Z.labelMode&&"freehand"!=Z.labelMode&&(Ia=!1);L?Va():a&&Ic()}function Mc(d,a){for(var b=null,c=(wf+1)/Z.imageZ,e=0,L=q.length;e<L;e++)if("polygon"==q[e].media&&q[e].internalID==u){var f=q[e].polygonPts;if("undefined"!==typeof f&&null!==f)for(var h=0,k=f.length;h<k;h++)Z.Utils.calculatePointsDistance(a.x,a.y,f[h].x,f[h].y)<c&&(b=h)}return b}function Ac(d,a){Z.Utils.clearDisplay(Aa);var b=Z.Utils.arrayIndexOfObjectValue(q,"internalID",d);q[b].polyClosed=a;Ia=!0;if(-1!=b){var b=
q[b],c=Z.Utils.polygonCenter(b.polygonPts,b.polyClosed);b.x=c.x;b.y=c.y;"freehand"!=Z.labelMode&&""==b.caption&&"undefined"===typeof b.captionHTML&&(c=Z.Utils.getResource("z45"),b.caption=c+d.toString());c=new Ab;Sc(b,c)}}function oc(d,a){var b=Z.Utils.arrayIndexOfObjectValue(q,"internalID",d);if(-1!=b){b=q[b];if("measure"==Z.labelMode&&"measure"==b.mediaType)rf(b,a);else if("freehand"!=Z.labelMode&&""==b.caption&&"undefined"===typeof b.captionHTML){var c=Z.Utils.getResource("z45");b.caption=c+d.toString()}var e=
b.polyClosed,c=b.polygonPts?b.polygonPts.slice(0):[],e=Z.Utils.polygonCenter(c,e,a),c=Z.Utils.polygonDimensions(c,a);b.x=e.x;b.y=e.y;b.iW=c.x;b.iH=c.y;c=new Ab;if("freehand"!=b.mediaType||Wa)if(I){var f=e=null;(e=document.getElementById("hot"+b.id))&&(f=Z.Utils.getChildElementByID(e,"captionTextBox"));e=f;f=Z.Utils.polygonDimensions(b.polygonPts);c=c.currentZ/("polygon"!=b.media?b.z/100:1);Vc(b,e,b.xScale/100*c*f.x,b.yScale/100*c*f.y)}else nf(b,c,a);else Va()}}function db(d,a){Z.editing=a;var b=null!==
a?"none":"inline-block",c=null!==a||"markup"==Z.editMode?"inline-block":"none";switch(d){case "poi":var e=document.getElementById("buttonPOIAdd"),f=document.getElementById("buttonPOIEdit"),h=document.getElementById("buttonPOIDelete"),k=document.getElementById("buttonPOICancel"),l=document.getElementById("buttonPOISave");break;case "labelPartial":e=document.getElementById("buttonLabelAdd");f=document.getElementById("buttonLabelEdit");h=document.getElementById("buttonLabelDelete");k=document.getElementById("buttonLabelCancel");
l=document.getElementById("buttonLabelSave");break;case "label":e=document.getElementById("buttonLabelAdd");f=document.getElementById("buttonLabelEdit");h=document.getElementById("buttonLabelDelete");k=document.getElementById("buttonLabelCancel");l=document.getElementById("buttonLabelSave");break;case "note":e=document.getElementById("buttonNoteAdd"),f=document.getElementById("buttonNoteEdit"),h=document.getElementById("buttonNoteDelete"),k=document.getElementById("buttonNoteCancel"),l=document.getElementById("buttonNoteSave")}e&&
(Z.Utils.setButtonDefaults(e),e.style.display=b);f&&(Z.Utils.setButtonDefaults(f),f.style.display=b);h&&(Z.Utils.setButtonDefaults(h),h.style.display=c);k&&(Z.Utils.setButtonDefaults(k),k.style.display=c);l&&(Z.Utils.setButtonDefaults(l),l.style.display=c);var b=document.getElementById("overlayPOIDisable"),c=document.getElementById("overlayLabelDisable"),e=document.getElementById("overlayLabelDetailDisable"),f=document.getElementById("overlayLabelDetailEditableDisable"),h=parseFloat(Z.Utils.getResource("z82")),
k=Z.Utils.getResource("z83NOALPHA"),l=document.getElementById("textBoxFor-overlayMessageBox"),g=document.getElementById("overlayLabelNameEditableDisable"),m=document.getElementById("overlayLabelCaptionPositionDisable"),r=document.getElementById("overlayNoteDisable"),p=document.getElementById("overlayNoteDetailDisable"),t=document.getElementById("textBoxFor-poiNameTextElement"),s=document.getElementById("textBoxFor-labelNameTextElement"),q=document.getElementById("textBoxFor-noteNameTextElement"),
ga=document.getElementById("noteTextElement");if(b&&c&&e&&f&&g&&m&&p&&t&&s&&q&&ga)if(null===a)Z.Utils.addEventListener(document,"keydown",Na),Z.Utils.addEventListener(document,"keyup",Na),b.style.display="none",c.style.display="none",e.style.display="inline-block",f.style.display="none",Z.Utils.setOpacity(f,h,k),l&&(l.style.display="none"),g.style.display="none",m.style.display="none",r.style.display="none",p.style.display="inline-block",t.style.visibility="hidden",s.style.visibility="hidden",q.style.visibility=
"hidden",ga.readOnly=!0;else{switch(d){case "poi":t.style.visibility="visible";c.style.display="inline-block";e.style.display="none";r.style.display="inline-block";p.style.display="none";break;case "labelPartial":e.style.display="none";f.style.display="inline-block";Z.Utils.setOpacity(f,h,k);l&&(l.style.display="inline-block");g.style.display="inline-block";m.style.display="text"==Z.labelMode?"inline-block":"none";s.style.visibility="visible";b.style.display="inline-block";r.style.display="inline-block";
p.style.display="none";break;case "label":e.style.display="none";f.style.display="none";Z.Utils.setOpacity(f,h,k);l&&(l.style.display="none");g.style.display="none";m.style.display="text"==Z.labelMode?"inline-block":"none";s.style.visibility="visible";b.style.display="inline-block";r.style.display="inline-block";p.style.display="none";break;case "note":b.style.display="inline-block",c.style.display="inline-block",e.style.display="none",p.style.display="none",q.style.visibility="visible",ga.readOnly=
!1}$d(d)}}function ab(d,a){switch(a){case "pois":"save"==d?Qf=Z.Utils.arrayClone("pois",fa,Qf):fa=Z.Utils.arrayClone("pois",Qf,fa);break;case "labels":var b=Z.Utils.arrayIndexOfObjectValue(q,"internalID",vd);if("save"==d)H&&H.polygonPts&&(xf=Z.Utils.arrayClone("polygon",H.polygonPts,xf)),Rf=Z.Utils.arrayClone("labels",Y,Rf),Sf=Z.Utils.arrayClone("hotspots",q,Sf),H=-1!=b?q[b]:null;else if(Y=Z.Utils.arrayClone("labels",Rf,Y),q=Z.Utils.arrayClone("hotspots",Sf,q),H=-1!=b?q[b]:null)0<xf.length?H.polygonPts=
Z.Utils.arrayClone("polygon",xf,H.polygonPts):"polygon"!=H.media&&Z.Utils.arrayClear(H.polygonPts);break;case "notes":"save"==d?Tf=Z.Utils.arrayClone("notes",ta,Tf):ta=Z.Utils.arrayClone("notes",Tf,ta)}}function Yc(d){var a=nc(),b=$a(a,"root"),c=$a(a,"setup");d=d.getElementsByTagName("SETUP")[0];var e;e=d.getAttribute("PANELPOSITION");Z.Utils.stringValidate(e)&&c.setAttribute("PANELPOSITION",e);e=d.getAttribute("INITIALVISIBILITY");Z.Utils.stringValidate(e)&&c.setAttribute("INITIALVISIBILITY",e);
e=d.getAttribute("POIVISIBILITY");Z.Utils.stringValidate(e)&&c.setAttribute("POIVISIBILITY",e);e=d.getAttribute("LABELVISIBILITY");Z.Utils.stringValidate(e)&&c.setAttribute("LABELVISIBILITY",e);e=d.getAttribute("NOTEVISIBILITY");Z.Utils.stringValidate(e)&&c.setAttribute("NOTEVISIBILITY",e);e=d.getAttribute("MINSCALE");Z.Utils.stringValidate(e)&&!isNaN(parseFloat(e))&&0<=parseFloat(e)&&c.setAttribute("MINSCALE",e);e=d.getAttribute("MAXSCALE");Z.Utils.stringValidate(e)&&!isNaN(parseFloat(e))&&0<=parseFloat(e)&&
c.setAttribute("MAXSCALE",e);b.appendChild(c);d=0;for(c=fa.length;d<c;d++){e=$a(a,"poi");var f=fa[d],h=Z.Utils.stringReadable(escape(f.text));Z.Utils.stringValidate(h)&&e.setAttribute("NAME",h);h=f.value;Z.Utils.stringValidate(h)&&e.setAttribute("INTERNALID",h);var h=f.id;Z.Utils.stringValidate(h)&&e.setAttribute("ID",h);h=f.x;Z.Utils.stringValidate(h)&&!isNaN(parseFloat(h))&&e.setAttribute("X","center"==h?Z.imageCenterX.toString():h);h=f.y;Z.Utils.stringValidate(h)&&!isNaN(parseFloat(h))&&e.setAttribute("Y",
"center"==h?Z.imageCenterY.toString():h);h=f.z;Z.Utils.stringValidate(h)&&!isNaN(parseFloat(h))&&e.setAttribute("ZOOM",h);h=f.user;Z.Utils.stringValidate(h)&&e.setAttribute("USER",h);h=f.date;Z.Utils.stringValidate(h)&&e.setAttribute("DATE",h);b.appendChild(e);labelListTempDP=Kc(Y,fa[d].value);if(0<labelListTempDP.length){f=a.createElement("LABELS");e.appendChild(f);for(var h=0,l=labelListTempDP.length;h<l;h++){var g=$a(a,"label"),m=Z.Utils.arrayIndexOfObjectValue(q,"internalID",labelListTempDP[h].value);
-1!=m&&(g=k.convertLabelToXML(q[m]));f.appendChild(g)}}noteListTempDP=Kc(ta,fa[d].value);if(0<noteListTempDP.length)for(f=a.createElement("NOTES"),e.appendChild(f),e=0,h=noteListTempDP.length;e<h;e++)l=$a(a,"note"),g=noteListTempDP[e],m=Z.Utils.stringReadable(escape(g.text)),Z.Utils.stringValidate(m)&&l.setAttribute("NAME",m),m=g.value,Z.Utils.stringValidate(m)&&l.setAttribute("INTERNALID",m),m=Z.Utils.stringReadable(escape(g.noteText)),Z.Utils.stringValidate(m)&&l.setAttribute("TEXT",m),m=g.poiID,
Z.Utils.stringValidate(m)&&l.setAttribute("POIID",m),m=g.id,Z.Utils.stringValidate(m)&&l.setAttribute("ID",m),m=g.user,Z.Utils.stringValidate(m)&&l.setAttribute("USER",m),m=g.date,Z.Utils.stringValidate(m)&&l.setAttribute("DATE",m),f.appendChild(l)}return a}function Qe(d){var a;this.id=d.getAttribute("ID");this.name=d.getAttribute("NAME");this.internalID=d.getAttribute("INTERNALID");isNaN(parseInt(this.internalID,10))&&(this.internalID=ib("slide"));this.media=d.getAttribute("MEDIA");this.audio=d.getAttribute("AUDIO");
Z.Utils.stringValidate(this.audio)&&(Z.audioContent=!0);this.initialX=d.getAttribute("INITIALX");this.initialY=d.getAttribute("INITIALY");this.initialZoom=d.getAttribute("INITIALZOOM");this.minZoom=d.getAttribute("MINZOOM");this.maxZoom=d.getAttribute("MAXZOOM");a=parseFloat(d.getAttribute("SHOWFOR"));this.showFor=isNaN(a)?0:a;this.transition=d.getAttribute("TRANSITION");a=parseFloat(d.getAttribute("CHANGEFOR"));this.changeFor=isNaN(a)?0:a}function Re(d){if(d=Z.Utils.event(d))if(Z.slideshowPlaying&&
k.slideshowStop(),d=Z.Utils.target(d),"null"!=d.options[d.selectedIndex].value){var a=Z.Utils.stringValidate(Z.slideListTitle)&&"none"!=Z.slideListTitle?1:0;k.goToSlide(d.selectedIndex-a)}}function de(d){if("undefined"!==typeof mb&&null!==mb&&0<mb.length){var a=Z.slideshowPlaying?Mb[Zc].showFor:0;Z.Utils.stringValidate(Mb[Zc].audio)&&(a+=500);var b=$c(Zc,d,Mb.length-1);null!==b?Z.Utils.functionCallWithDelay(function(){k.goToSlide(b)},a):k.slideshowStop()}}function $c(d,a,b){for(var c=Ig||Jg,e="Skip";"Skip"==
e;)"next"==a?(d+=1,d>b&&(d=c?0:null)):(d-=1,0>d&&(d=c?b:null)),e=q?null!==d?q[d].transition:null:Mb?null!==d?Mb[d].transition:null:null;return d}function Cd(d){Z.preventDupCall||(Z.priorX=Z.imageX,Z.priorY=Z.imageY,Z.priorZ=Z.imageZ,Z.priorR=Math.round(Z.imageR));Z.preventDupCall="undefined"!==typeof d&&null!==d}function Ld(d,a,b,c,e){k.zoomAndPanAllStop();if("undefined"===typeof d||null===d)d=Z.imageW/2;if("undefined"===typeof a||null===a)a=Z.imageH/2;"undefined"===typeof b||null===b?b=Z.fitZ:1<
b&&(b/=100);if("undefined"===typeof c||null===c)c=Z.imageR;b=ga(b);c=l(c);d=ma(d,a,b,c,"image");Z.imageX=d.x;Z.imageY=d.y;Z.imageZ=b;c!=Z.imageR&&Z.Utils.rotateElement(J,c);Z.imageR=c;k.updateView(!0);"function"===typeof e&&e()}function Dd(){if(pc&&(0!=Vb||0!=Wb||0!=Nb)){var d=Vb,a=Wb,b=Nb,c=!1,e=!1,f=k.getZoom();0!=b&&(f=la(ra,X*(1+b)),f=ga(f),f!=Z.imageZ&&(c=e=Ed(f)));if(0!=d||0!=a)e=parseFloat(J.left)+d,a=parseFloat(J.top)+a,f=ma(e,a,f,Z.imageR,"container"),J.left=Math.round(f.x)+"px",J.top=Math.round(f.y)+
"px",e=!0,a=f.x-sb,f=f.y-hb,ia&&Xa&&(Z.mobileDevice||Math.abs(a)>Ga/2||Math.abs(f)>Ba/2)&&B(ia,Zb,eb,"simple",!1,"Updating backfill oversize display");0==Kg%2&&(sd(),Va(),c&&(ob(),zb()),e&&pb());pc=window.setTimeout(Dd,Uf)}}function Se(d,a,b,c,e,f,h){Te++;var l=e/f,g=Te*l,m=Z.Utils.easing(Z.imageX,d,g,e),r=Z.Utils.easing(Z.imageY,a,g,e),p=Z.Utils.easing(Z.imageZ,b,g,e),g=Z.Utils.easing(Z.imageR,c,g,e),r=Da(m,r,p),m=r.x,r=r.y,t=!1,s=syncOversize=!1;if(parseFloat(J.left)!=m||parseFloat(J.top)!=r)J.left=
m+"px",J.top=r+"px",s=!0,ia&&Xa&&(syncOversize=!0);p!=Z.imageZ&&(Ed(p,!1),t=s=!0,ia&&Xa&&(oCtx.restore(),oCtx.save(),oCtx.scale(lb,lb),syncOversize=!0));g!=Z.imageR&&(Z.Utils.rotateElement(J,g),ia&&Xa&&(oCtx.rotate((g-Z.imageR)*Math.PI/180),syncOversize=!0),Z.imageR=g,s=!0);syncOversize&&B(ia,Zb,eb,"simple",!1,"Updating backfill oversize display");Va();0==Te%2&&(t&&(ob(),zb()),s&&pb());Te<f+1?pd=window.setTimeout(function(){Se(d,a,b,c,e,f,h)},l):(Z.interactivityOff=!1,pd&&(window.clearTimeout(pd),
pd=null),k.updateView(),k.toggleWatermarks(!0),"function"===typeof h&&h())}function ee(){Kg=Nb=Wb=Vb=0;pc&&(window.clearTimeout(pc),pc=null)}function Ed(d,a){var b=!1,c=h(ra,d);if(c!=X){X=c;var b=c/tc,e=Ha*b,f=Ca*b,l=(Ha-e)/2,g=(Ca-f)/2;c<tc&&(c=ma(parseFloat(J.left),parseFloat(J.top),d,Z.imageR,"container"),J.left=c.x+"px",J.top=c.y+"px");if(Z.useCanvas)if(ua.width=e+"px",ua.height=f+"px",ua.left=l+"px",ua.top=g+"px",Ya&&(wc.width=e+"px",wc.height=f+"px",wc.left=l+"px",wc.top=g+"px"),Aa&&(lc.width=
e+"px",lc.height=f+"px",lc.left=l+"px",lc.top=g+"px"),lb=h(Zb,k.getZoom()),c=8<lb,Xa||c){if("undefined"===typeof a||null===a||a&&ia&&("in"!=Z.zooming||e>Z.scaleThreshold||f>Z.scaleThreshold))oCtx.restore(),oCtx.save(),oCtx.scale(lb,lb),oCtx.rotate(Z.imageR*Math.PI/180),B(ia,Zb,eb,"simple",!1,"Updating backfill oversize display");sc=b=h(Pa,d);e=b/tierBackfillScalePrior;b=Cc*e;e*=Nc;f=Ob+(Cc-b)/2;c=hc+(Nc-e)/2;da.width=b+"px";da.height=e+"px";da.left=f+"px";da.top=c+"px"}else ia&&Z.Utils.clearDisplay(ia),
e=Cc*b,f=Nc*b,l=Ob+Z.imageX*(1-b)*Z.imageZ,g=hc+Z.imageY*(1-b)*Z.imageZ,da.width=e+"px",da.height=f+"px",da.left=l+"px",da.top=g+"px";else B(na,ra,cb,"centerOut",!1,"Scaling: non-canvas zoom"),Xa?(b=Lg,Cc=Ha*b,Nc=Ca*b,Ob=-(Ha/b),hc=-(Ca/b),Vf=wb*b,Wf=Jb*b,ba.width=Cc,ba.height=Nc,da.width=ba.width+"px",da.height=ba.height+"px"):(b=bc[Pa],ba.width=Rb[Pa],ba.height=b,b=Z.imageY*d,Ob=wb-Z.imageX*d,hc=Jb-b),da.left=Ob+"px",da.top=hc+"px",B(ba,Pa,eb,"simple",!1,"Scaling: non-canvas zoom - backfill");b=
!0}return b}function fe(){if(Fd&&0!=ic){var d=Z.Utils.arrayIndexOfObjectValue(q,"internalID",u);if(-1!=d){var d=q[d],a=d.yScale*(1+ic);k.modifyHotspot(u,"xScale",d.xScale*(1+ic),!0,!0);k.modifyHotspot(u,"yScale",a,!1,!0);Fd=window.setTimeout(fe,Mg)}}}function Ue(){k.toggleFullViewMode(!1)}function gd(d,a,b){"undefined"!==typeof yf&&null===yf&&"undefined"!==typeof zf&&null===zf?(Z.Utils.showMessage(Z.Utils.getResource("z11"),!1,null,"center"),yf=window.setTimeout(function(){ge(na,d,a,b);Z.Utils.hideMessage();
yf=null;Z.Utils.showMessage(Z.Utils.getResource("z10"),!1,null,"center");zf=window.setTimeout(function(){ge(ba,d,a,b);Z.Utils.hideMessage();zf=null},1)},1)):void 0!==typeof Ve&&(null!==Ve&&(window.clearTimeout(Ve),Ve=null),Ve=window.setTimeout(function(){gd(d,a)},200))}function ge(d,a,b,c){c=(c?"viewportDisplay"==d.id?Rd:Of:d.getContext("2d")).getImageData(0,0,d.width,d.height);a="undefined"!==typeof a&&null!==a?Z.Utils.filterImage(c,a,b):Sd(c,a,b);d.getContext("2d").putImageData(a,0,0)}function Sd(d){for(var a=
0,b=yb.length;a<b;a++){var c=yb[a].filter,e=yb[a].value;0!=e&&(d=Z.Utils.filterImage(d,c,e))}return d}function he(d){Z.imageFiltersVisible&&fd&&Pc&&Qc&&("frontfill"==d?(Z.Utils.clearDisplay(Pc),Pc.width=na.width,Pc.height=na.height,Xf.width=ua.width,Xf.height=ua.height,Rd.translate(wb,Jb),Rd.scale(X,X)):(Z.Utils.clearDisplay(Qc),Qc.width=ba.width,Qc.height=ba.height,Yf.width=da.width,Yf.height=da.height))}function Na(d){if(!Z.interactivityOff&&Z.keys&&(d=Z.Utils.event(d),18==d.keyCode||d.altKey||
k.zoomAndPanAllStop(!0,!0),d)){var a=d.type;d=d.keyCode;if("keydown"==a)switch(d){case 90:k.zoom("out");break;case 17:k.zoom("out");break;case 65:k.zoom("in");break;case 16:k.zoom("in");break;case 37:k.pan("left");break;case 38:k.pan("up");break;case 40:k.pan("down");break;case 39:k.pan("right");break;case 27:Z.fullView?k.toggleFullViewMode(!1):k.reset();break;case 190:Z.rotationVisible&&k.rotateClockwise();break;case 188:Z.rotationVisible&&k.rotateCounterwise()}else"keyup"==a&&(90==d||17==d||65==
d||16==d?k.zoom("stop"):37==d||39==d?k.pan("horizontalStop"):38!=d&&40!=d||k.pan("verticalStop"))}}function xa(d){d=Z.Utils.event(d);var a=d.type;if(d&&a&&!("mouseover"!=a&&"mouseout"!=a&&Z.interactivityOff||"mousedown"==a&&(Z.interactivityOff||Z.coordinatesVisible&&d.altKey)||Z.Utils.isRightMouseButton(d))){Z.mobileDevice&&!Z.clickZoomAndPanBlock&&"touchmove"!=a&&"gesturechange"!=a&&d.preventDefault();"mousedown"==a?window.setTimeout(function(){k.zoomAndPanAllStop(!1,!0)},1):"touchstart"!=a&&"gesturestart"!=
a||k.zoomAndPanAllStop(!1,!0);switch(a){case "mouseover":Z.fullView||"TEXTAREA"==document.activeElement.tagName||(Z.Utils.addEventListener(document,"keydown",Z.Utils.preventDefault),Z.Utils.addEventListener(document,"keyup",Z.Utils.preventDefault));break;case "mousedown":!Z.fullView&&document.activeElement&&document.activeElement.blur();Z.Utils.addEventListener(document,"keydown",Na);Z.Utils.addEventListener(document,"keyup",Na);Z.Utils.addEventListener(document,"mousemove",xa);Z.Utils.addEventListener(ja,
"mouseup",xa);Z.Utils.addEventListener(document,"mouseup",xa);break;case "mouseup":Z.Utils.removeEventListener(document,"mousemove",xa);Z.Utils.removeEventListener(ja,"mouseup",xa);Z.Utils.removeEventListener(document,"mouseup",xa);break;case "mouseout":Z.Utils.removeEventListener(document,"keydown",Z.Utils.preventDefault),Z.Utils.removeEventListener(document,"keyup",Z.Utils.preventDefault)}We(d);if("mousedown"==a||"mousemove"==a)return!1}}function We(d){d=Z.Utils.event(d);var a=d.type;if(d&&a){var b,
c,e,f;"touchstart"==a||"touchmove"==a||"touchend"==a||"touchcancel"==a?(b=Z.Utils.getFirstTouch(d),"undefined"!==typeof b&&(c=b.target,f=new Z.Utils.Point(b.pageX,b.pageY))):(c=Z.Utils.target(d),e=Z.Utils.relatedTarget(d),f=Z.Utils.getMousePosition(d),Z.smoothPan&&(Gd=f));"DOMMouseScroll"==a&&(a="mousewheel");var h=k.getZoom(),l=(100*h).toString(),g;"undefined"!==typeof f&&null!==f&&(g=k.getClickCoordsInImage(d,h,f));switch(a){case "mouseover":d=Z.Utils.nodeIsInViewer(c);g=Z.Utils.nodeIsInViewer(e);
d&&g||(Z.ToolbarDisplay&&Z.toolbarAutoShowHide&&Z.Toolbar.show(!0),Z.NavigatorDisplay&&1<Z.navigatorVisible&&Z.Navigator.setVisibility(!0),Z.RulerDisplay&&Z.rulerVisible&&Z.Ruler.setVisibility(!0),oa&&(oa.style.visibility="visible"),mb&&(mb.style.visibility="visible"),Z.Toolbar&&Z.annotations&&1<Z.annotationPanelVisible&&Z.Toolbar.setVisibilityAnnotationPanel(!0),Kb=null);break;case "mousedown":Wa=!0;Ta=new Z.Utils.Point(f.x,f.y);ja.mouseXPrior=f.x;ja.mouseYPrior=f.y;if(("rectangle"==Z.labelMode||
"polygon"==Z.labelMode||"measure"==Z.labelMode)&&null!==u||"rectangle"==Z.labelMode&&null===u)qa=Mc(d,g);if(d.altKey||"view"==Z.labelMode||"addLabel"!=Z.editing&&"editLabel"!=Z.editing)if(!d.altKey||"addLabel"!=Z.editing&&"editLabel"!=Z.editing)Z.smoothPan&&Xe();else{if(I=Bb(c)){g=F(d.clientX,d.clientY);f=new Z.Utils.Point(parseFloat(I.style.left),parseFloat(I.style.top));d=g.x-f.x;g=g.y-f.y;I.mouseXPrior=Ta.x;I.mouseYPrior=Ta.y;I.mouseXOffset=d;I.mouseYOffset=g;I.style.zIndex=q.length+1;d=I.id.substring(3,
I.id.length);if(u&&u!=d){if("function"===typeof Z.externalEditPermissionFunction&&!Z.externalEditPermissionFunction())break;Z.Utils.validateCallback("labelSelectedInViewportGetIDs");ab("save","labels");d=Z.Utils.arrayIndexOfObjectValue(q,"internalID",d);-1!=d&&(d=q[d],fc(d.poiID,d.internalID))}oa&&(Z.hotspotListTitle||Z.tourListTitle)&&(oa.selectedIndex=0)}}else{k.toggleLabelIconPicker(!1);Z.Utils.hideMessage();if("function"===typeof Z.externalEditPermissionFunction&&!Z.externalEditPermissionFunction()&&
("freehand"==Z.labelMode||"rectangle"==Z.labelMode||"polygon"==Z.labelMode||"measure"==Z.labelMode))break;"addLabel"==Z.editing&&("freehand"==Z.labelMode||"rectangle"==Z.labelMode&&null===qa)&&k.saveEditsLabel(!0);"freehand"==Z.labelMode&&Wa?("editLabel"==Z.editing&&H&&Z.Utils.arrayClear(H.polygonPts),d="editLabel"==Z.editing?u:null,rb(d,!1,g),ie=(g.x-Z.imageX)*h,je=(g.y-Z.imageY)*h,Ac(u,!1)):"rectangle"==Z.labelMode&&null===qa&&(f=1,d=null,"editLabel"==Z.editing&&(d=u,H&&null===qa&&Z.Utils.arrayClear(H.polygonPts)),
rb(d,!1,g),rb(u,!1,new Z.Utils.Point(g.x+f,g.y)),rb(u,!1,new Z.Utils.Point(g.x+f,g.y+f)),rb(u,!1,new Z.Utils.Point(g.x,g.y+f)),Ac(u,!0),qa=2)}break;case "mousemove":Ua=new Z.Utils.Point(f.x,f.y);l=(g.x-Z.imageX)*h;h*=g.y-Z.imageY;if(d.altKey||(null!==Z.editMode||"measure"!=Z.labelMode)&&("view"==Z.labelMode||"addLabel"!=Z.editing&&"editLabel"!=Z.editing))if(I){if("function"===typeof Z.externalEditPermissionFunction&&!Z.externalEditPermissionFunction())break;g=I.style;h=Ua.x-I.mouseXPrior;l=Ua.y-I.mouseYPrior;
h=parseFloat(g.left)+h;l=parseFloat(g.top)+l;g.left=h+"px";g.top=l+"px";I.mouseXPrior=Ua.x;I.mouseYPrior=Ua.y;Ea(d,I,Ua)}else!d.altKey&&Z.mousePan&&(ad?Gd=f:(g=f.x-ja.mouseXPrior,d=f.y-ja.mouseYPrior,isNaN(g)||isNaN(d)||(g=parseFloat(J.left)+g,d=parseFloat(J.top)+d,l=ma(g,d,Z.imageZ,Z.imageR,"container"),J.left=l.x+"px",J.top=l.y+"px",ja.mouseXPrior=f.x,ja.mouseYPrior=f.y,g=l.x-sb,d=l.y-hb,ia&&Xa&&(Z.mobileDevice||Math.abs(g)>Ga/2||Math.abs(d)>Ba/2)&&B(ia,Zb,eb,"simple",!1,"Updating backfill oversize display"),
Z.Navigator&&(d=k.calculateCurrentCenterCoordinates(l,Z.imageZ,Z.imageR),Z.Navigator.z658(d)))));else{if("function"===typeof Z.externalEditPermissionFunction&&!Z.externalEditPermissionFunction()&&("freehand"==Z.labelMode||"rectangle"==Z.labelMode||"polygon"==Z.labelMode||"measure"==Z.labelMode))break;d=Z.Utils.arrayIndexOfObjectValue(q,"internalID",u);d=-1!=d?q[d].polyClosed:!1;"freehand"==Z.labelMode&&Wa?(Pe(ie,je,l,h,g),ie=l,je=h):"rectangle"!=Z.labelMode&&"polygon"!=Z.labelMode&&"measure"!=Z.labelMode||
null===qa||!Wa?"polygon"!=Z.labelMode&&"measure"!=Z.labelMode||d||Wa&&(!Wa||null===qa)||be(l,h,g):ce(u,qa,g)}break;case "mouseup":Wa=!1;document.mousemove=null;document.mouseup=null;Kb?(f=Kb,g=k.getClickCoordsInImage(d,h,Kb)):f=new Z.Utils.Point(f.x,f.y);h=Z.Utils.calculatePointsDistance(Ta.x,Ta.y,f.x,f.y);if(4>h||!d.altKey&&("freehand"==Z.labelMode||"rectangle"==Z.labelMode))if(!I&&(null===Z.editMode&&"measure"==Z.labelMode||"view"!=Z.labelMode&&("addLabel"==Z.editing||"editLabel"==Z.editing))){if("function"===
typeof Z.externalEditPermissionFunction&&!Z.externalEditPermissionFunction())break;"addLabel"!=Z.editing||d.altKey||!Ia||"text"!=Z.labelMode&&"icon"!=Z.labelMode&&"polygon"!=Z.labelMode&&"measure"!=Z.labelMode||k.saveEditsLabel(!0);d.altKey&&Ia||"freehand"!=Z.labelMode&&"rectangle"!=Z.labelMode&&"polygon"!=Z.labelMode&&"measure"!=Z.labelMode?d.altKey?d.altKey&&("text"==Z.labelMode||"icon"==Z.labelMode)&&H&&(k.modifyHotspot(u,"x",g.x,!0,!0),k.modifyHotspot(u,"y",g.y,!1,!0)):(d="undefined"!==typeof V&&
0<V.options.length?d=V.options[V.selectedIndex].value:0,f=!1,"text"==Z.labelMode?"addLabel"==Z.editing?(k.createLabelFromParameters(null,null,"text",null,null,g.x.toString(),g.y.toString(),l,null,null,null,null,null,null,null,Wc,null,null,null,null,null,null,null,"5","0",null,d),f=!0):H&&(k.modifyHotspot(u,"x",g.x,!0,!0),k.modifyHotspot(u,"y",g.y,!1,!0)):"icon"==Z.labelMode&&(h=document.getElementById("labelIconList"))&&(h=h[h.selectedIndex].value,h="shim"==h?"":"External Graphics File"==h?h:Z.annotationFolder+
"/"+h,"addLabel"==Z.editing?(k.createLabelFromParameters(null,null,"icon",h,null,g.x.toString(),g.y.toString(),l,null,null,null,null,null,null,null,Wc,null,null,null,null,null,null,null,null,"0",null,d),f=!0):H&&(k.modifyHotspot(u,"x",g.x,!0,!0),k.modifyHotspot(u,"y",g.y,!1,!0))),f&&(d=Y[Y.length-1],gc(d.poiID,d.value))):(ud(d,g),Ia||Z.Utils.addEventListener(document,"mousemove",xa));db("label",Z.editing)}else if(null!==I&&(Z.measureVisible||Z.tour||Z.hotspots||Z.annotations))I=null;else{if((null===
Z.editing||"view"==Z.labelMode)&&!I)if(Z.clickZoom){g=d.altKey;f=kb&&Z.doubleClickZoom?!0:!1;var m=k.getClickZoomCoords3D(d,Ta,ra,X,g,f);Z.doubleClickZoom?kb?(clearTimeout(kb),kb=null,k.zoomAndPanToView(m.x,m.y,m.z)):kb=setTimeout(function(d){kb=null;k.zoomAndPanToView(m.x,m.y,m.z)},Z.doubleClickDelay):window.setTimeout(function(){k.zoomAndPanToView(m.x,m.y,m.z)},1)}else Z.clickPan&&k.zoomAndPanToView(m.x,m.y,Z.imageZ)}else{if("function"===typeof Z.externalEditPermissionFunction&&!Z.externalEditPermissionFunction())break;
"rectangle"!=Z.labelMode&&"polygon"!=Z.labelMode&&"measure"!=Z.labelMode||!od&&(null!==qa||Ia)?I&&(g=I.style,h=f.x-I.mouseXPrior,l=f.y-I.mouseYPrior,h=parseFloat(g.left)+h,l=parseFloat(g.top)+l,g.left=h+"px",g.top=l+"px",Ea(d,I,f),I.style.zIndex=I.zIndex,I=null):(qa=null,od=!1,d=Z.Utils.arrayIndexOfObjectValue(q,"internalID",u),-1!=d&&(d=q[d],g=Z.Utils.polygonCenter(d.polygonPts,d.polyClosed),d.x=g.x,d.y=g.y,Z.Utils.clearDisplay(Aa),g=new Ab,Sc(d,g),Ia||Z.Utils.addEventListener(document,"mousemove",
xa)));Ua=null;Z.mousePan&&!Z.smoothPan&&k.updateView()}Kb&&(Z.ToolbarDisplay&&Z.toolbarAutoShowHide&&Z.Toolbar.show(!1),Z.NavigatorDisplay&&1<Z.navigatorVisible&&Z.Navigator.setVisibility(!1),Z.Toolbar&&Z.annotations&&1<Z.annotationPanelVisible&&Z.Toolbar.setVisibilityAnnotationPanel(!1));break;case "mouseout":d=Z.Utils.nodeIsInViewer(c);g=Z.Utils.nodeIsInViewer(e);d&&g||"[object HTMLSelectElement]"==c||"[object HTMLOptionElement]"==c||"[object HTMLSelectElement]"==e||"[object HTMLOptionElement]"==
e||(Wa?Kb=new Z.Utils.Point(f.x,f.y):(Z.ToolbarDisplay&&Z.toolbarAutoShowHide&&Z.Toolbar.show(!1),Z.NavigatorDisplay&&1<Z.navigatorVisible&&Z.Navigator.setVisibility(!1),Z.RulerDisplay&&Z.rulerVisible&&Z.Ruler.setVisibility(!1),oa&&(oa.style.visibility="hidden"),mb&&(mb.style.visibility="hidden"),Z.Toolbar&&Z.annotations&&1<Z.annotationPanelVisible&&Z.Toolbar.setVisibilityAnnotationPanel(!1)));break;case "touchstart":if(b&&!bd){Wa=!0;Ye=!1;Ta=new Z.Utils.Point(f.x,f.y);ja.mouseXPrior=f.x;ja.mouseYPrior=
f.y;if(("rectangle"==Z.labelMode||"polygon"==Z.labelMode||"measure"==Z.labelMode)&&null!==u||"rectangle"==Z.labelMode&&null===u)qa=Mc(d,g);if(d.altKey||"view"==Z.labelMode||"addLabel"!=Z.editing&&"editLabel"!=Z.editing)if(!d.altKey||"addLabel"!=Z.editing&&"editLabel"!=Z.editing)Z.smoothPan&&Xe();else{if(I=Bb(c))g=F(d.clientX,d.clientY),f=new Z.Utils.Point(parseFloat(I.style.left),parseFloat(I.style.top)),d=g.x-f.x,g=g.y-f.y,I.mouseXPrior=Ta.x,I.mouseYPrior=Ta.y,I.mouseXOffset=d,I.mouseYOffset=g,I.style.zIndex=
q.length+1,d=I.id.substring(3,I.id.length),u&&u!=d&&(ab("save","labels"),d=Z.Utils.arrayIndexOfObjectValue(q,"internalID",d),-1!=d&&(d=q[d],fc(d.poiID,d.internalID))),oa&&(Z.hotspotListTitle||Z.tourListTitle)&&(oa.selectedIndex=0)}else k.toggleLabelIconPicker(!1),Z.Utils.hideMessage(),"addLabel"==Z.editing&&("freehand"==Z.labelMode||"rectangle"==Z.labelMode&&null===qa)&&k.saveEditsLabel(!0),"freehand"==Z.labelMode&&Wa?("editLabel"==Z.editing&&H&&Z.Utils.arrayClear(H.polygonPts),d="editLabel"==Z.editing?
u:null,rb(d,!1,g),ie=(g.x-Z.imageX)*h,je=(g.y-Z.imageY)*h,Ac(u,!1)):"rectangle"==Z.labelMode&&null===qa&&(f=1,d=null,"editLabel"==Z.editing&&(d=u,H&&null===qa&&Z.Utils.arrayClear(H.polygonPts)),rb(d,!1,g),rb(u,!1,new Z.Utils.Point(g.x+f,g.y)),rb(u,!1,new Z.Utils.Point(g.x+f,g.y+f)),rb(u,!1,new Z.Utils.Point(g.x,g.y+f)),Ac(u,!0),qa=2)}break;case "touchmove":!b||bd||Ye||((Ua=new Z.Utils.Point(f.x,f.y),l=(g.x-Z.imageX)*h,h*=g.y-Z.imageY,d.altKey||(null!==Z.editMode||"measure"!=Z.labelMode)&&("view"==
Z.labelMode||"addLabel"!=Z.editing&&"editLabel"!=Z.editing))?I?(g=I.style,h=Ua.x-I.mouseXPrior,l=Ua.y-I.mouseYPrior,h=parseFloat(g.left)+h,l=parseFloat(g.top)+l,g.left=h+"px",g.top=l+"px",I.mouseXPrior=Ua.x,I.mouseYPrior=Ua.y,Ea(d,I,Ua)):!d.altKey&&Z.mousePan&&(ad?Gd=f:(g=f.x-ja.mouseXPrior,d=f.y-ja.mouseYPrior,isNaN(g)||isNaN(d)||(g=parseFloat(J.left)+g,d=parseFloat(J.top)+d,l=ma(g,d,Z.imageZ,Z.imageR,"container"),J.left=l.x+"px",J.top=l.y+"px",ja.mouseXPrior=f.x,ja.mouseYPrior=f.y,Z.Navigator&&
(d=k.calculateCurrentCenterCoordinates(l,Z.imageZ,Z.imageR),Z.Navigator.z658(d))))):(d=Z.Utils.arrayIndexOfObjectValue(q,"internalID",u),d=-1!=d?q[d].polyClosed:!1,"freehand"==Z.labelMode&&Wa?(Pe(ie,je,l,h,g),ie=l,je=h):"rectangle"!=Z.labelMode&&"polygon"!=Z.labelMode&&"measure"!=Z.labelMode||null===qa||!Wa?"polygon"!=Z.labelMode&&"measure"!=Z.labelMode||d||Wa&&(!Wa||null===qa)||be(l,h,g):ce(u,qa,g)));break;case "touchend":bd||Ye||(Wa=!1,document.mousemove=null,document.mouseup=null,Kb?(f=Kb,g=k.getClickCoordsInImage(d,
h,Kb)):f="undefined"!==typeof f&&null!==f?new Z.Utils.Point(f.x,f.y):"undefined"!==typeof Ua&&null!==Ua?Ua:Ta,h=Z.Utils.calculatePointsDistance(Ta.x,Ta.y,f.x,f.y),4>h||!d.altKey&&("rectangle"==Z.labelMode||"freehand"==Z.labelMode)?I||(null!==Z.editMode||"measure"!=Z.labelMode)&&("view"==Z.labelMode||"addLabel"!=Z.editing&&"editLabel"!=Z.editing)?null!==I?I=null:null!==Z.editing&&"view"!=Z.labelMode||I||(Z.clickZoom?(g=d.altKey,f=kb&&Z.doubleClickZoom?!0:!1,m=k.getClickZoomCoords3D(d,Ta,ra,X,g,f),
Z.doubleClickZoom?kb?(clearTimeout(kb),kb=null,k.zoomAndPanToView(m.x,m.y,m.z)):kb=setTimeout(function(d){kb=null;k.zoomAndPanToView(m.x,m.y,m.z)},Z.doubleClickDelay):window.setTimeout(function(){k.zoomAndPanToView(m.x,m.y,m.z)},1)):Z.clickPan&&k.zoomAndPanToView(m.x,m.y,Z.imageZ)):(d.altKey&&Ia||"freehand"!=Z.labelMode&&"rectangle"!=Z.labelMode&&"polygon"!=Z.labelMode&&"measure"!=Z.labelMode?d.altKey?d.altKey&&("text"==Z.labelMode||"icon"==Z.labelMode)&&H&&(k.modifyHotspot(u,"x",g.x,!0,!0),k.modifyHotspot(u,
"y",g.y,!1,!0)):(d="undefined"!==typeof V&&0<V.options.length?d=V.options[V.selectedIndex].value:0,f=!1,"text"==Z.labelMode?"addLabel"==Z.editing?(k.createLabelFromParameters(null,null,"text",null,null,g.x.toString(),g.y.toString(),l,null,null,null,null,null,null,null,Wc,null,null,null,null,null,null,null,"5","0",null,d),f=!0):H&&(k.modifyHotspot(u,"x",g.x,!0,!0),k.modifyHotspot(u,"y",g.y,!1,!0)):"icon"==Z.labelMode&&(h=document.getElementById("labelIconList"))&&(h=h[h.selectedIndex].value,h="shim"==
h?"":"External Graphics File"==h?h:Z.annotationFolder+"/"+h,"addLabel"==Z.editing?(k.createLabelFromParameters(null,null,"icon",h,null,g.x.toString(),g.y.toString(),l,null,null,null,null,null,null,null,Wc,null,null,null,null,null,null,null,null,"0",null,d),f=!0):H&&(k.modifyHotspot(u,"x",g.x,!0,!0),k.modifyHotspot(u,"y",g.y,!1,!0))),f&&(d=Y[Y.length-1],gc(d.poiID,d.value))):(ud(d,g),Ia||Z.Utils.addEventListener(document,"mousemove",xa)),db("label",Z.editing)):("rectangle"!=Z.labelMode&&"polygon"!=
Z.labelMode&&"measure"!=Z.labelMode||!od&&(null!==qa||Ia)?I&&(g=I.style,h=f.x-I.mouseXPrior,l=f.y-I.mouseYPrior,h=parseFloat(g.left)+h,l=parseFloat(g.top)+l,g.left=h+"px",g.top=l+"px",Ea(d,I,f),I.style.zIndex=I.zIndex,I=null):(qa=null,od=!1,d=Z.Utils.arrayIndexOfObjectValue(q,"internalID",u),-1!=d&&(d=q[d],g=Z.Utils.polygonCenter(d.polygonPts,d.polyClosed),d.x=g.x,d.y=g.y,Z.Utils.clearDisplay(Aa),g=new Ab,Sc(d,g),Ia||Z.Utils.addEventListener(document,"mousemove",xa))),Ua=null,Z.mousePan&&k.updateView()),
Kb&&(Z.ToolbarDisplay&&Z.toolbarAutoShowHide&&Z.Toolbar.show(!1),Z.NavigatorDisplay&&1<Z.navigatorVisible&&Z.Navigator.setVisibility(!1),Z.Toolbar&&Z.annotations&&1<Z.annotationPanelVisible&&Z.Toolbar.setVisibilityAnnotationPanel(!1)));break;case "touchcancel":bd||Ye||(Wa=!1,document.mousemove=null,document.mouseup=null,Kb?(f=Kb,g=k.getClickCoordsInImage(d,h,Kb)):f=new Z.Utils.Point(f.x,f.y),h=Z.Utils.calculatePointsDistance(Ta.x,Ta.y,f.x,f.y),4>h||!d.altKey&&("rectangle"==Z.labelMode||"freehand"==
Z.labelMode)?I||(null!==Z.editMode||"measure"!=Z.labelMode)&&("view"==Z.labelMode||"addLabel"!=Z.editing&&"editLabel"!=Z.editing)?null!==I?I=null:null!==Z.editing&&"view"!=Z.labelMode||I||(Z.clickZoom?(g=d.altKey,f=kb&&Z.doubleClickZoom?!0:!1,m=k.getClickZoomCoords3D(d,Ta,ra,X,g,f),Z.doubleClickZoom?kb?(clearTimeout(kb),kb=null,k.zoomAndPanToView(m.x,m.y,m.z)):kb=setTimeout(function(d){kb=null;k.zoomAndPanToView(m.x,m.y,m.z)},Z.doubleClickDelay):window.setTimeout(function(){k.zoomAndPanToView(m.x,
m.y,m.z)},1)):Z.clickPan&&k.zoomAndPanToView(m.x,m.y,Z.imageZ)):(d.altKey&&Ia||"freehand"!=Z.labelMode&&"rectangle"!=Z.labelMode&&"polygon"!=Z.labelMode&&"measure"!=Z.labelMode?d.altKey?d.altKey&&("text"==Z.labelMode||"icon"==Z.labelMode)&&H&&(k.modifyHotspot(u,"x",g.x,!0,!0),k.modifyHotspot(u,"y",g.y,!1,!0)):(d="undefined"!==typeof V&&0<V.options.length?d=V.options[V.selectedIndex].value:0,f=!1,"text"==Z.labelMode?"addLabel"==Z.editing?(k.createLabelFromParameters(null,null,"text",null,null,g.x.toString(),
g.y.toString(),l,null,null,null,null,null,null,null,Wc,null,null,null,null,null,null,null,"5","0",null,d),f=!0):H&&(k.modifyHotspot(u,"x",g.x,!0,!0),k.modifyHotspot(u,"y",g.y,!1,!0)):"icon"==Z.labelMode&&(h=document.getElementById("labelIconList"))&&(h=h[h.selectedIndex].value,h="shim"==h?"":"External Graphics File"==h?h:Z.annotationFolder+"/"+h,"addLabel"==Z.editing?(k.createLabelFromParameters(null,null,"icon",h,null,g.x.toString(),g.y.toString(),l,null,null,null,null,null,null,null,Wc,null,null,
null,null,null,null,null,null,"0",null,d),f=!0):H&&(k.modifyHotspot(u,"x",g.x,!0,!0),k.modifyHotspot(u,"y",g.y,!1,!0))),f&&(d=Y[Y.length-1],gc(d.poiID,d.value))):(ud(d,g),Ia||Z.Utils.addEventListener(document,"mousemove",xa)),db("label",Z.editing)):("rectangle"!=Z.labelMode&&"polygon"!=Z.labelMode&&"measure"!=Z.labelMode||!od&&(null!==qa||Ia)?I&&(g=I.style,h=f.x-I.mouseXPrior,l=f.y-I.mouseYPrior,h=parseFloat(g.left)+h,l=parseFloat(g.top)+l,g.left=h+"px",g.top=l+"px",Ea(d,I,f),I.style.zIndex=I.zIndex,
I=null):(qa=null,od=!1,d=Z.Utils.arrayIndexOfObjectValue(q,"internalID",u),-1!=d&&(d=q[d],g=Z.Utils.polygonCenter(d.polygonPts,d.polyClosed),d.x=g.x,d.y=g.y,Z.Utils.clearDisplay(Aa),g=new Ab,Sc(d,g),Ia||Z.Utils.addEventListener(document,"mousemove",xa))),Ua=null,Z.mousePan&&!Z.smoothPan&&k.updateView()),Kb&&(Z.ToolbarDisplay&&Z.toolbarAutoShowHide&&Z.Toolbar.show(!1),Z.NavigatorDisplay&&1<Z.navigatorVisible&&Z.Navigator.setVisibility(!1),Z.Toolbar&&Z.annotations&&1<Z.annotationPanelVisible&&Z.Toolbar.setVisibilityAnnotationPanel(!1)));
break;case "gesturestart":Ze(d);bd||(bd=window.setInterval($e,rh));break;case "gesturechange":Zf=Math.round(100*d.scale)/100;break;case "gestureend":bd&&(window.clearInterval(bd),Ye=!0,bd=null);Z.mousePan&&k.updateView();break;case "mousewheel":f=g=!1,af||(af=window.setTimeout(bb,sh)),d=Math.max(-1,Math.min(1,d.wheelDelta||-d.detail)),l=la(ra,X*(1+(0<d?ke:-ke))),constrainedZ=ga(l),constrainedZ!=Z.imageZ&&(Z.zooming=0<d?"in":0>d?"out":"stop",g=f=Ed(constrainedZ)),sd(),Va(),g&&(ob(),zb()),f&&pb()}}}
function Xe(d){1<Z.smoothPanEasing&&(qd(d),$f=Ta,null===ad||d)&&(ad=window.setInterval(bf,50))}function qd(d){null!==ad&&d&&(window.clearInterval(ad),ad=null);cf=ag=bg=qc=null;smoothPanDeltaX=smoothPanDeltaY=Hd=Id=0}function bf(d){if(Wa||qc){null===cf&&(cf=new Z.Utils.Point(parseFloat(J.left),parseFloat(J.top)));var a=(qc?ag:Gd.x)-$f.x,b=(qc?bg:Gd.y)-$f.y,c=parseFloat(J.left)-cf.x,e=parseFloat(J.top)-cf.y;if(!(isNaN(a)||isNaN(b)||isNaN(c)||isNaN(e)||0==a&&0==b&&0==c&&0==e)){var f=qc?Z.smoothPanGlide:
1;d=qc?1:100;smoothPanDeltaX=Math.round((a-c)/(Z.smoothPanEasing*f)*d)/d;smoothPanDeltaY=Math.round((b-e)/(Z.smoothPanEasing*f)*d)/d;Wa?(Hd=smoothPanDeltaX,Id=smoothPanDeltaY):(Math.abs(smoothPanDeltaX)>Math.abs(Hd)&&(smoothPanDeltaX=Hd),Math.abs(smoothPanDeltaY)>Math.abs(Id)&&(smoothPanDeltaY=Id));b=parseFloat(J.left)+smoothPanDeltaX;c=parseFloat(J.top)+smoothPanDeltaY;a=ma(b,c,Z.imageZ,Z.imageR,"container");J.left=a.x+"px";J.top=a.y+"px";smoothPanDeltaX-=b-a.x;smoothPanDeltaY-=c-a.y;b=a.x-sb;c=
a.y-hb;ia&&Xa&&(qc||Z.mobileDevice||Math.abs(b)>Ga/2||Math.abs(c)>Ba/2)&&B(ia,Zb,eb,"simple",!1,"Updating backfill oversize display");qc&&0==Math.round(smoothPanDeltaX*d)/d&&0==Math.round(smoothPanDeltaY*d)/d&&(qc=!1);Z.Navigator&&(d=k.calculateCurrentCenterCoordinates(a,Z.imageZ,Z.imageR),Z.Navigator.z658(d))}}else Wa||null!==qc||0==smoothPanDeltaX||0==smoothPanDeltaY?(qd(!0),k.updateView()):(d=parseFloat(J.left)+Hd,a=parseFloat(J.top)+Id,a=ma(d,a,Z.imageZ,Z.imageR,"container"),Hd=a.x-parseFloat(J.left),
Id=a.y-parseFloat(J.top),ag=Gd.x+Hd,bg=Gd.y+Id,qc=!0)}function Ze(d){d=Z.Utils.event(d);d.preventDefault();Zf=Math.round(100*d.scale)/100}function $e(d){if(Z.mousePan){d=la(ra,tc*Zf);var a=ga(d);d!=Z.imageZ&&k.z633(a)}}function bb(d){af&&(window.clearTimeout(af),af=null,Z.zooming="stop",k.updateView())}function ed(d){!Z.interactivityOff&&Z.fullView&&(Z.ToolbarDisplay&&Z.toolbarAutoShowHide&&Z.Toolbar.show(!1),Z.NavigatorDisplay&&1<Z.navigatorVisible&&Z.Navigator.setVisibility(!1),Z.Toolbar&&Z.annotations&&
1<Z.annotationPanelVisible&&Z.Toolbar.setVisibilityAnnotationPanel(!1),k.toggleFullViewMode(!1),k.toggleFullViewMode(!0),Z.ToolbarDisplay&&Z.toolbarAutoShowHide&&Z.Toolbar.show(!0),Z.NavigatorDisplay&&1<Z.navigatorVisible&&Z.Navigator.setVisibility(!0),Z.Toolbar&&Z.annotations&&1<Z.annotationPanelVisible&&Z.Toolbar.setVisibilityAnnotationPanel(!0))}function jc(d){if(d=Z.Utils.event(d)){var a;a=Z.Utils.event(d);var b=k.getZoom(),c=k.getClickCoordsInImage(a,b);a=Math.round(c.x).toString();c=Math.round(c.y).toString();
b=(Math.round(1E3*b)/10).toString();coordsString='X="'+a+'"   Y="'+c+'"   ZOOM="'+b+'"';"mousemove"==d.type?Z.Utils.showCoordinates(coordsString):"mousedown"==d.type&&d.altKey&&Z.Utils.saveCoordinates(coordsString)}}var k=this,Od=!1,Ie=!1,cd=-1,pe=0,Ec=0,Sa=parseInt(Z.Utils.getResource("z90"),10),Pd=8*Sa,Qd=4*Sa,dd=0,Ja=parseInt(Z.Utils.getResource("z221"),10),Ka=parseInt(Z.Utils.getResource("z219"),10),Cb=parseFloat(Z.Utils.getResource("z218")),le=Cb/2,mc=parseInt(Z.Utils.getResource("z220"),10),
df=1==Z.toolbarVisible?Z.toolbarH:0,Jd,ia,$b,Db,ja,J,Kd,ba,da,Xb,me,na,ua,La,ne,vb,Yb,Td,cg,Pc,Xf,Rd,dg,Qc,Yf,Of,eg,Ma,Nd,fg,aa,vc,If,Kf,hf,se,gg,Ya,wc,kf,hg,Aa,lc,va,ie,je,ig,Qb,rc,qb;Z.Utils.getResource("DEFAULT_MASKCOLOR");parseFloat(Z.Utils.getResource("DEFAULT_MASKALPHA"));Z.useCanvas&&(Jd=Z.Utils.createContainerElement("canvas","oversizeDisplay","inline-block","absolute","visible","1px","1px","0px","0px","none","0px","transparent none","0px","0px","normal"),Z.ViewerDisplay.appendChild(Jd),ia=
Jd,$b=ia.style);Db=Z.Utils.createContainerElement("div","viewportContainer","inline-block","absolute","visible","1px","1px","0px","0px","none","0px","transparent none","0px","0px","normal");Z.ViewerDisplay.appendChild(Db);ja=Db;J=ja.style;Kd=Z.Utils.createContainerElement(Z.useCanvas?"canvas":"div","viewportBackfillDisplay","inline-block","absolute","visible","1px","1px","0px","0px","none","0px","transparent none","0px","0px","normal");Db.appendChild(Kd);ba=Kd;da=ba.style;me=Z.Utils.createContainerElement(Z.useCanvas?
"canvas":"div","viewportDisplay","inline-block","absolute","visible","1px","1px","0px","0px","none","0px","transparent none","0px","0px","normal");Db.appendChild(me);na=me;ua=na.style;Z.useCanvas&&(ne=Z.Utils.createContainerElement("canvas","transitionCanvas","none","absolute","visible","1px","1px","0px","0px","none","0px","transparent none","0px","0px","normal"),Db.appendChild(ne),vb=ne,Yb=vb.style,Z.imageFiltersVisible&&(dg=Z.Utils.createContainerElement("canvas","imageFilterBackfillCanvas","none",
"absolute","visible","1px","1px","0px","0px","none","0px","transparent none","0px","0px","normal"),Db.appendChild(dg),Qc=dg,Yf=Qc.style,cg=Z.Utils.createContainerElement("canvas","imageFilterCanvas","none","absolute","visible","1px","1px","0px","0px","none","0px","transparent none","0px","0px","normal"),Db.appendChild(cg),Pc=cg,Xf=Pc.style));Z.Utils.stringValidate(Z.watermarkPath)&&(eg=Z.Utils.createContainerElement("div","watermarkDisplay","inline-block","absolute","visible","1px","1px","0px","0px",
"none","0px","transparent none","0px","0px","normal"),Db.appendChild(eg),Ma=eg,Nd=Ma.style);if(Z.measureVisible||Z.tour||Z.hotspots||Z.annotations){if((Z.annotations||Z.measureVisible)&&Z.useCanvas){gg=Z.Utils.createContainerElement("canvas","drawingDisplay","inline-block","absolute","visible","1px","1px","0px","0px","none","0px","transparent none","0px","0px","normal");Db.appendChild(gg);Ya=gg;wc=Ya.style;if(null!==Z.editMode||Z.measureVisible)hg=Z.Utils.createContainerElement("canvas","editingDisplay",
"inline-block","absolute","visible","1px","1px","0px","0px","none","0px","transparent none","0px","0px","normal"),Db.appendChild(hg),Aa=hg,lc=Aa.style;Z.enableSelectionHighlighting&&(ig=Z.Utils.createContainerElement("canvas","maskCanvas","inline-block","absolute","visible","1px","1px","0px","0px","none","0px","transparent none","0px","0px","normal"),Db.appendChild(ig),Qb=ig,rc=Qb.style,rc.display="none")}fg=Z.Utils.createContainerElement("div","hotspotDisplay","inline-block","absolute","visible",
"1px","1px","0px","0px","none","0px","transparent none","0px","0px","normal");Db.appendChild(fg);aa=fg;vc=aa.style}Z.useCanvas?(ia&&(oCtx=ia.getContext("2d")),Xb=ba.getContext("2d"),La=na.getContext("2d"),Td=vb.getContext("2d"),Ya&&(kf=Ya.getContext("2d")),Aa&&(va=Aa.getContext("2d")),Qb&&(qb=Qb.getContext("2d")),Z.imageFiltersVisible&&(Rd=Pc.getContext("2d"),Of=Qc.getContext("2d"))):(ba.innerHTML="",na.innerHTML="");Ma&&(Ma.innerHTML="");aa&&(aa.innerHTML="");var tb=1,ra=0,Pa=0,Xa=!1,Zb=0,Mf=!1,
X,tc,sc,lb,Rb=[],bc=[],nb=[],cc=[],Sb=[],Rc=[];tierTileOffsetsCount=[];tierTileOffsetChunks=[];tierTileOffsetLast=[];var uc=[];tierTileByteCountsCount=[];tierTileByteCountChunks=[];tierTileByteCountLast=[];var Gb=[],Qa=[],Pb=[],cb=[],Hb=[],Md=[],kc=[],Ng,jg,ue,jd,Af,Fc,hd,mf,eb=[],fb=[],Ib=[],ff=[],pa=[],Fa=[],Oc=[],gb=[],Gf=0,qe=0,ah=new Z.NetConnector,Ef=parseInt(Z.Utils.getResource("z81"),10),th=parseInt(Z.Utils.getResource("z78"),10),xg=parseInt(Z.Utils.getResource("z80"),10),Lf=parseInt(Z.Utils.getResource("z77"),
10),Zb=Lf,vg=parseInt(Z.Utils.getResource("z79"),10),wg=parseInt(Z.Utils.getResource("z76"),10),ug=parseInt(Z.Utils.getResource("z75"),10),tg=parseFloat(Z.Utils.getResource("z173"),10),Lg=parseFloat(Z.Utils.getResource("z74"),10),Ga,Ba,Hf,re,Ha,Ca,wb,Jb,sb,hb,Cc,Nc,Vf,Wf,Ob,hc;Ga=Z.viewerW;Ba=Z.viewerH;Hf=re=0;Ba-=df;0==Z.toolbarPosition&&(re+=df);var Wa=!1,Kb=null,kb=null,Ta,Ua,bd=null,Zf=null,Ye=!1,rh=parseInt(Z.Utils.getResource("z122"),10),Bf=Math.round(parseFloat(Z.Utils.getResource("z176"))*
Z.panSpeed),Vb=0,Wb=0,Hd=0,Id=0,qc=null,ag=null,bg=null,ad=null,$f=null,cf=null,Gd=null,ke=parseFloat(Z.Utils.getResource("z242"))*Z.zoomSpeed;Z.mobileDevice&&(ke/=2);var Nb=0,pc=null,Kg=0,Uf=parseInt(Z.Utils.getResource("z238"),10),af,sh=parseInt(Z.Utils.getResource("z165"),10),Nf=parseFloat(Z.Utils.getResource("z112"))*Z.fadeInSpeed,lf=null,uh=parseFloat(Z.Utils.getResource("z239")),kg=parseFloat(Z.Utils.getResource("z240"));Z.mobileDevice&&(kg/=2);var pd=null,Te=0;if(!Z.fullScreenVisible&&!Z.fullPageVisible)var Og,
Pg,Qg,Rg,lg,Sg,oe,mg;if(Z.virtualPointerVisible)var Tg=Z.Utils.getResource("z232"),R,Dc;Z.crosshairsVisible&&Z.Utils.drawCrosshairs(Z.ViewerDisplay,Ga,Ba);if(Z.measureVisible||null!==Z.editMode){var mh=Z.Utils.getResource("z431"),lh=Z.Utils.getResource("z431TOTAL"),ih=Z.Utils.getResource("z433"),kh=Z.Utils.getResource("z430"),jh=Z.Utils.getResource("z434");parseInt(Z.Utils.getResource("z154"),10);parseInt(Z.Utils.getResource("z156"),10)}if(Z.imageFiltersVisible)var yf=null,zf=null,Ve=null,fd=!1,yb=
[];if(Z.Utils.stringValidate(Z.watermarkPath))var kd,yg,rg=[],sg=[];if(Z.tour)var yc,Je,Ug,Ig;null!==Z.imagePath&&-1!=Z.imagePath.indexOf("zSlidePath")&&(Z.slidePath=Z.imagePath.substring(11,Z.imagePath.length),Z.slideshow=!0);if(Z.slideshow){var Mb=[],Cf=[],Zc,mb,Vg,Ff,Jg,Wg=parseFloat(Z.Utils.getResource("z211"))*Z.slideTransitionSpeed;Z.slideTransitionTimeout=null;Z.slideOpacity=0}if(Z.measureVisible||Z.tour||Z.hotspots||Z.annotations){var Bc=!1,Ee=!1,q=[],ub=[],xe=[],ye=[],H=null,u=null,I=null,
Zd=null,vd=null,ef=null,Le=null,Hg=!1,Ia=!0,qa=null,od=!1,fh=new Z.NetConnector,Gg=Z.Utils.getResource("z177"),nh=parseFloat(Z.Utils.getResource("z179")),Hc=parseInt(Z.Utils.getResource("z180"),10),oh=Z.Utils.getResource("z96"),Pf=Z.Utils.getResource("z98"),ph=Z.Utils.getResource("z113"),qh=Z.Utils.getResource("z216"),wf=parseInt(Z.Utils.getResource("z97"),10),Fg=Z.Utils.getResource("z177FREEHAND"),Wc=Z.Utils.getResource("z89"),gh=parseInt(Z.Utils.getResource("z129"),10),Bg=parseInt(Z.Utils.getResource("z160"),
10),Cg=parseInt(Z.Utils.getResource("z151"),10),hh=parseInt(Z.Utils.getResource("z130"),10),Dg=parseInt(Z.Utils.getResource("z161"),10),Eg=parseInt(Z.Utils.getResource("z152"),10);Z.mobileDevice&&(wf*=2);if(Z.tour||Z.hotspots)var oa,ng,Jf,og,Be,Ce,Xg,ac=[];else if(Z.measureVisible||Z.annotations){var Eb,jf,V,ya,sa,wd,xb,xd,Yg,Zg,$g,fa=[],ta=[],Fb=[],Y=[],za=[],Ge=[];labelCaptionPositionListDP=[];labelTargetListDP=[];var Sf=[],Qf=[],Rf=[],xf=[],Tf=[],ic=0,Fd=null,Df=parseFloat(Z.Utils.getResource("z147")),
Mg=parseInt(Z.Utils.getResource("z148"),10);Z.mobileDevice&&(Df/=2)}}f(Ga,Ba,Hf,re);if(null!==Z.imagePath&&"null"!=Z.imagePath){if(1==Z.localUse&&"ZoomifyImageFile"==Z.tileSource){Z.Utils.showMessage(Z.Utils.getResource("z290"),!0);return}if(1==Z.localUse&&"ZoomifyPFFFile"==Z.tileSource){Z.Utils.showMessage(Z.Utils.getResource("z289"),!0);return}1==Z.localUse&&(Z.browser==Z.browsers.CHROME||Z.browser==Z.browsers.OPERA||Z.browser==Z.browsers.IE&&11==Z.browserVersion||Z.browser==Z.browsers.SAFARI&&
7<=Z.browserVersion)&&Z.Utils.showMessage(Z.Utils.getResource("z288"),!0);if(null!==Z.imageW&&null!==Z.imageH&&null!==Z.sourceMagnification)"undefined"!==typeof k.getInitialized()?b(Z.imageW,Z.imageH,Ja,Ka,null,null,null,null,Z.sourceMagnification,Z.focal,Z.quality):window.setTimeout(function(){b(Z.imageW,Z.imageH,Ja,Ka,null,null,null,null,Z.sourceMagnification,Z.focal,Z.quality)},100);else if(null!==Z.imageProperties){var vh=Z.Utils.xmlConvertTextToDoc(Z.imageProperties);m(vh)}else if(-1==Z.imagePath.indexOf("zSlidePath")){var pg=
new Z.NetConnector;g(pg)}}null!==Z.slidePath&&(pg=new Z.NetConnector,a(pg));this.setSizeAndPosition=function(d,a,b,c){f(d,a,b,c)};this.loadImageProperties=function(d){g(d)};this.parseZIFHeader=function(d){e();if(73==d[0]&&73==d[1]&&43==d[2]&&0==d[3]&&8==d[4]&&0==d[5]&&0==d[6]&&0==d[7]&&16==d[8]&&0==d[9]&&0==d[10]&&0==d[11]&&0==d[12]&&0==d[13]&&0==d[14]&&0==d[15]){for(var a=Z.Utils.longValue(d,8),f=Z.Utils.longValue(d,a),n=1,h=null,g=null,l=null,m=null,r=null,p=null,p=2;0!=a;){for(h=0;h<f;h++)switch(g=
a+8+20*h,Z.Utils.shortValue(d,g)){case 256:Rb[n-1]=Z.Utils.intValue(d,g+12);break;case 257:bc[n-1]=Z.Utils.intValue(d,g+12);break;case 322:l=Z.Utils.intValue(d,g+12);break;case 323:m=Z.Utils.intValue(d,g+12);break;case 324:var t=tierTileOffsetsCount[n-1]=Z.Utils.longValue(d,g+4);Rc[n-1]=Z.Utils.longValue(d,g+12);r+=t;break;case 325:t=tierTileByteCountsCount[n-1]=Z.Utils.longValue(d,g+4),uc[n-1]=1==t?Z.Utils.intValue(d,g+12):2==t?Z.Utils.intValue(d,g+12)+","+Z.Utils.intValue(d,g+16):Z.Utils.longValue(d,
g+12)}a=Z.Utils.longValue(d,a+20*f+8);f=Z.Utils.longValue(d,a);n++}h=Rb[0];g=bc[0];tb=n-1;Rb.reverse();bc.reverse();tierTileOffsetsCount.reverse();Rc.reverse();tierTileByteCountsCount.reverse();uc.reverse();!isNaN(h)&&0<h&&!isNaN(g)&&0<g&&!isNaN(l)&&0<l&&!isNaN(m)&&0<m&&0<r?k.getInitialized()?c(h,g,l,m,r,p,null,null,null,null,null):b(h,g,l,m,r,p,null,null,null,null,null):"ZoomifyImageFolder"==Z.tileSource?Z.Utils.showMessage(Z.Utils.getResource("z252")):Z.Utils.showMessage(Z.Utils.getResource("z250"))}};
this.parseZIFOffsetChunk=function(d,a){var b=Z.Utils.arrayIndexOfObjectValue(tierTileOffsetChunks,"chunkID",a);-1!=b&&(tierTileOffsetChunks[b].chunk=d,w(a,"offset"))};this.parseZIFByteCountChunk=function(d,a){var b=Z.Utils.arrayIndexOfObjectValue(tierTileByteCountChunks,"chunkID",a);-1!=b&&(tierTileByteCountChunks[b].chunk=d,w(a,"byteCount"))};this.parseZIFTileImage=function(d,a,b){d="data:image/jpeg;base64,"+Z.Utils.encodeBase64(d);a=Z.Utils.createCallback(null,"image-display"==b?ha:W,a);Z.Utils.createImageElementFromBytes(d,
a)};this.parseZIFNavigatorImage=function(d,a,b){d="data:image/jpeg;base64,"+Z.Utils.encodeBase64(d);a=Z.Utils.createCallback(null,Z.Navigator.z556,a);Z.Utils.createImageElementFromBytes(d,a)};this.z602=function(d){m(d)};this.validateXYZDefaults=function(d){d&&Z.Utils.resetParametersXYZ(Z.parameters);var a=parseFloat(Z.Utils.getResource("z143")),b=parseFloat(Z.Utils.getResource("z144")),c=parseFloat(Z.Utils.getResource("z145")),e=parseFloat(Z.Utils.getResource("DEFAULT_INITIALR")),f=parseFloat(Z.Utils.getResource("z163"));
d=parseFloat(Z.Utils.getResource("z153"));a=isNaN(a)?null:a;b=isNaN(b)?null:b;c=isNaN(c)?null:c;e=isNaN(e)?null:e;f=isNaN(f)?null:f;d=isNaN(d)?null:d;Z.parameters?(Z.parameters.zInitialX||(Z.initialX=a),Z.parameters.zInitialY||(Z.initialY=b),Z.parameters.zInitialZoom||(Z.initialZ=c),Z.parameters.zInitialRotation||(Z.initialR=e),Z.parameters.zMinZ||(Z.minZ=f),Z.parameters.zMaxZ||(Z.maxZ=d)):(Z.initialX=a,Z.initialY=b,Z.initialZ=c,Z.initialR=e,Z.minZ=f,Z.maxZ=d);null===Z.initialX&&(Z.initialX=Z.imageW/
2);null===Z.initialY&&(Z.initialY=Z.imageH/2);Z.fitZ=Tb(0);d=k.getInitialized()?k.getRotation():Z.initialR;Z.fitR=Tb(d);if(null===Z.initialZ||-1==Z.initialZ)Z.initialZ=Z.fitR;if(null===Z.minZ||-1==Z.minZ)Z.minZ=Z.fitZ;if(null===Z.maxZ||-1==Z.maxZ)Z.maxZ=Z.fitZ;Z.initialZ<Z.minZ&&(Z.initialZ=Z.minZ);Z.initialZ>Z.maxZ&&(Z.initialZ=Z.maxZ)};this.getInitialized=function(){return Od};this.getParsingXML=function(){return Bc};this.getW=function(){return Ha};this.getH=function(){return Ca};this.getTierCount=
function(){return tb};this.getTileW=function(){return Ja};this.getTileH=function(){return Ka};this.getTierCurrent=function(){return ra};this.getTierBackfill=function(){return Pa};this.getTierBackfillDynamic=function(){return Xa};this.getTierBackfillOversize=function(){return Zb};this.getTierScale=function(){return X};this.getX=function(){var d=parseFloat(J.left)-sb,a=k.getZoom();return Z.imageX-d/a};this.getY=function(){var d=parseFloat(J.top)-hb,a=k.getZoom();return Z.imageY-d/a};this.getZoom=function(){return la(ra,
X)};this.getRotation=function(){return Z.imageR};this.getTiersScaleUpMax=function(){return Cb};this.getTiersScaleDownMax=function(){return le};this.getTilesCacheMax=function(){return mc};this.getTierWs=function(){return Rb.join(",")};this.getTierHs=function(){return bc.join(", ")};this.getTierTileCounts=function(){return Sb.join(", ")};this.getTilesLoadingNames=function(){return""==Qa.join(", ")?"Current view loading complete":Qa.join(", ")};this.getSmoothPan=function(){return Z.smoothPan};this.setSmoothPan=
function(d){Z.smoothPan=d};this.getSmoothPanEasing=function(){return Z.smoothPanEasing};this.setSmoothPanEasing=function(d){Z.smoothPanEasing=d};this.getSmoothPanGlide=function(){return Z.smoothPanGlide};this.setSmoothPanGlide=function(d){Z.smoothPanGlide=d};this.setCoordinatesDisplayVisibility=function(d){d?(Z.Utils.addEventListener(document,"mousemove",jc),Z.Utils.addEventListener(document,"mousedown",jc)):(Z.coordinatesVisible=!1,Z.Utils.removeEventListener(document,"mousemove",jc),Z.Utils.removeEventListener(document,
"mousedown",jc))};this.setTourPath=function(d,a){k.setHotspotPath(d,a)};this.setHotspotPath=function(d,a){"undefined"===typeof d||Z.Utils.stringValidate(d)?(Z.hotspotPath=Z.Utils.stringRemoveTrailingSlashCharacters(d),Z.hotspotFolder=Z.hotspotPath,".xml"==Z.hotspotPath.toLowerCase().substring(Z.hotspotPath.length-4,Z.hotspotPath.length)&&(Z.hotspotFolder=Z.hotspotFolder.substring(0,Z.hotspotFolder.lastIndexOf("/"))),a||(k.deleteAllHotspots(),y())):(Z.hotspotPath=null,Z.hotspotFolder=null,k.deleteAllHotspots())};
this.setAnnotationPath=function(d,a){"undefined"===typeof d||Z.Utils.stringValidate(d)?(Z.annotationPath=Z.Utils.stringRemoveTrailingSlashCharacters(d),Z.annotationFolder=Z.annotationPath,".json"!=Z.annotationPath.toLowerCase().substring(Z.annotationPath.length-5,Z.annotationPath.length)&&".xml"!=Z.annotationPath.toLowerCase().substring(Z.annotationPath.length-4,Z.annotationPath.length)&&(Z.annotationPath=Z.annotationPath+"/"+Z.Utils.getResource("z69")),".xml"==Z.annotationPath.toLowerCase().substring(Z.annotationPath.length-
4,Z.annotationPath.length)&&(Z.annotationFolder=Z.annotationFolder.substring(0,Z.annotationFolder.lastIndexOf("/"))),Z.annotations=!0,a||(k.deleteAllAnnotations(),y())):(Z.annotationPath=null,Z.annotationFolder=null,k.deleteAllAnnotations(),Z.annotations=!1)};this.getAnnotationsXML=function(){return Eb=Yc(Eb)};this.testSetAnnotationPath=function(){k.setAnnotationPath("Assets/Annotations/annotations2.xml")};this.updateView=function(d){if("undefined"!==typeof d&&!0===d||X!=tc||k.getZoom()!=Z.imageZ||
parseFloat(J.left)!=sb||parseFloat(J.top)!=hb){var a=!1,b=!1;if(parseFloat(J.left)!=sb||parseFloat(J.top)!=hb)a=!0;if(X!=tc||Z.imageZ!=Z.priorZ)b=!0;Cd();var c=!1;if(d||parseFloat(ua.width)!=na.width)Z.useCanvas&&(ua.width=na.width+"px",ua.height=na.height+"px",ua.left="0px",ua.top="0px",La.restore(),La.save(),La.scale(X,X),Ya&&(wc.width=Ya.width+"px",wc.height=Ya.height+"px",wc.left="0px",wc.top="0px"),Aa&&(lc.width=Aa.width+"px",lc.height=Aa.height+"px",lc.left="0px",lc.top="0px"),ba&&(Xa?(da.width=
ba.width+"px",da.height=ba.height+"px",da.left=Ob+"px",da.top=hc+"px",Xb.restore(),Xb.save(),Xb.scale(sc,sc)):(da.width=Cc+"px",da.height=Nc+"px",da.left=Ob+"px",da.top=hc+"px"))),c=!0;if(d||parseFloat(J.left)!=sb||parseFloat(J.top)!=hb){var c=parseFloat(J.left)-sb,e=parseFloat(J.top)-hb;0!=Z.imageR&&(e=Z.Utils.rotatePoint(c,e,Z.imageR),c=e.x,e=e.y);J.left=sb+"px";J.top=hb+"px";Xa||(Ob=parseFloat(da.left)+c,hc=parseFloat(da.top)+e,da.left=Ob+"px",da.top=hc+"px");var f=k.getZoom();Z.imageX-=c/f;Z.imageY-=
e/f;c=!0}c&&(B(na,ra,cb,"centerOut",!1,"1a. Updating view: resetting display positions"),Xa&&B(ba,Pa,eb,"simple",!1,"1b. Updating view: resetting backfill positions"));c=!1;if("undefined"!==typeof d&&d||X!=tc||k.getZoom()!=Z.imageZ||!Od){X!=tc&&(Z.imageZ=k.getZoom());Z.imageZ<Z.minZ&&(Z.imageZ=Z.minZ);f=Cb;for(e=tb;f/2>=Z.imageZ;)e--,f/=2;e=0>e-1?0:e-1;f=h(e,Z.imageZ);if(e!=ra||f!=X)Z.useCanvas&&(La.restore(),La.save(),La.scale(f,f)),ra!=e&&(Mf=!0),ra=e,X=f;tc=X;Xa=!1;ra>Ef?(Pa=ra-th,Xa=!0):Pa=ra>
xg?Lf:ra>vg?wg:ug;tierBackfillScalePrior=sc=h(Pa,Z.imageZ);var e=Rb[Pa],f=bc[Pa],g=Z.imageX*Z.imageZ,l=Z.imageY*Z.imageZ;Xa?(e=Lg,Cc=Ha*e,Nc=Ca*e,Ob=-(Ha/e),hc=-(Ca/e),Vf=wb*e,Wf=Jb*e,ba.width=Cc,ba.height=Nc,da.width=ba.width+"px",da.height=ba.height+"px",da.left=Ob+"px",da.top=hc+"px",Z.useCanvas&&(ia&&(lb=h(Zb,Z.imageZ),oCtx.restore(),oCtx.save(),oCtx.scale(lb,lb),0!=Z.imageR&&oCtx.rotate(Z.imageR*Math.PI/180)),Xb.restore(),Xb.translate(Vf,Wf),Xb.save(),Xb.scale(sc,sc))):(Cc=e*sc,Nc=f*sc,Ob=wb-
g,hc=Jb-l,ba.width=e,ba.height=f,Z.useCanvas&&(da.width=Cc+"px",da.height=Nc+"px"),da.left=Ob+"px",da.top=hc+"px");he("backfill");B(ba,Pa,eb,"simple",!1,"2. Updating view: changing tier - backfill");!d&&0<mc&&(c=!0)}else k.validateView("updateView-noChange");Xa?t(!0):ia&&Z.Utils.clearDisplay(ia);t();he("frontfill");B(na,ra,null,"centerOut",c,"3. Updating view: prior to loading of any new tiles");0<Qa.length?S(Qa,ha,"centerOut","image-display"):Z.imageFiltersVisible&&fd&&gd(null,null,!0);sd();Va();
ob();zb(!0);pb();a&&Z.Utils.validateCallback("viewPanned");b&&Z.Utils.validateCallback("viewZoomed");(a||b)&&Z.Utils.validateCallback("viewChanged")}};syncTransitionCanvas=function(){vb.width=na.width;vb.height=na.height;Yb.width=ua.width;Yb.height=ua.height;Yb.left=ua.left;Yb.top=ua.top;Td.restore();Td.save();Td.translate(wb,Jb);Td.scale(X,X)};this.formatTilePath=function(d,a,b,c){var e;if("ZoomifyImageFile"==Z.tileSource){var f="offsetLoading",h=e="loading",g;if(1==tierTileOffsetsCount[d])e=Rc[d];
else{var l=new N(d,a,b),m=l.chunkID+","+d+","+a+","+b+","+c+",offset";g=Z.Utils.arrayIndexOfObjectValue(tierTileOffsetChunks,"chunkID",l.chunkID);-1==g?(k.validateView("z532",l.chunkID+","+d+","+a+","+b+","+c),-1==Z.Utils.arrayIndexOf(Fa,m)&&(Fa[Fa.length]=m),tierTileOffsetChunks[tierTileOffsetChunks.length]={chunkID:l.chunkID,chunk:"loading"},g=new Z.NetConnector,g.loadByteRange(Z.imagePath,l.chunkStart,l.chunkEnd,"offset",null,l.chunkID)):"loading"==tierTileOffsetChunks[g].chunk?-1==Z.Utils.arrayIndexOf(Fa,
m)&&(Fa[Fa.length]=m):"loading"!=tierTileOffsetChunks[g].chunk&&(g=tierTileOffsetChunks[g].chunk,e=Z.Utils.longValue(g,l.offsetStartInChunk))}1==tierTileByteCountsCount[d]?h=uc[d]:(g=a+b*nb[d],2==tierTileByteCountsCount[d]?(d=uc[d],h=0==g?d.substring(0,d.indexOf(",")):d.substring(d.indexOf(",")+1,d.length)):(l=new D(d,a,b),d=l.chunkID+","+d+","+a+","+b+","+c+",byteCount",g=Z.Utils.arrayIndexOfObjectValue(tierTileByteCountChunks,"chunkID",l.chunkID),-1==g?(-1==Z.Utils.arrayIndexOf(Fa,d)&&(Fa[Fa.length]=
d),tierTileByteCountChunks[tierTileByteCountChunks.length]={chunkID:l.chunkID,chunk:"loading"},g=new Z.NetConnector,g.loadByteRange(Z.imagePath,l.chunkStart,l.chunkEnd,"byteCount",null,l.chunkID)):"loading"==tierTileByteCountChunks[g].chunk?-1==Z.Utils.arrayIndexOf(Fa,d)&&(Fa[Fa.length]=d):"loading"!=tierTileByteCountChunks[g].chunk&&(g=tierTileByteCountChunks[g].chunk,h=Z.Utils.intValue(g,l.bcStartInChunk))));"loading"==e||isNaN(e)||"loading"==h||isNaN(h)||(f=Z.imagePath+"?"+e.toString()+","+h.toString());
e=f}else if("ZoomifyImageFolder"==Z.tileSource){c=b*nb[d]+a;for(f=0;f<d;f++)c+=Sb[f];d=Z.imagePath+"/TileGroup"+Math.floor(c/256)+"/"+d+"-"+a+"-"+b+"."+Z.tileType;e=d=Z.Utils.cacheProofPath(d)}else if("ZoomifyPFFFile"==Z.tileSource){h="offsetLoading";l=f=0;for(e=tb-1;e>d;e--)f+=Sb[e];f+=b*nb[d]+a;e=Math.floor(f/Sa);l=-1==f-1?0:f-1;g=Math.floor(l/Sa);void 0==Ib[e]||"offsetLoading"==Ib[e]||void 0==Ib[g]||"offsetLoading"==Ib[g]?(f=e+","+d+","+a+","+b+","+c,-1==Z.Utils.arrayIndexOf(Fa,f)&&(Fa[Fa.length]=
f),k.validateView("z531",e+","+d+","+a+","+b+","+c),void 0==Ib[e]&&(Ib[e]="offsetLoading",d=Ec+Sa*e*8,a=d+8*Sa,M(d,a,e)),void 0==Ib[g]&&(Ib[g]="offsetLoading",d=Ec+Sa*g*8,a=d+8*Sa,M(d,a,e))):(c=Math.floor(Ib[e][0]),h=Math.floor(Ib[g][0]),g=Ib[g][1],e=Ib[e][1],l=l%Sa*9,g=Math.floor(parseFloat(g.substring(l,l+9))),l=f%Sa*9,e=Math.floor(parseFloat(e.substring(l,l+9))),f=0==f?Ec+8*dd:h+g,c+=e,h=0<c-f?Z.tileHandlerPathFull+"?file="+Z.imagePath+"&requestType=0&begin="+f.toString()+"&end="+c.toString()+
"&vers="+cd.toString()+"&head="+pe.toString():"z647:"+d+"-"+a+"-"+b);e=h}else"ImageServer"==Z.tileSource&&(d=-1!=Z.imagePath.toLowerCase().indexOf(".svs")?"svs":-1!=Z.imagePath.toLowerCase().indexOf(".ndpi")?"ndpi":null,a=100*Z.imageZ,40==Z.sourceMagnification?f=a<=2.5+Cb?32:a<=5+Cb?16:a<=10+Cb?8:a<=25+Cb?4:a<=50+Cb?2:1:20==Z.sourceMagnification&&(f=a<=5+Cb?16:a<=10+Cb?8:a<=20+Cb?4:a<=50+Cb?2:1),tilePath=Z.tileHandlerPathFull+"?FIF="+Z.imagePath+"&focal="+Z.focal+"&QLT="+Z.quality+"&DSTL="+Z.imageX*
Z.imageZ+","+Z.imageY*Z.imageZ+","+Ja+","+Ka+","+f+",1&type="+d,Z.Utils.trace(tilePath),e=tilePath="Assets/Skins/Default/standard/toolbarLogo.png");return e};this.parseOffsetChunk=function(d){var a=parseInt(d.documentElement.getAttribute("BEGIN"),10),b=d.documentElement.getAttribute("REPLYDATA");d=ff[a];a=Math.floor((a-Ec)/8/Sa);Ib[a]=[];Ib[a]=b.split(",",2);a=0;for(b=Fa.length;a<b;a++){var c=Fa[a].split(",");c[0]==d&&(void 0!==c[4]&&"image-display"==c[4]?pa[pa.length]=c[1]+"-"+c[2]+"-"+c[3]:"image-backfill"==
c[4]&&(gb[gb.length]=c[1]+"-"+c[2]+"-"+c[3]),Fa=Z.Utils.arraySplice(Fa,a,1),a--,b--)}0<pa.length&&(pa.sort(),pa=Z.Utils.arrayUnique(pa),k.validateView("z636",pa),r(pa,ha,"simple","image-display"));0<gb.length&&(gb.sort(),gb=Z.Utils.arrayUnique(gb),r(gb,W,"simple","image-backfill"))};this.getClickCoordsAtZoom=function(a,b){var c=this.getClickCoordsInImage(a,b);return new Z.Utils.Point(c.x*b,c.y*b)};this.getClickCoordsInImage=function(a,b,c){a=Z.Utils.event(a);var e=null;if(a){var f=a.type;if("undefined"===
typeof c||null===c)"touchstart"==f||"touchend"==f||"touchcancel"==f?(touch=Z.Utils.getFirstTouch(a),"undefined"!==typeof touch&&(target=touch.target,c=new Z.Utils.Point(touch.pageX,touch.pageY))):(target=Z.Utils.target(a),relatedTarget=Z.Utils.relatedTarget(a),c=Z.Utils.getMousePosition(a));"undefined"!==typeof c&&null!==c&&(a=E(c.x,c.y),e=G(a.x,a.y,b))}return e};this.getClickZoomCoords3D=function(a,b,c,e,f,h){var g=parseFloat(Z.Utils.getResource("z93TIERSKIPTHRESHOLD"));b=E(b.x,b.y);b=G(b.x,b.y,
Z.imageZ);var l=la(c,e);h?a.altKey||f?l=Z.fitZ:(e>1+g?l=la(c,1):0<c&&(l=la(c-1,1)),l-Z.fitZ<g&&(l=Z.fitZ)):a.altKey||f?l=1:e<1-g?l=la(c,1):c<tb-1&&(l=la(c+1,1));return new Z.Utils.Point3D(b.x,b.y,l)};this.calculateCurrentCenterCoordinates=function(a,b,c){if("undefined"===typeof a||null===a)a=new Z.Utils.Point(parseFloat(J.left),parseFloat(J.top));if("undefined"===typeof c||null===c)c=Z.imageR;0>c&&(c+=360);if("undefined"===typeof b||null===b)b=k.getZoom();var e=(a.x-sb)/b;a=(a.y-hb)/b;var f,h;switch(c){case 0:f=
Z.imageX-e;h=Z.imageY-a;break;case 90:f=Z.imageX-a;h=Z.imageY+e;break;case 180:f=Z.imageX+e;h=Z.imageY+a;break;case 270:f=Z.imageX+a,h=Z.imageY-e}return new Z.Utils.Point(f,h)};this.syncViewportToNavigator=function(a){var b=Z.imageR;0>b&&(b+=360);var c=ma(a.x,a.y,Z.imageZ,b,"image");a=Z.imageY;var e=c.y,c=dX=Z.imageX-c.x;a=dY=a-e;0!=b&&(90==b?(c=-dY,a=dX):180==b?(c=-dX,a=-dY):270==b&&(c=dY,a=-dX));b=c*Z.imageZ;a*=Z.imageZ;e=a+hb;J.left=b+sb+"px";J.top=e+"px";ia&&Xa&&(Z.mobileDevice||Math.abs(b)>Ga/
2||Math.abs(a)>Ba/2)&&B(ia,Zb,eb,"simple",!1,"Updating backfill oversize display")};this.updateProgress=function(a,b){var c=Z,e;0==a||0==b?(Z.Utils.validateCallback("viewUpdateComplete"),Z.Utils.validateCallback("viewUpdateCompleteGetLabelIDs"),e=void 0):(e=Math.round(100-b/a*100),e=Math.round(e/10));c.updateViewPercent=e;Z.ToolbarDisplay&&Z.Toolbar.getInitialized()&&Z.Toolbar.updateProgress(a,b)};this.validateView=function(a,b,c,e){c="undefined"!==typeof c&&null!==c?c:null;b=null!==b?b:"";switch(a){case "tilesToDisplay":Ng=
c;Af=jd=ue=jg=0;Fc=c;hd=0;tilesTimeStart=(new Date).getTime();mf=0;window.clearTimeout(Z.validateViewTimer);Z.validateViewTimer=null;Z.validateViewTimer=window.setTimeout(te,1E3);break;case "tilesInCache":jg=c;break;case "z581-image-display":ue+=1;break;case "onTileLoad":jd+=1;hd=((new Date).getTime()-c)/1E3;mf=jd/hd;break;case "z507":c=Gb.indexOf(b),-1!==c&&(Gb.splice(c,1),Af+=1,Fc-=1)}2!=Z.debug&&3!=Z.debug||Z.Utils.traceTileStatus(Ng,jg,ue,jd,Af,Fc);if(2==Z.debug){var f="undefined"!==typeof e&&
null!==e&&0<e.length?e.join(", "):"none";c=!0;var h="";switch(a){case "updateView-noChange":h="Updating view: no change of tier.";break;case "tilesToDisplay":h="Tiles to display: "+f;break;case "tilesInCache":h="Tiles in cache: "+f;break;case "tilesToLoad":h="Tiles to load: "+f;break;case "tilesToLoad-backfill":h="Tiles to load-backfill: "+f;break;case "z622-viewportDisplay":a=[];f=0;for(h=e.length;f<h;f++)a[a.length]=e[f].name;h="Tiles from cache-"+b+": "+a.join(", ");break;case "z622-backfillDisplay":a=
[];f=0;for(h=e.length;f<h;f++)a[a.length]=e[f].name;h="Tiles from cache-"+b+": "+a.join(", ");break;case "z577-image-display":h="Tile requests for display: "+b+f;break;case "z577-image-backfill":h="Tile requests for backfill: "+b+f;break;case "imageRequestTimeout":h="Image request for "+b;break;case "z581-image-display":h="Tile request-display: "+b;c=!1;break;case "z581-image-backfill":h="Tile request-backfill: "+b;c=!1;break;case "z581DelayForOffset":h="Tile not yet being loaded - offset chunk loading in progress: "+
b;break;case "onTileLoad":h="Tiles received-display: "+b;c=!1;break;case "z599":h="Tiles received-backfill: "+b;0==fb.length&&(h+="\n\nTile loading complete for backfill: all requested tiles received.");c=!1;break;case "z532":h="Tile request recorded for after load offset chunk: "+b;break;case "z637":h="Requesting tiles after offset chunk received: "+f;break;case "z531":h="Tile request recorded for after load offset chunk: "+b;c=!1;break;case "z636":h="Requesting tiles after offset chunk received: "+
f;c=!1;break;case "z577Retry":h=b;break;case "z507":h="Tile displaying: "+b;c=!1;break;case "blankLine":h=" "}""!=h&&Z.Utils.trace(h,!1,c)}};this.showVirtualPointer=function(){if(Dc){var a=Dc.width,b=Dc.height,c=Z.viewerW/2+100,e=Z.viewerH-200,f=Dc.cloneNode(!1);f.width=a;f.height=b;R=Z.Utils.createContainerElement("div","piC","inline-block","absolute","hidden",a+"px",b+"px",c+"px",e+"px","none","0px","transparent none","0px","0px","normal");R.appendChild(f);Z.ViewerDisplay.appendChild(R);R.setAttribute("title",
Z.Utils.getResource("z398"));a=parseInt(Z.Utils.getResource("z230"),10);R.style.zIndex=(a+13).toString();Z.mobileDevice?(Z.Utils.addEventListener(R,"touchstart",ve),Z.Utils.addEventListener(R,"touchmove",bh),Z.Utils.addEventListener(R,"touchend",ch),Z.Utils.addEventListener(R,"touchcancel",dh)):Z.Utils.addEventListener(R,"mousedown",Ad);Z.Utils.addEventListener(f,"contextmenu",Z.Utils.preventDefault);Z.Utils.addEventListener(f,"mousedown",Z.Utils.preventDefault)}else Dc=new Image,Dc.url=Tg,Dc.onload=
k.showVirtualPointer,Dc.onerror=rd,Dc.src=Tg};this.hideVirtualPointer=function(){R&&(R.style.display="none")};this.parseHotspotsXML=function(a){Z.Utils.arrayClear(ac);Z.Utils.arrayClear(ub);Ee=!1;Bc=!0;var b=a.getElementsByTagName("SETUP")[0];"undefined"!==typeof b&&Z.Utils.stringValidate(b)||(b=a.getElementsByTagName("HOTSPOTSETUP")[0],"undefined"!==typeof b&&Z.Utils.stringValidate(b)||(b=Z.Utils.xmlConvertTextToDoc("<HOTSPOTSETUP />").getElementsByTagName("HOTSPOTSETUP")[0]));var c=b.getAttribute("AUTOSTART");
Ug=Z.Utils.stringValidate(c)?"0"!=c&&"false"!=c:Z.Utils.getResource("z226");c=b.getAttribute("AUTOLOOP");Ig=Z.Utils.stringValidate(c)?"0"!=c&&"false"!=c:Z.Utils.getResource("z225");c=b.getAttribute("CHOICELIST");Jf=Z.Utils.stringValidate(c)?c:Z.Utils.getResource("z131");c=b.getAttribute("LISTSOURCE");ng=Z.Utils.stringValidate(c)?c:Z.Utils.getResource("z132");b.getAttribute("LISTTITLE");var c="",c=Z.tourPath?Z.Utils.stringValidate(Z.tourListTitle)?Z.tourListTitle:Z.Utils.getResource("z444"):Z.Utils.stringValidate(Z.hotspotListTitle)?
Z.hotspotListTitle:Z.Utils.getResource("z424"),e=b.getAttribute("INITIALVISIBILITY");og=Z.Utils.stringValidate(e)?"1"==e||"true"==e:Z.Utils.getResource("z134");vc.visibility=og?"visible":"hidden";e=parseFloat(b.getAttribute("MINSCALE"));b=parseFloat(b.getAttribute("MAXSCALE"));Be=isNaN(e)||0>e?0:e;Ce=isNaN(b)||0>b?0:b;sf(Jf,c,ac);a=a.getElementsByTagName("HOTSPOT");b=0;for(c=a.length;b<c;b++)e=a[b],e=Jc(e),k.createHotspotFromXML(e,!0);2==Z.debug&&Ee&&Z.Utils.trace(Z.Utils.getResource("z246"));Bc=
!1;Va();Z.tourPath?(k.initializeAudioMuteButtons(),Z.Utils.validateCallback("tourLoaded"),Ug&&Z.Utils.functionCallWithDelay(function(){k.tourStart()},750)):Z.Utils.validateCallback("hotspotsLoaded")};this.createHotspotFromParameters=function(a,b,c,e,f,h,g,l,m,r,p,t,s,q,ga,ma,u,B,ob,pb,y,D,F,x,C,K,E,w,G,zb,S,H,I,J,T){c=Z.Utils.arrayToArrayOfStrings([a,b,c,e,f,h,g,l,m,r,p,t,s,q,ga,ma,u,B,ob,pb,y,D,F,x,C,K,E,w,G,zb,S,H,I,J,T]);a=Z.Utils.xmlConvertTextToDoc('<HOTSPOT ID="'+c[0]+'" NAME="'+c[1]+'" MEDIATYPE="'+
c[2]+'" MEDIA="'+c[3]+'" AUDIO="'+c[4]+'" X="'+c[5]+'" Y="'+c[6]+'" ZOOM="'+c[7]+'" XSCALE="'+c[8]+'" YSCALE="'+c[9]+'" CLICKURL="'+c[10]+'" URLTARGET="'+c[11]+'" ROLLOVER="'+c[12]+'" CAPTION="'+c[13]+'" TOOLTIP="'+c[14]+'" TEXTCOLOR="'+c[15]+'" BACKCOLOR="'+c[16]+'" LINECOLOR="'+c[17]+'" FILLCOLOR="'+c[18]+'" TEXTVISIBLE="'+c[19]+'" BACKVISIBLE="'+c[20]+'" LINEVISIBLE="'+c[21]+'" FILLVISIBLE="'+c[22]+'" CAPTIONPOSITION="'+c[23]+'" SAVED="'+c[24]+'" INTERNALID="'+c[25]+'" POIID="'+c[26]+'" SHOWFOR="'+
c[31]+'" TRANSITION="'+c[32]+'" CHANGEFOR="'+c[33]+'" ROTATION="'+c[34]+'"></HOTSPOT>').getElementsByTagName("HOTSPOT")[0];null===a.getAttribute("INTERNALID")&&a.setAttribute("INTERNALID",ib("hotspot"));b=Z.Utils.xmlConvertTextToDoc("<TEMP></TEMP>");Z.Utils.stringValidate(c[27])&&(w=Z.Utils.xmlConvertTextToDoc(w).getElementsByTagName("CAPTION")[0].innerHTML,e=b.createElement("CAPTION"),e.innerHTML=w,a.appendChild(e));Z.Utils.stringValidate(c[28])&&(w=Z.Utils.xmlConvertTextToDoc(G).getElementsByTagName("TOOLTIP")[0].innerHTML,
G=b.createElement("TOOLTIP"),G.innerHTML=w,a.appendChild(G));if(Z.Utils.stringValidate(c[30])){G=b.createElement("POLYGON");G.setAttribute("CLOSED",c[29]);w=0;for(c=S.length;w<c;w++)e=b.createElement("POINT"),e.setAttribute("X",S[w].x),e.setAttribute("Y",S[w].y),G.appendChild(e);a.appendChild(G)}k.createHotspotFromXML(a,!0)};this.createHotspotFromXML=function(a,b){b&&(a=td(a,"hotspot"));var c=new we(a);if(Z.Utils.stringValidate(c.media)||Z.Utils.stringValidate(c.caption)||null!==Z.tourPath||Z.annotations){q[q.length]=
c;var e="NAME"==ng?c.name:"CAPTION"==ng?c.caption:c.tooltip;if(oa){var f=c.internalID;if(null!=oa){var h=Z.Utils.arrayIndexOfObjectValue(ac,"value",f);-1!=h?(oa.options[h+("none"!=Z.hotspotListTitle&&"none"!=Z.tourListTitle?1:0)]=new Option(e,f.toString()),ac[h]={text:e,value:f}):(oa.options[oa.options.length]=new Option(e,f.toString()),ac[ac.length]={text:e,value:f})}}}e=new Ab;Z.Utils.stringValidate(c.media)&&"text"!=c.mediaType&&"polygon"!=c.media?zg(c,!0):Sc(c,e);Z.Utils.validateCallback("labelCreated");
Z.Utils.validateCallback("labelCreatedGetInternalID")};this.modifyHotspot=function(a,b,c,e,f){var h=-1,h=f?Z.Utils.arrayIndexOfObjectValue(q,"internalID",a):Z.Utils.arrayIndexOfObjectValue(q,"id",a.toString());-1!=h&&(a=q[h],"polygon"!=a.media||"x"!=b&&"y"!=b||(f=new Z.Utils.Point("x"==b?c:a.x,"y"==b?c:a.y),jb(a,f)),a[b]=c,"rollover"==b&&0==c&&(a.visibility=!0),"media"==b&&"icon"==a.mediaType&&zg(a,!1),"undefined"!==typeof e&&null!==e&&e||Va())};this.deleteHotspot=function(a,b,c){var e=-1;c?e=Z.Utils.arrayIndexOfObjectValue(q,
"internalID",a):(e=Z.Utils.arrayIndexOfObjectValue(q,"id",a.toString()),-1!=e&&(a=q[e].internalID));-1!=e&&(q=Z.Utils.arraySplice(q,e,1),Tc(a),!b&&Z.hotspots&&null!=oa&&(a=Z.Utils.arrayIndexOfObjectValue(ac,"value",a),-1!=a&&(ac=Z.Utils.arraySplice(ac,a,1),Z.Utils.updateSelectElement(oa,ac),b=oa.length,0!=b&&(oa.selectedIndex=a>b-1?b-1:a))))};this.deleteAllHotspots=function(){q=[];aa&&(aa.innerHTML="");oa.options.length=0};this.deleteAllMeasureHotspots=function(){var a=q.length;if(0<a&&aa&&0<aa.childNodes.length){for(var b=
0;b<a;b++)"measure"==q[b].mediaType&&(q=Z.Utils.arraySplice(q,0,1));Va()}};this.setLabelMaskByDisplayList=function(a,b){k.setHotspotMaskByDisplayList(a,b)};this.setHotspotMaskByDisplayList=function(a,b){if(Qb&&"undefined"!==typeof a&&null!==a&&0<a.length){syncMaskCanvas();Z.Utils.clearDisplay(Qb);qb.restore();qb.save();qb.scale(1,1);var c=La.getImageData(0,0,na.width,na.height),c=Z.Utils.filterImage(c,"grayscale","");qb.putImageData(c,0,0);qb.restore();qb.save();qb.scale(X,X);for(var c=0,e=q.length;c<
e;c++){var f=q[c];if("polygon"==f.media){var h=b?f.internalID:f.id,h=Z.Utils.arrayIndexOf(a,h);-1==h&&xc(f,g,null,!1,!0)}}qb.globalCompositeOperation="xor";c=0;for(e=q.length;c<e;c++)if(f=q[c],h=b?f.internalID:f.id,h=Z.Utils.arrayIndexOf(a,h),-1!=h){var g=new Ab;"polygon"==f.media?xc(f,g,null,!1,!0):qb.arc((f.x-Z.imageX)*Z.imageZ,(f.y-Z.imageY)*Z.imageZ,50,0,2*Math.PI)}qb.fill();rc.display="inline-block"}};syncMaskCanvas=function(){Qb.width=na.width;Qb.height=na.height;rc.width=ua.width;rc.height=
ua.height;rc.left=ua.left;rc.top=ua.top;qb.restore();qb.save();qb.translate(wb,Jb);qb.scale(X,X);qb.save()};this.clearLabelMask=function(){k.clearHotspotMask()};this.clearHotspotMask=function(){Qb&&(Z.Utils.clearDisplay(Qb),rc.display="none")};this.setLabelFilterByDisplayList=function(a,b){k.setHotspotFilterByDisplayList(a,b)};this.setHotspotFilterByDisplayList=function(a,b){aa&&Z.Utils.clearDisplay(aa);Ya&&Z.Utils.clearDisplay(Ya);Aa&&Z.Utils.clearDisplay(Aa);"undefined"!==typeof a&&null!==a&&0<
a.length&&(b?ye=a:xe=a);"inline-block"==vc.display&&Ag()};this.clearLabelFilterByDisplayList=function(){k.clearHotspotFilterByDisplayList()};this.clearHotspotFilterByDisplayList=function(){"undefined"!==typeof xe&&Z.Utils.arrayClear(xe);"undefined"!==typeof ye&&Z.Utils.arrayClear(ye);"inline-block"==vc.display&&Va()};this.z538=function(a){return Bb(a)};this.getLabelIDsInCurrentView=function(a){for(var b=[],c=new Ab,e=0,f=q.length;e<f;e++){var h=q[e];h.x>c.box.l&&h.x<c.box.r&&h.y>c.box.t&&h.y<c.box.b&&
(b[b.length]=a?h.internalID:h.id)}return b};this.getHotspotsVisibility=function(){return"inline-block"==vc.display};this.setHotspotsVisibility=function(a){vc.display=a?"inline-block":"none";Va()};this.setHotspotVisibility=function(a,b){var c=a.firstChild;if(c&&c.style){c.style.visibility="visible";var e=b?"visible":"hidden";c.style.backgroundColor=b?"":"#FFFFFF";Z.Utils.setOpacity(c,b?1:.01);(c=a.firstChild.childNodes[1])&&c.style&&(c.style.visibility=e);e=a.id.substring(3,a.id.length);e=Z.Utils.arrayIndexOfObjectValue(q,
"internalID",e);-1!=e&&(q[e].visibility=b)}};this.setHotspotsVisibilityByFilter=function(a,b,c){if(0<q.length)if(aa&&0<aa.childNodes.length)for(var e=0,f=q.length;e<f;e++){if(q[e][a]==b){var h=document.getElementById("hot"+q[e].internalID);null!==h&&k.setHotspotVisibility(h,c)}}else window.setTimeout(function(){setHotspotsVisibilityByFilter(a,b,c)},100);return c};this.setHotspotVisibilityByID=function(a,b,c){c=c?"internalID":"id";0<q.length&&(aa&&0<aa.childNodes.length?(c=Z.Utils.arrayIndexOfObjectValue(q,
c,a),-1!=c&&(c=document.getElementById("hot"+q[c].internalID),null!=c&&k.setHotspotVisibility(c,b))):window.setTimeout(function(){setHotspotVisibilityByID(a,b)},100))};this.parseAnnotationsXML=function(a){"undefined"!==typeof fa&&Z.Utils.arrayClear(fa);"undefined"!==typeof ub&&Z.Utils.arrayClear(ub);"undefined"!==typeof Y&&Z.Utils.arrayClear(Y);"undefined"!==typeof za&&Z.Utils.arrayClear(za);"undefined"!==typeof Ge&&Z.Utils.arrayClear(Ge);"undefined"!==typeof labelCaptionPositionListDP&&Z.Utils.arrayClear(labelCaptionPositionListDP);
"undefined"!==typeof labelTargetListDP&&Z.Utils.arrayClear(labelTargetListDP);"undefined"!==typeof ta&&Z.Utils.arrayClear(ta);"undefined"!==typeof Fb&&Z.Utils.arrayClear(Fb);Ee=!1;Bc=!0;var b=nc(),c=$a(b,"root"),e=$a(b,"setup"),f=a.getElementsByTagName("SETUP");0==f.length&&(f=a.getElementsByTagName("LABELSETUP"));if(0<f.length){f=f[0];temp=f.getAttribute("PANELPOSITION");Z.Utils.stringValidate(temp)&&e.setAttribute("PANELPOSITION",temp);var h=f.getAttribute("INITIALVISIBILITY");Z.Utils.stringValidate(h)&&
(initVis=Z.Utils.getResource("z134")?"0"!=h&&"hide"!=h?"1":"0":"1"!=h&&"show"!=h?"0":"1",e.setAttribute("INITIALVISIBILITY",initVis));h=f.getAttribute("POIVISIBILITY");Z.Utils.stringValidate(h)&&(initVis=Z.Utils.getResource("z66")?"0"!=h&&"hide"!=h?"1":"0":"1"!=h&&"show"!=h?"0":"1",e.setAttribute("POIVISIBILITY",initVis));h=f.getAttribute("LABELVISIBILITY");Z.Utils.stringValidate(h)&&(initVis=Z.Utils.getResource("z52")?"0"!=h&&"hide"!=h?"1":"0":"1"!=h&&"show"!=h?"0":"1",e.setAttribute("LABELVISIBILITY",
initVis));h=f.getAttribute("NOTEVISIBILITY");Z.Utils.stringValidate(h)&&(initVis=Z.Utils.getResource("z60")?"0"!=h&&"hide"!=h?"1":"0":"1"!=h&&"show"!=h?"0":"1",e.setAttribute("NOTEVISIBILITY",initVis));temp=f.getAttribute("MINSCALE");Z.Utils.stringValidate(temp)&&!isNaN(parseFloat(temp))&&0<=parseFloat(temp)&&e.setAttribute("MINSCALE",temp);temp=f.getAttribute("MAXSCALE");Z.Utils.stringValidate(temp)&&!isNaN(parseFloat(temp))&&0<=parseFloat(temp)&&e.setAttribute("MAXSCALE",temp);temp=f.getAttribute("ZOOMIFYXMLVERSION");
Z.Utils.stringValidate(temp)&&(isNaN(parseFloat(temp))||4!=parseFloat(temp)||e.setAttribute("ZOOMIFYXMLVERSION",temp))}c.appendChild(e);Xg=parseFloat(e.getAttribute("ZOOMIFYXMLVERSION"));a=a.getElementsByTagName("POI");e=0;for(f=a.length;e<f;e++){var h=$a(b,"poi"),g=a[e];temp=g.getAttribute("ID");Z.Utils.stringValidate(temp)&&h.setAttribute("ID",temp);temp=g.getAttribute("NAME");Z.Utils.stringValidate(temp)&&h.setAttribute("NAME",temp);temp=g.getAttribute("X");Z.Utils.stringValidate(temp)&&!isNaN(parseFloat(temp))&&
h.setAttribute("X","center"==temp?Z.imageCenterX.toString():temp);temp=g.getAttribute("Y");Z.Utils.stringValidate(temp)&&!isNaN(parseFloat(temp))&&h.setAttribute("Y","center"==temp?Z.imageCenterY.toString():temp);temp=g.getAttribute("ZOOM");Z.Utils.stringValidate(temp)&&!isNaN(parseFloat(temp))&&h.setAttribute("ZOOM",temp);temp=g.getAttribute("USER");Z.Utils.stringValidate(temp)&&h.setAttribute("USER",temp);temp=g.getAttribute("DATE");Z.Utils.stringValidate(temp)&&h.setAttribute("DATE",temp);c.appendChild(h);
var l=a[e].getElementsByTagName("LABELS")[0];if("undefined"!==typeof l&&null!==l){g=b.createElement("LABELS");h.appendChild(g);for(var l=l.getElementsByTagName("LABEL"),m=0,r=l.length;m<r;m++){var p=$a(b,"label"),t=b,s=l[m],q=void 0,ga=void 0,q=s.getAttribute("ID");Z.Utils.stringValidate(q)&&p.setAttribute("ID",q);q=s.getAttribute("NAME");Z.Utils.stringValidate(q)&&p.setAttribute("NAME",q);q=s.getAttribute("MEDIATYPE");Z.Utils.stringValidate(q)&&(p.setAttribute("MEDIATYPE",q),ga=s.getAttribute("MEDIA"),
Z.Utils.stringValidate(ga)&&p.setAttribute("MEDIA",ga),"url"==q?p.setAttribute("MEDIATYPE","icon"):"symbol"==q&&Z.Utils.stringValidate(ga)&&"polygon"==ga?p.setAttribute("MEDIATYPE","polygon"):"symbol"==q&&Z.Utils.stringValidate(ga)&&"polygon"!=ga&&-1!=ga.indexOf(".")?p.setAttribute("MEDIATYPE","icon"):"text"==q&&p.setAttribute("MEDIA",""));q=s.getAttribute("X");Z.Utils.stringValidate(q)&&!isNaN(parseFloat(q))&&p.setAttribute("X","center"==q?Z.imageCenterX.toString():q);q=s.getAttribute("Y");Z.Utils.stringValidate(q)&&
!isNaN(parseFloat(q))&&p.setAttribute("Y","center"==q?Z.imageCenterY.toString():q);q=s.getAttribute("ZOOM");Z.Utils.stringValidate(q)&&!isNaN(parseFloat(q))&&p.setAttribute("ZOOM",q);q=s.getAttribute("XSCALE");Z.Utils.stringValidate(q)&&!isNaN(parseFloat(q))&&p.setAttribute("XSCALE",q);q=s.getAttribute("YSCALE");Z.Utils.stringValidate(q)&&!isNaN(parseFloat(q))&&p.setAttribute("YSCALE",q);q=s.getAttribute("CLICKURL");Z.Utils.stringValidate(q)?p.setAttribute("CLICKURL",q):(q=s.getAttribute("URL"),Z.Utils.stringValidate(q)&&
p.setAttribute("CLICKURL",q));q=s.getAttribute("URLTARGET");Z.Utils.stringValidate(q)&&p.setAttribute("URLTARGET",q);q=s.getAttribute("ROLLOVER");Z.Utils.stringValidate(q)&&p.setAttribute("ROLLOVER",q);q=s.getAttribute("CAPTION");Z.Utils.stringValidate(q)&&p.setAttribute("CAPTION",q);q=s.getAttribute("TOOLTIP");Z.Utils.stringValidate(q)&&p.setAttribute("TOOLTIP",q);q=s.getAttribute("USER");Z.Utils.stringValidate(q)&&p.setAttribute("USER",q);q=s.getAttribute("DATE");Z.Utils.stringValidate(q)&&p.setAttribute("DATE",
q);q=s.getAttribute("TEXTCOLOR");Z.Utils.stringValidate(q)&&p.setAttribute("TEXTCOLOR",Z.Utils.stringValidateColorValue(q));q=s.getAttribute("BACKCOLOR");Z.Utils.stringValidate(q)&&p.setAttribute("BACKCOLOR",Z.Utils.stringValidateColorValue(q));q=s.getAttribute("LINECOLOR");Z.Utils.stringValidate(q)&&p.setAttribute("LINECOLOR",Z.Utils.stringValidateColorValue(q));q=s.getAttribute("FILLCOLOR");Z.Utils.stringValidate(q)&&p.setAttribute("FILLCOLOR",Z.Utils.stringValidateColorValue(q));q=s.getAttribute("TEXTVISIBLE");
Z.Utils.stringValidate(q)&&p.setAttribute("TEXTVISIBLE",q);q=s.getAttribute("BACKVISIBLE");Z.Utils.stringValidate(q)&&p.setAttribute("BACKVISIBLE",q);q=s.getAttribute("LINEVISIBLE");Z.Utils.stringValidate(q)&&p.setAttribute("LINEVISIBLE",q);q=s.getAttribute("FILLVISIBLE");Z.Utils.stringValidate(q)&&p.setAttribute("FILLVISIBLE",q);q=s.getAttribute("CAPTIONPOSITION");Z.Utils.stringValidate(q)&&p.setAttribute("CAPTIONPOSITION",q);q=s.getAttribute("CATEGORY");Z.Utils.stringValidate(q)&&p.setAttribute("CATEGORY",
q);tempNode=s.getElementsByTagName("CAPTION")[0];"undefined"!==typeof tempNode&&null!==tempNode&&p.appendChild(tempNode);tempNode=s.getElementsByTagName("TOOLTIP")[0];"undefined"!==typeof tempNode&&null!==tempNode&&p.appendChild(tempNode);if(ga=s.getElementsByTagName("POLYGON")[0]){for(var ma=$a(t,"polygon"),u=0,B=ga.getElementsByTagName("POINT").length;u<B;u++){var ob=ga.getElementsByTagName("POINT")[u],pb=$a(t,"point"),q=ob.getAttribute("X");Z.Utils.stringValidate(q)&&pb.setAttribute("X",q);q=ob.getAttribute("Y");
Z.Utils.stringValidate(q)&&pb.setAttribute("Y",q);ma.appendChild(pb)}q=s.getAttribute("CLOSED");Z.Utils.stringValidate(q)&&p.setAttribute("CLOSED",q);p.appendChild(ma)}if(4==Xg&&"polygon"==p.getAttribute("MEDIA")&&100!=parseFloat(p.getAttribute("ZOOM"))){t=p;s=t.getAttribute("X");q=t.getAttribute("Y");p=100/t.getAttribute("ZOOM");s-=s*p;q-=q*p;if(0<t.getElementsByTagName("POLYGON").length)for(var y=t.getElementsByTagName("POLYGON")[0],ga=y.getElementsByTagName("POINT"),D=[],ma=0,u=ga.length;ma<u;ma++)B=
parseFloat(ga[ma].getAttribute("X")),B=isNaN(B)?0:B,B=B*p+s,ob=parseFloat(ga[ma].getAttribute("Y")),ob=isNaN(ob)?0:ob,ob=ob*p+q,D[D.length]={x:B,y:ob};t.removeChild(y);p=nc();$a(p,"label");if(null!=D&&0<D.length){s=p.createElement("POLYGON");q=0;for(ga=D.length;q<ga;q++)ma=p.createElement("POINT"),ma.setAttribute("X",D[q].x),ma.setAttribute("Y",D[q].y),s.appendChild(ma);t.appendChild(s)}p=t}g.appendChild(p)}}l=a[e].getElementsByTagName("NOTES")[0];if("undefined"!==typeof l&&null!==l)for(g=b.createElement("NOTES"),
h.appendChild(g),h=l.getElementsByTagName("NOTE"),l=0,m=h.length;l<m;l++)r=$a(b,"note"),t=h[l],temp=t.getAttribute("ID"),Z.Utils.stringValidate(temp)&&r.setAttribute("ID",temp),temp=t.getAttribute("NAME"),Z.Utils.stringValidate(temp)&&r.setAttribute("NAME",temp),temp=t.getAttribute("TEXT"),Z.Utils.stringValidate(temp)&&r.setAttribute("TEXT",temp),temp=t.getAttribute("USER"),Z.Utils.stringValidate(temp)&&r.setAttribute("USER",temp),temp=t.getAttribute("DATE"),Z.Utils.stringValidate(temp)&&r.setAttribute("DATE",
temp),g.appendChild(r)}0==a.length&&(h=$a(b,"poi"),c.appendChild(h));Eb=b;b=Eb.getElementsByTagName("SETUP")[0];jf=b.getAttribute("PANELPOSITION");c=Z.Utils.getResource("z134");y=b.getAttribute("INITIALVISIBILITY");og=c?"0"!=y&&"hide"!=y:"1"!=y&&"show"!=y;Be=parseFloat(b.getAttribute("MINSCALE"));Ce=parseFloat(b.getAttribute("MAXSCALE"));c=Eb.getElementsByTagName("POI");y=0;for(D=c.length;y<D;y++){a=ib("poi");c[y].setAttribute("INTERNALID",a);md(c[y]);if(e=c[y].getElementsByTagName("LABELS")[0])for(e=
e.getElementsByTagName("LABEL"),f=0,h=e.length;f<h;f++)g=ib("label"),e[f].setAttribute("INTERNALID",g),0<f&&"0"==e[f].getAttribute("ID")&&"0"==e[f-1].getAttribute("ID")&&e[f].setAttribute("ID",g),e[f].setAttribute("POIID",a),e[f]=Jc(e[f]),k.z495(e[f]);if(e=c[y].getElementsByTagName("NOTES")[0])for(e=e.getElementsByTagName("NOTE"),f=0,h=e.length;f<h;f++)g=ib("note"),e[f].setAttribute("INTERNALID",g),e[f].setAttribute("POIID",a),Xd(e[f])}2==Z.debug&&Ee&&Z.Utils.trace(Z.Utils.getResource("z246"));Eb=
Yc(Eb);Bc=!1;wd=Yg="0"!=b.getAttribute("POIVISIBILITY");xb=Zg="0"!=b.getAttribute("LABELVISIBILITY");xd=$g="0"!=b.getAttribute("NOTEVISIBILITY");"markup"==Z.editMode&&(wd=xb=xd=!1);"undefined"!==typeof Z.AnnotationPanelDisplay&&null===Z.AnnotationPanelDisplay&&k.createAnnotationPanel();Z.Utils.validateCallback("annotationsLoaded")};this.createLabelFromParameters=function(a,b,c,e,f,h,g,l,m,q,p,r,t,s,ga,ma,B,u,ob,y,pb,D,w,F,x,C,K,E,G,S,zb,H,I,J,T){a=Z.Utils.arrayToArrayOfStrings([a,b,c,e,f,h,g,l,m,
q,p,r,t,s,ga,ma,B,u,ob,y,pb,D,w,F,x,C,K,E,G,S,zb,H,I,J,T]);a=Z.Utils.xmlConvertTextToDoc('<LABEL ID="'+a[0]+'" NAME="'+a[1]+'" MEDIATYPE="'+a[2]+'" MEDIA="'+a[3]+'" AUDIO="'+a[4]+'" X="'+a[5]+'" Y="'+a[6]+'" ZOOM="'+a[7]+'" XSCALE="'+a[8]+'" YSCALE="'+a[9]+'" CLICKURL="'+a[10]+'" URLTARGET="'+a[11]+'" ROLLOVER="'+a[12]+'" CAPTION="'+a[13]+'" TOOLTIP="'+a[14]+'" TEXTCOLOR="'+a[15]+'" BACKCOLOR="'+a[16]+'" LINECOLOR="'+a[17]+'" FILLCOLOR="'+a[18]+'" TEXTVISIBLE="'+a[19]+'" BACKVISIBLE="'+a[20]+'" LINEVISIBLE="'+
a[21]+'" FILLVISIBLE="'+a[22]+'" CAPTIONPOSITION="'+a[23]+'" SAVED="'+a[24]+'" INTERNALID="'+a[25]+'" POIID="'+a[26]+'" POLYGONCLOSED="'+a[27]+'" SHOWFOR="'+a[28]+'" TRANSITION="'+a[29]+'" CHANGEFOR="'+a[30]+'" ROTATION="'+a[31]+'"></LABEL>');b=a.getElementsByTagName("LABEL")[0];Z.Utils.stringValidate(b.getAttribute("INTERNALID"))||b.setAttribute("INTERNALID",ib("label"));Z.Utils.stringValidate(E)&&(E=Z.Utils.xmlConvertTextToDoc(E).getElementsByTagName("CAPTION")[0].innerHTML,c=a.createElement("CAPTION"),
c.innerHTML=E,b.appendChild(c));E=G;Z.Utils.stringValidate(E)&&(E=Z.Utils.xmlConvertTextToDoc(E).getElementsByTagName("TOOLTIP")[0].innerHTML,G=a.createElement("TOOLTIP"),G.innerHTML=E,b.appendChild(G));if(null!=zb){G=a.createElement("POLYGON");E=0;for(c=zb.length;E<c;E++)e=a.createElement("POINT"),e.setAttribute("X",zb[E].x),e.setAttribute("Y",zb[E].y),G.appendChild(e);b.appendChild(G)}k.z495(b,!0)};this.createLabelFromJSON=function(a,b){var c=Z.Utils.jsonConvertObjectToXMLText(a),c=Z.Utils.xmlConvertTextToDoc(c).getElementsByTagName("LABEL")[0];
k.z495(c,!0)};this.z495=function(a,b){b&&(a=td(a,"label"));var c=a.getAttribute("INTERNALID"),e=unescape(a.getAttribute("NAME")),f=a.getAttribute("INTERNALID"),h=a.getAttribute("POIID"),c=Z.Utils.arrayIndexOfObjectValue(Y,"value",c);-1==c&&(c=Y.length);Y[c]={text:e,value:f,poiID:h};k.createHotspotFromXML(a)};this.modifyLabel=function(a,b,c,e,f){k.modifyHotspot(a.toString(),b,c,e,f)};this.createAnnotationPanel=function(){Z.AnnotationPanelDisplay=Z.Utils.createContainerElement("div","AnnotationPanelDisplay",
"inline-block","absolute","hidden","1px","1px","1px","1px","solid","1px","transparent none","0px","0px","normal","default");hf=Z.AnnotationPanelDisplay;se=hf.style;Z.ViewerDisplay.appendChild(Z.AnnotationPanelDisplay);var a=parseInt(Z.Utils.getResource("z230"),10);se.zIndex=(a+4).toString();a=Z.Utils.createContainerElement("div","annotationPanelBackground","inline-block","absolute","hidden","1px","1px","0px","0px","none","0px","transparent none","0px","0px","normal");Z.AnnotationPanelDisplay.appendChild(a);
var b=parseInt(Z.Utils.getResource("z63"),10),c=[{text:Z.Utils.getResource("z20"),value:"0"}];if("undefined"===typeof V||null===V){var e=Z.Utils.createContainerElement("div","labelPOITextBox","inline-block","absolute","hidden","1px","1px","0px","0px","none","0px","transparent none","0px","0px","nowrap",null,!0),f=document.createTextNode(Z.Utils.getResource("z410"));e.appendChild(f);V=new Z.Utils.createSelectElement("poiList","",c,1,1,0,b,"hidden",Ne);Z.AnnotationPanelDisplay.appendChild(e);Z.AnnotationPanelDisplay.appendChild(V)}else Z.Utils.arrayClear(fa);
"undefined"===typeof sa||null===sa?("markup"!=Z.editMode&&(e=Z.Utils.createContainerElement("div","labelLabelTextBox","inline-block","absolute","hidden","1px","1px","0px","0px","none","0px","transparent none","0px","0px","nowrap",null,!0),f=document.createTextNode(Z.Utils.getResource("z408")),e.appendChild(f),Z.AnnotationPanelDisplay.appendChild(e)),sa=new Z.Utils.createSelectElement("labelList","",c,1,1,0,b,"hidden",vf),Z.AnnotationPanelDisplay.appendChild(sa)):(Z.Utils.arrayClear(Y),Z.Utils.arrayClear(za));
if("undefined"===typeof ya||null===ya){if(e=Z.Utils.createContainerElement("div","labelNoteTextBox","inline-block","absolute","hidden","1px","1px","0px","0px","none","0px","transparent none","0px","0px","nowrap",null,!0),f=document.createTextNode(Z.Utils.getResource("z409")),e.appendChild(f),ya=new Z.Utils.createSelectElement("noteList","",c,1,1,0,b,"hidden",Oe),b=Z.Utils.getResource("z21"),b=Z.Utils.createTextElement("noteTextElement",b,"1px","1px","1px","1px","0px","solid","1px",!0,"verdana","1px",
"none",null,1,"auto","auto",null),Z.Utils.addEventListener(b.firstChild,"focus",ec),Z.Utils.addEventListener(b.firstChild,"blur",zc),Z.AnnotationPanelDisplay.appendChild(e),Z.AnnotationPanelDisplay.appendChild(ya),Z.AnnotationPanelDisplay.appendChild(b),b=document.getElementById("textBoxFor-noteTextElement"))b.style.visibility="hidden"}else Z.Utils.arrayClear(ta),Z.Utils.arrayClear(Fb);null===Z.editMode?(dc(),Bc||(fc("0"),nd(!0))):Yd();Z.Utils.addEventListener(a,"mousedown",Z.Utils.preventDefault)};
this.calculateAnnotationPanelDimensions=function(a,b,c){var e=parseInt(Z.Utils.getResource("z65"),10),f=parseInt(Z.Utils.getResource("z61"),10);"markup"==Z.editMode?(e-=20,f+=105,a||(f-=24),b||(f-=24),c||(f-=115)):null!==Z.editMode?(f+=244,a||(f-=50),b||(f-=235),c||(f-=140)):(a||(f-=24),b||(f-=24),c||(f-=115));this.w=e;this.h=f};this.calculateAnnotationPanelCoords=function(a,b,c,e,f){if(0==Z.annotationPanelVisible)c=a=-1E3;else switch(a){case "0":c=a=-1E3;break;case "1":c=a=15;break;case "2":a=e-
b-15;c=15;break;case "3":a=e-b-15;c=null!=toolbar?f-c-15:f-15;break;case "4":a=15;c=null!=toolbar?f-c-15:f-15;break;default:a=e-b-15,c=15}return new Z.Utils.Point(a,c)};this.getInitializedAnnotationPanel=function(){return Ie};this.sizeAndPositionAnnotationPanel=function(a,b,c,e,f){"undefined"!==typeof b&&null!==b&&(a.width=b+"px");"undefined"!==typeof c&&null!==c&&(a.height=c+"px");"undefined"!==typeof e&&null!==e&&(a.left=e+"px");"undefined"!==typeof f&&null!==f&&(a.top=f+"px")};this.clearAnnotationPanel=
function(){hf&&(ya=sa=V=null,Z.Utils.deleteDiv("AnnotationPanelDisplay"))};this.goToLabelByID=function(a,b,c){"undefined"!==typeof b&&null!==b?H=b:"undefined"!==typeof a&&null!==a&&(b=Z.Utils.arrayIndexOfObjectValue(q,"internalID",a),H=-1!=b?q[b]:null);if("undefined"!==typeof c&&null!==c&&!c)for(c=0,b=q.length;c<b&&q[c].id!=a;c++);H&&(b=H.x,a="center"==b?Z.imageCenterX:parseFloat(b),b=H.y,c="center"==b?Z.imageCenterY:parseFloat(b),b=H.z,b="-1"==b?Z.fitZ:parseFloat(b),k.zoomAndPanToView(a,c,b/100))};
this.getCurrentLabel=function(){return H};this.setCurrentLabel=function(a,b){var c=b?Z.Utils.arrayIndexOfObjectValue(q,"internalID",a):Z.Utils.arrayIndexOfObjectValue(q,"id",a);-1!=c&&(H=q[c],Va())};this.getLabelXMLText=function(a){var b=null,b=null;a=Z.Utils.arrayIndexOfObjectValue(q,"internalID",a);-1!=a&&(b=k.convertLabelToXML(q[a]),b=Z.Utils.xmlConvertDocToText(b));return b};this.getLabelJSONObject=function(a,b){var c=null,e=b?Z.Utils.arrayIndexOfObjectValue(q,"internalID",a):Z.Utils.arrayIndexOfObjectValue(q,
"id",a);-1!=e&&(c=k.convertLabelToJSON(q[e]));return c};this.toggleEditMode=function(){var a=!1;null!==Z.editMode?(wd=Yg,xb=Zg,xd=$g,Z.editMode=null,Z.measureVisible=!1,k.saveAnnotations(),a=!0):("undefined"!==typeof Z.parameters.zEditMode&&"1"==Z.parameters.zEditMode?(Z.editMode="edit",a=!0):"undefined"!==typeof Z.parameters.zMarkupMode&&"1"==Z.parameters.zMarkupMode&&(wd=xb=xd=!1,Z.editMode="markup",a=!0),Z.measureVisible="undefined"!==typeof Z.parameters.zEditMode&&"0"==Z.parameters.zMeasureVisible);
Z.Toolbar&&a&&Z.Toolbar.toggleAnnotationPanelMode(Z.editMode)};this.setEditModeLabel=function(a,b,c,e){c=Z.labelMode;Z.labelMode=a;var f=parseInt(Z.Utils.getResource("z6"),10);Z.Utils.showMessage(Z.Utils.getResource("ALERT_HOWTOEDITMODE"+a.toUpperCase()),!1,f,"center",!0);Z.overlayMessage&&(Z.overlayMessage.parentNode.style.display="none");if("edit"==Z.editMode&&"editLabel"==Z.editing)if(k.modifyHotspot(u,"mediaType",a,!0,!0),"freehand"==a)"freehand"!=c&&k.modifyHotspot(u,"polygonPts",null,!0,!0),
k.modifyHotspot(u,"image",null,!0,!0),k.modifyHotspot(u,"closed","false",!0,!0),k.modifyHotspot(u,"media","polygon",!1,!0);else if("text"==a)k.modifyLabel(u,"image",null,!0,!0),k.modifyLabel(u,"captionPosition","5",!0,!0),k.modifyLabel(u,"media",null,!1,!0);else if("icon"==a)"icon"!=c&&0<labelIconList.selectedIndex&&(e=!0),c=labelIconList[labelIconList.selectedIndex].value,c="External Graphics File"!=c?Z.annotationFolder+"/"+c:"placeholder",k.modifyHotspot(u,"media",c,!1,!0);else if("rectangle"==
a){if(H&&H.polygonPts&&4==H.polygonPts.length&&("polygon"==c||"measure"==c)?(c=Lc(H.polygonPts,0),k.modifyHotspot(u,"polygonPts",c,!0,!0),c=Lc(H.polygonPts,1),k.modifyHotspot(u,"polygonPts",c,!0,!0),c=Lc(H.polygonPts,2),k.modifyHotspot(u,"polygonPts",c,!0,!0),c=Lc(H.polygonPts,3),k.modifyHotspot(u,"polygonPts",c,!0,!0)):k.modifyHotspot(u,"polygonPts",null,!0,!0),k.modifyHotspot(u,"image",null,!0,!0),k.modifyHotspot(u,"media","polygon",!1,!0),f=H&&H.polygonPts&&0<H.polygonPts.length)c=new Z.Utils.Point(H.polygonPts[0].x,
H.polygonPts[0].y),oc(u,c)}else"polygon"==a?("rectangle"!=c&&"polygon"!=c&&"measure"!=c&&k.modifyHotspot(u,"polygonPts",null,!0,!0),k.modifyHotspot(u,"image",null,!0,!0),k.modifyHotspot(u,"media","polygon",!1,!0)):"measure"==a&&((f=H&&H.polygonPts&&0<H.polygonPts.length)&&"rectangle"!=c&&"polygon"!=c&&"measure"!=c&&k.modifyHotspot(u,"polygonPts",null,!0,!0),k.modifyHotspot(u,"image",null,!0,!0),k.modifyHotspot(u,"media","polygon",!1,!0),f&&(c=new Z.Utils.Point(H.polygonPts[0].x,H.polygonPts[0].y),
oc(u,c)));null!==Z.editMode?(c="view"==a?"buttonViewMode":"buttonEditMode"+Z.Utils.stringUpperCaseFirstLetter(a),Z.Toolbar.positionButtonBorder(c)):Z.measureVisible&&(c=document.getElementById("buttonMeasure"),f=document.getElementById("buttonMeasureExit"),c&&f&&(c.style.display="measure"==Z.labelMode?"none":"inline-block",f.style.display="measure"==Z.labelMode?"inline-block":"none"));k.toggleLabelIconPicker("icon"==a&&!e);b&&"icon"==a&&"undefined"!==typeof iconMedia&&Z.Utils.stringValidate(iconMedia)&&
(a=document.getElementById("labelIconList"))&&(b=iconMedia.lastIndexOf("/")+1,e=iconMedia.lastIndexOf("."),-1!=b&&-1!=e&&(b=iconMedia.substring(b,e).toLowerCase(),b=Z.Utils.arrayIndexOfObjectValueSubstring(a,"value",b,null,!0),-1!=b&&(a.selectedIndex=b)));Le=qa=null;od=!1;Ia=!0;I?Ic():Va()};this.toggleLabelColorPicker=function(a){var b=document.getElementById("buttonContainerLabelColors");if(b){var c="inline-block"==b.style.display;b.style.display=("undefined"!==typeof a&&null!==a?a:!c)?"inline-block":
"none"}};this.setDrawingColor=function(a,b){"markup"!=Z.editMode&&k.toggleLabelColorPicker(!1);var c;switch(a){case "buttonColor0":c="#FFFFFF";break;case "buttonColor1":c="#FFFF00";break;case "buttonColor2":c="#00FFFF";break;case "buttonColor3":c="#800080";break;case "buttonColor4":c="#008000";break;case "buttonColor5":c="#FF0000";break;case "buttonColor6":c="#0000FF";break;case "buttonColor7":c="#000000"}Wc=Pf=lineStrokeColor=c;var e="#FFFFFF"==c?"#000000":"#FFFFFF";b||null===u||1!=Z.editMode||"addLabel"!=
Z.editing&&"editLabel"!=Z.editing||(k.modifyHotspot(u,"textColor",c,!0,!0),k.modifyHotspot(u,"backColor",e,!0,!0),k.modifyHotspot(u,"lineColor",c,!1,!0))};this.toggleLabelIconPicker=function(a){var b=document.getElementById("buttonContainerLabelIcons");if(b){var c="inline-block"==b.style.display;b.style.display=("undefined"!==typeof a&&null!==a?a:!c)?"inline-block":"none"}};this.addNewPOI=function(){Zd=0<V.options.length?V.options[V.selectedIndex].value:0;ab("save","pois");Wd();fc(fa[fa.length-1].value);
db("poi","addPOI")};this.editCurrentPOI=function(){Zd=V.options[V.selectedIndex].value;ab("save","pois");db("poi","editPOI")};this.deleteCurrentPOI=function(){db("poi",null);if("undefined"!==typeof V&&null!==V&&0<V.options.length){var a=-1!=V.selectedIndex?V.selectedIndex:0,b=V[V.selectedIndex].value,b=Z.Utils.arrayIndexOfObjectValue(fa,"value",b);-1!=b&&(fa=Z.Utils.arraySplice(fa,b,1));0<fa.length?(b=fa.length-1,b=fa[a<=b?a:b].value):b=null;fc(b);Zd=0<V.options.length?V.options[V.selectedIndex].value:
0;ab("save","pois")}k.saveAnnotations()};this.cancelEditsPOI=function(){db("poi",null);Z.Utils.showMessage(Z.Utils.getResource("z2"),!1,750,"center");ab("rollback","pois");fc(Zd)};this.saveEditsPOI=function(a){var b=!Bc&&null!==Z.editing&&Z.Viewport.verifyEditsUnsaved();a||db("poi",null);b&&(Z.Utils.showMessage(Z.Utils.getResource("z15"),!1,750,"center"),Zd=V.options[V.selectedIndex].value,k.saveAnnotations(),ab("save","pois"),Z.Utils.validateCallback("poiSaved"))};this.addNewLabel=function(){vd=
0<sa.options.length?sa.options[sa.selectedIndex].value:0;ab("save","labels");parseInt(Z.Utils.getResource("z6SHORT"),10);u=null;db("labelPartial","addLabel")};this.editCurrentLabel=function(){vd=u;ab("save","labels");db("label","editLabel");"view"!=Z.labelMode&&null!==Z.editing&&k.setEditModeLabel(H.mediaType,!0,H.media,!0);null!==H&&"polygon"==H.media&&Ic()};this.deleteCurrentLabel=function(){k.toggleLabelIconPicker(!1);"markup"!=Z.editMode&&db("label",null);"undefined"!==typeof sa&&null!==sa&&0<
sa.options.length&&k.deleteLabel(sa[sa.selectedIndex].value)};this.deleteLabel=function(a,b){if("undefined"!==typeof b&&null!==b&&!b)for(var c=0,e=q.length;c<e;c++)if(q[c].id==a){a=q[c].internalID;break}"undefined"!==typeof a&&null!==a&&"undefined"!==typeof Y&&null!==Y&&(c=Z.Utils.arrayIndexOfObjectValue(Y,"value",a.toString()),-1!=c&&(Y=Z.Utils.arraySplice(Y,c,1)),c=Z.Utils.arrayIndexOfObjectValue(za,"value",a.toString()),-1!=c&&(za=Z.Utils.arraySplice(za,c,1)),k.deleteHotspot(a.toString(),null,
!0),0<za.length&&"undefined"!==typeof sa&&null!==sa&&0<sa.options.length?(c=-1!=sa.selectedIndex?sa.selectedIndex:0,e=za.length-1,a=za[c<=e?c:e].value):a=null,gc(V.options[V.selectedIndex].value,a),vd=0<sa.options.length?sa.options[sa.selectedIndex].value:"0",ab("save","labels"));k.saveAnnotations()};this.cancelEditsLabel=function(){k.toggleLabelIconPicker(!1);db("label",null);Z.Utils.showMessage(Z.Utils.getResource("z2"),!1,750,"center");ab("rollback","labels");Ia=!0;gc(V.options[V.selectedIndex].value,
vd);Va()};this.saveEditsLabel=function(a){k.toggleLabelIconPicker(!1);var b=!Bc&&null!==Z.editing&&Z.Viewport.verifyEditsUnsaved();a||"markup"==Z.editMode||db("label",null);b&&(Z.Utils.showMessage(Z.Utils.getResource("z15"),!1,750,"center"),vd=sa.options[sa.selectedIndex].value,k.saveAnnotations(),ab("save","labels"),Ia=!0,gc(V.options[V.selectedIndex].value,vd),Z.Utils.validateCallback("labelSaved"),Z.Utils.validateCallback("labelSavedGetJSONObject"));Va()};this.addNewNote=function(){ef=0<ya.options.length?
ya.options[ya.selectedIndex].value:0;ab("save","notes");var a=Z.Utils.arrayToArrayOfStrings([void 0,void 0,void 0,void 0,void 0]),a=Z.Utils.xmlConvertTextToDoc('<NOTE ID="'+a[0]+'" NAME="'+a[1]+'" TEXT="'+a[2]+'" INTERNALID="'+a[3]+'" POIID="'+a[4]+'" ></NOTE>').getElementsByTagName("NOTE")[0];Xd(a,!0);a=ta[ta.length-1];Xc(a.poiID,a.value);db("note","addNote")};this.editCurrentNote=function(){ef=ya.options[ya.selectedIndex].value;ab("save","notes");db("note","editNote")};this.deleteCurrentNote=function(){db("note",
null);if("undefined"!==typeof ya&&null!==ya&&0<ya.options.length){var a=-1!=ya.selectedIndex?ya.selectedIndex:0,b=ya[ya.selectedIndex].value,b=Z.Utils.arrayIndexOfObjectValue(ta,"value",b);-1!=b&&(ta=Z.Utils.arraySplice(ta,b,1));0<ta.length?(b=ta.length-1,b=ta[a<=b?a:b].value):b=null;"markup"!=Z.editMode&&Xc(V.options[V.selectedIndex].value,b);ef=0<ya.options.length?ya.options[ya.selectedIndex].value:0;ab("save","notes")}k.saveAnnotations()};this.cancelEditsNote=function(){db("note",null);Z.Utils.showMessage(Z.Utils.getResource("z2"),
!1,750,"center");ab("rollback","notes");Xc(V.options[V.selectedIndex].value,ef)};this.saveEditsNote=function(a){var b=!Bc&&null!==Z.editing&&Z.Viewport.verifyEditsUnsaved();a||db("note",null);b&&(Z.Utils.showMessage(Z.Utils.getResource("z15"),!1,750,"center"),ef=ya.options[ya.selectedIndex].value,k.saveAnnotations(),ab("save","notes"),Z.Utils.validateCallback("noteSaved"))};this.deleteAllAnnotations=function(){var a=Z.Utils.xmlConvertTextToDoc("<ZAS></ZAS>"),b=a.getElementsByTagName("ZAS")[0],c=$a(a,
"setup");b.appendChild(c);var b=Eb.getElementsByTagName("SETUP")[0],e=b.getAttribute("PANELPOSITION");Z.Utils.stringValidate(e)&&c.setAttribute("PANELPOSITION",e);e=b.getAttribute("INITIALVISIBILITY");Z.Utils.stringValidate(e)&&(e=Z.Utils.getResource("z134")?"0"!=e&&"hide"!=e?"1":"0":"1"!=e&&"show"!=e?"0":"1",c.setAttribute("INITIALVISIBILITY",e));e=b.getAttribute("POIVISIBILITY");Z.Utils.stringValidate(e)&&(e=Z.Utils.getResource("z66")?"0"!=e&&"hide"!=e?"1":"0":"1"!=e&&"show"!=e?"0":"1",c.setAttribute("POIVISIBILITY",
e));e=b.getAttribute("LABELVISIBILITY");Z.Utils.stringValidate(e)&&(e=Z.Utils.getResource("z52"),c.setAttribute("LABELVISIBILITY",e?"0"!=e&&"hide"!=e?"1":"0":"1"!=e&&"show"!=e?"0":"1"));e=b.getAttribute("NOTEVISIBILITY");Z.Utils.stringValidate(e)&&(e=Z.Utils.getResource("z60")?"0"!=e&&"hide"!=e?"1":"0":"1"!=e&&"show"!=e?"0":"1",c.setAttribute("NOTEVISIBILITY",e));e=b.getAttribute("MINSCALE");Z.Utils.stringValidate(e)&&!isNaN(parseFloat(e))&&0<=parseFloat(e)&&c.setAttribute("MINSCALE",e);e=b.getAttribute("MAXSCALE");
Z.Utils.stringValidate(e)&&!isNaN(parseFloat(e))&&0<=parseFloat(e)&&c.setAttribute("MAXSCALE",e);aa&&("undefined"!==typeof q&&Z.Utils.arrayClear(q),"undefined"!==typeof ub&&Z.Utils.arrayClear(ub),null!=oa?"undefined"!==typeof ac&&Z.Utils.arrayClear(ac):("undefined"!==typeof fa&&Z.Utils.arrayClear(fa),"undefined"!==typeof Y&&Z.Utils.arrayClear(Y),"undefined"!==typeof za&&Z.Utils.arrayClear(za),"undefined"!==typeof ta&&Z.Utils.arrayClear(ta),"undefined"!==typeof Fb&&Z.Utils.arrayClear(Fb)));Z.Viewport.parseAnnotationsXML(a);
Va()};this.saveLabel=function(a,b){if("undefined"!==typeof b&&null!==b&&!b)for(var c=0,e=q.length;c<e;c++)if(q[c].id==a){a=q[c].internalID;break}"undefined"!==typeof a&&null!==a&&(c=Z.Utils.arrayIndexOfObjectValue(q,"internalID",a),c=-1!=c?q[c]:null)&&(e=Eb,Eb=k.convertLabelToXML(c),k.saveAnnotations(),Eb=e)};this.convertLabelToXML=function(a){var b,c=nc(),e=$a(c,"label");e.setAttribute("ID",a.id);e.setAttribute("NAME",Z.Utils.stringReadable(escape(a.name)));e.setAttribute("MEDIATYPE",a.mediaType);
e.setAttribute("MEDIA",a.media);e.setAttribute("X",a.x);e.setAttribute("Y",a.y);e.setAttribute("ZOOM",a.z);e.setAttribute("XSCALE",a.xScale);e.setAttribute("YSCALE",a.yScale);e.setAttribute("CLICKURL",a.clickURL);e.setAttribute("URLTARGET",a.urlTarget);b=1==a.rollover?"1":"0";e.setAttribute("ROLLOVER",b);e.setAttribute("CAPTION",Z.Utils.stringReadable(escape(a.caption)));e.setAttribute("TOOLTIP",Z.Utils.stringReadable(escape(a.tooltip)));e.setAttribute("USER",a.user);e.setAttribute("DATE",a.date);
e.setAttribute("TEXTCOLOR",a.textColor);e.setAttribute("BACKCOLOR",a.backColor);e.setAttribute("LINECOLOR",a.lineColor);e.setAttribute("FILLCOLOR",a.fillColor);b=0!=a.textVisible?"1":"0";e.setAttribute("TEXTVISIBLE",b);b=0!=a.backVisible?"1":"0";e.setAttribute("BACKVISIBLE",b);b=0!=a.lineVisible?"1":"0";e.setAttribute("LINEVISIBLE",b);b=0!=a.fillVisible?"1":"0";e.setAttribute("FILLVISIBLE",b);e.setAttribute("CAPTIONPOSITION",a.captionPosition);e.setAttribute("INTERNALID",a.internalID.toString());
e.setAttribute("POIID",a.poiID.toString());b=a.captionHTML;if(Z.Utils.stringValidate(b)&&(b=Z.Utils.xmlConvertTextToDoc(b).getElementsByTagName("CAPTION")[0])){b=b.innerHTML;var f=c.createElement("CAPTION");f.innerHTML=b;e.appendChild(f)}b=a.tooltipHTML;Z.Utils.stringValidate(b)&&(b=Z.Utils.xmlConvertTextToDoc(b).getElementsByTagName("TOOLTIP")[0])&&(b=b.innerHTML,f=c.createElement("TOOLTIP"),f.innerHTML=b,e.appendChild(f));a=a.polygonPts;if(null!=a){b=c.createElement("POLYGON");for(var f=0,h=a.length;f<
h;f++){var g=c.createElement("POINT");g.setAttribute("X",a[f].x);g.setAttribute("Y",a[f].y);b.appendChild(g)}e.appendChild(b)}return e};this.convertLabelToJSON=function(a){var b=null;a=k.convertLabelToXML(a);a=Z.Utils.jsonConvertXMLTextToJSONText(a);try{b=JSON.parse(a)}catch(c){Z.Utils.showMessage(c.name+Z.Utils.getResource("z277")+c.message)}return b};this.saveAnnotations=function(a){Eb=Yc(Eb);if(Z.noPostDefaults){a=Z.Utils.xmlConvertDocToText(Eb);a=Z.Utils.xmlConvertTextToDoc(a);var b=a.getElementsByTagName("SETUP")[0];
"2"==b.getAttribute("PANELPOSITION")&&b.removeAttribute("PANELPOSITION");"1"==b.getAttribute("INITIALVISIBILITY")&&b.removeAttribute("INITIALVISIBILITY");"1"==b.getAttribute("POIVISIBILITY")&&b.removeAttribute("POIVISIBILITY");"1"==b.getAttribute("LABELVISIBILITY")&&b.removeAttribute("LABELVISIBILITY");"1"==b.getAttribute("NOTEVISIBILITY")&&b.removeAttribute("NOTEVISIBILITY");.2==parseFloat(b.getAttribute("MINSCALE"))&&b.removeAttribute("MINSCALE");2==parseFloat(b.getAttribute("MAXSCALE"))&&b.removeAttribute("MAXSCALE");
for(var b=a.getElementsByTagName("POI"),c=0,e=b.length;c<e;c++){var f=b[c];f.getAttribute("NAME")==Z.Utils.getResource("z43")&&f.removeAttribute("NAME");"center"==f.getAttribute("X")&&f.removeAttribute("X");"center"==f.getAttribute("Y")&&f.removeAttribute("Y");"-1"==f.getAttribute("ZOOM")&&f.removeAttribute("ZOOM");f.getAttribute("USER")==Z.Utils.getResource("z44")&&f.removeAttribute("USER");f.getAttribute("DATE")==Z.Utils.getCurrentUTCDateAsString()&&f.removeAttribute("DATE");f.hasAttribute("INTERNALID")&&
f.removeAttribute("INTERNALID");if(f=b[c].getElementsByTagName("LABELS")[0])for(var f=f.getElementsByTagName("LABEL"),h=0,g=f.length;h<g;h++){var l=f[h];l.getAttribute("NAME")==Z.Utils.getResource("z37")&&l.removeAttribute("NAME");"center"==l.getAttribute("X")&&l.removeAttribute("X");"center"==l.getAttribute("Y")&&l.removeAttribute("Y");"100"==l.getAttribute("ZOOM")&&l.removeAttribute("ZOOM");"100"==l.getAttribute("XSCALE")&&l.removeAttribute("XSCALE");"100"==l.getAttribute("YSCALE")&&l.removeAttribute("YSCALE");
""==l.getAttribute("CLICKURL")&&l.removeAttribute("CLICKURL");"_blank"==l.getAttribute("URLTARGET")&&l.removeAttribute("URLTARGET");"0"==l.getAttribute("ROLLOVER")&&l.removeAttribute("ROLLOVER");""==l.getAttribute("CAPTION")&&l.removeAttribute("CAPTION");""==l.getAttribute("TOOLTIP")&&l.removeAttribute("TOOLTIP");l.getAttribute("USER")==Z.Utils.getResource("z39")&&l.removeAttribute("USER");l.getAttribute("DATE")==Z.Utils.getCurrentUTCDateAsString()&&l.removeAttribute("DATE");l.getAttribute("TEXTCOLOR")==
Z.Utils.getResource("z25")&&l.removeAttribute("TEXTCOLOR");l.getAttribute("BACKCOLOR")==Z.Utils.getResource("z22")&&l.removeAttribute("BACKCOLOR");l.getAttribute("LINECOLOR")==Z.Utils.getResource("z48")&&l.removeAttribute("LINECOLOR");l.getAttribute("FILLCOLOR")==Z.Utils.getResource("z46")&&l.removeAttribute("FILLCOLOR");l.getAttribute("TEXTVISIBLE")==Z.Utils.getResource("z26")&&l.removeAttribute("TEXTVISIBLE");l.getAttribute("BACKVISIBLE")==Z.Utils.getResource("z23")&&l.removeAttribute("BACKVISIBLE");
l.getAttribute("LINEVISIBLE")==Z.Utils.getResource("z49")&&l.removeAttribute("LINEVISIBLE");l.getAttribute("FILLVISIBLE")==Z.Utils.getResource("z47")&&l.removeAttribute("FILLVISIBLE");l.getAttribute("CAPTIONPOSITION")==Z.Utils.getResource("z24")&&l.removeAttribute("CAPTIONPOSITION");l.hasAttribute("INTERNALID")&&l.removeAttribute("INTERNALID")}if(f=b[c].getElementsByTagName("NOTES")[0])for(f=f.getElementsByTagName("NOTE"),h=0,g=f.length;h<g;h++)l=f[h],l.getAttribute("NAME")==Z.Utils.getResource("z40")&&
l.removeAttribute("NAME"),l.getAttribute("TEXT")==Z.Utils.getResource("z41")&&l.removeAttribute("TEXT"),l.getAttribute("USER")==Z.Utils.getResource("z42")&&l.removeAttribute("USER"),l.getAttribute("DATE")==Z.Utils.getCurrentUTCDateAsString()&&l.removeAttribute("DATE"),l.hasAttribute("INTERNALID")&&l.removeAttribute("INTERNALID")}}else a=Eb;annotationsXMLOut=a;null===Z.editMode||Z.noPost||(Z.Utils.stringValidate(Z.saveHandlerPath)?-1!=Z.saveHandlerPath.indexOf(Z.Utils.getResource("z13"))?Z.Utils.showMessage(Z.Utils.getResource("z14"),
!1,2E3,"center"):(Z.Utils.showMessage(Z.Utils.getResource("z15"),!1,2E3,"center"),(new Z.NetConnector).postXML(Z.saveHandlerPath,annotationsXMLOut)):Z.Utils.showMessage(Z.Utils.getResource("z297"),!0,null,"center"))};this.setAllHotspotsSaved=function(){for(var a=0,b=q.length;a<b;a++)q[a].saved=!0};this.verifyEditsUnsaved=function(a){a=Yc(Eb);return Z.Utils.xmlConvertDocToText(Eb)!=Z.Utils.xmlConvertDocToText(a)};this.tourStart=function(){k.tourStop();Z.tourPlaying=!0;var a=document.getElementById("buttonTourStop"),
b=document.getElementById("buttonTourStart");a&&b&&(a.style.display="inline-block",b.style.display="none");Z.Utils.playAudio(Je,q[yc].audio);var c=$c(yc,"next",q.length-1);null!==c&&Z.Utils.functionCallWithDelay(function(){k.goToDestination(c)},1500)};this.tourStop=function(){Z.tourPlaying=!1;Z.delayedFunctionCallTimer&&(window.clearTimeout(Z.delayedFunctionCallTimer),Z.delayedFunctionCallTimer=null);var a=document.getElementById("buttonTourStop"),b=document.getElementById("buttonTourStart");a&&b&&
(a.style.display="none",b.style.display="inline-block")};this.priorDestination=function(a){Z.tourPlaying&&a&&k.tourStop();destinationChange("prior")};this.nextDestination=function(a){Z.tourPlaying&&a&&k.tourStop();destinationChange("next")};destinationChange=function(a){if("undefined"!==typeof oa&&null!==oa&&0<oa.length){Z.Utils.playAudio(Je,q[yc].audio);var b=Z.tourPlaying?q[yc].showFor:0;Z.Utils.stringValidate(q[yc].audio)&&(b+=500);var c=$c(yc,a,q.length-1);null!==c?(Z.Utils.loadAudio(q[c].audio),
Z.Utils.functionCallWithDelay(function(){k.goToDestination(c)},b)):k.tourStop()}};this.goToDestination=function(a){yc=a;a=q[a];var b=Z.tourPlaying?k.nextDestination:null;switch(q.transition){case "ZoomAndPanToView":k.zoomAndPanToView(a.x,a.y,a.z/100,a.rotation,a.changeFor,null,b);break;case "SetView":k.setView(a.x,a.y,a.z/100,a.rotation,b);break;default:k.zoomAndPanToView(a.x,a.y,a.z/100,a.rotation,a.changeFor,null,b)}a=Z.Utils.arrayIndexOfObjectValue(oa.options,"value",a.internalID.toString());-1!=
a&&(oa.selectedIndex=a)};this.parseSlidesXML=function(a){Z.Utils.arrayClear(Mb);Z.Utils.arrayClear(Cf);var b=a.getElementsByTagName("SETUP")[0],c=b.getAttribute("AUTOSTART");Ff=Z.Utils.stringValidate(c)?"0"!=c&&"false"!=c:Z.Utils.getResource("z208");c=b.getAttribute("AUTOLOOP");Jg=Z.Utils.stringValidate(c)?"0"!=c&&"false"!=c:Z.Utils.getResource("z207");c=b.getAttribute("CHOICELIST");Vg=Z.Utils.stringValidate(c)?c:Z.Utils.getResource("z202");c=b.getAttribute("LISTSOURCE");Z.Utils.stringValidate(c)||
Z.Utils.getResource("z203");b.getAttribute("LISTTITLE");Z.slideListTitle=Z.Utils.stringValidate(Z.slideListTitle)?Z.slideListTitle:Z.Utils.getResource("z443");a=a.getElementsByTagName("SLIDE");b=0;for(c=a.length;b<c;b++){var e=new Qe(a[b]);Mb[Mb.length]=e;Cf[Cf.length]={text:e.name,value:e.internalID}}var f=Vg;a=Z.slideListTitle;var b=Cf,c="0"==f?"hidden":"visible",e=parseInt(Z.Utils.getResource("z204"),10),h;switch(f){case "0":h=f=0;break;case "1":h=f=25;break;case "2":f=Ga-e-25;h=20;break;case "3":f=
Ga-e-25;h=null!=toolbar?Ba-50:Ba-37.5;break;case "4":f=25;h=null!=toolbar?Ba-50:Ba-37.5;break;default:f=Ga-e,h=25}f=new Z.Utils.Point(f,h);"undefined"===typeof mb||null===mb?(mb=new Z.Utils.createSelectElement("slideList",a,b,e,f.x,f.y,null,c,Re),Z.ViewerDisplay.appendChild(mb),Zc=0,a=Z.Utils.stringValidate(Z.slideListTitle)&&"none"!=Z.slideListTitle?1:0,mb.selectedIndex=a):Z.Utils.arrayClear(b);k.initializeAudioMuteButtons();null===Z.imagePath||"null"==Z.imagePath||-1!=Z.imagePath.indexOf("zSlidePath")?
k.goToSlide(0,!0):Ff&&k.slideshowStart()};this.slideshowStart=function(a){k.slideshowStop();Z.slideshowPlaying=!0;var b=document.getElementById("buttonSlideshowStop"),c=document.getElementById("buttonSlideshowStart");b&&c&&(b.style.display="inline-block",c.style.display="none");Z.Utils.playAudio(Je,Mb[Zc].audio);var b=Z.slideshowPlaying?Mb[Zc].showFor:0,e=a?0:$c(Zc,"next",Mb.length-1);null!==e&&(Z.Utils.loadAudio(Mb[e].audio),Z.Utils.functionCallWithDelay(function(){k.goToSlide(e)},b))};this.slideshowStop=
function(){Z.slideshowPlaying=!1;Z.delayedFunctionCallTimer&&(window.clearTimeout(Z.delayedFunctionCallTimer),Z.delayedFunctionCallTimer=null);var a=document.getElementById("buttonSlideshowStop"),b=document.getElementById("buttonSlideshowStart");a&&b&&(a.style.display="none",b.style.display="inline-block")};this.priorSlide=function(a){Z.slideshowPlaying&&a&&k.slideshowStop();de("prior")};this.nextSlide=function(a){Z.slideshowPlaying&&a&&k.slideshowStop();de("next")};this.goToSlide=function(a,b){Zc=
a;var c=Mb[a],e=Z.Utils.parametersToDelimitedString(Z.parameters,"&"),f;temp=c.initialX;var h=Z.Utils.stringValidate(temp)?"center"==temp?"zInitialX="+(Z.imageW/2).toString():isNaN(parseFloat(temp))?null:"zInitialX="+temp:null;temp=c.initialY;f=Z.Utils.stringValidate(temp)?"center"==temp?"zInitialY="+(Z.imageH/2).toString():isNaN(parseFloat(temp))?null:"zInitialY="+temp:null;temp=c.initialZoom;var g=Z.Utils.stringValidate(temp)?isNaN(parseFloat(temp))?null:"zInitialZoom="+temp:null;temp=c.minZoom;
var l=Z.Utils.stringValidate(temp)?isNaN(parseFloat(temp))?null:"zMinZoom="+temp:null;temp=c.maxZoom;var k=Z.Utils.stringValidate(temp)?isNaN(parseFloat(temp))?null:"zMaxZoom="+temp:null,h=null!==h?h:null,h=null!==f?null!==h?h+"&"+f:f:null,h=null!==g?null!==h?h+"&"+g:g:null,h=null!==l?null!==h?h+"&"+l:l:null;f=null!==k?null!==h?h+"&"+k:k:null;g=Z.Utils.stringValidate(f)?"&":"";e=e+g+f;switch(c.transition){case "Fade":Z.Viewer.setImageWithFade(c.media,e,b);break;case "None":Z.Viewer.setImage(c.media,
e,!1,b);break;default:Z.Viewer.setImageWithFade(c.media,e,b)}c=Z.Utils.arrayIndexOfObjectValue(mb.options,"value",c.internalID.toString());-1!=c&&(mb.selectedIndex=c)};this.slideTransitionTimeoutHandler=function(a,b,c,e){e&&(Z.Viewer.setImage(b,c,!1,e),a="in");window.clearTimeout(Z.slideTransitionTimeout);Z.slideTransitionTimeout=null;"out"==a?0<=Z.slideOpacity?(Z.slideOpacity-=Wg,a="out"):(Z.slideOpacity=0,a="in",Z.setCallback("viewUpdateComplete",function(){Z.slideTransitionTimeout=window.setTimeout(function(){Z.Viewport.slideTransitionTimeoutHandler(a,
b,c)},50)}),Z.Viewer.setImage(b,c,!1,null)):(0==Z.slideOpacity&&(Z.Utils.playAudio(Je,Mb[Zc].audio),Z.clearCallback("viewUpdateComplete",function(){Z.slideTransitionTimeout=window.setTimeout(function(){Z.Viewport.slideTransitionTimeoutHandler(a,b,c)},50)})),1>=Z.slideOpacity?(Z.slideOpacity+=Wg,a="in"):(Z.slideOpacity=1,a=null));ja&&Z.Utils.setOpacity(ja,Z.slideOpacity);Z.NavigatorDisplay&&Z.Utils.setOpacity(Z.NavigatorDisplay,Z.slideOpacity);null!==a&&0!=Z.slideOpacity&&(Z.slideTransitionTimeout=
window.setTimeout(function(){Z.Viewport.slideTransitionTimeoutHandler(a,b,c)},50))};this.initializeAudioMuteButtons=function(){if(Z.audioContent){var a=document.getElementById("buttonAudioOn");a&&(a.style.display="inline-block")}};this.audioMute=function(a){Z.audioMuted=a;var b=document.getElementById("buttonAudioMuted"),c=document.getElementById("buttonAudioOn");b&&c&&(a?(b.style.display="inline-block",c.style.display="none"):(b.style.display="none",c.style.display="inline-block"))};this.setView=
function(a,b,c,e,f){Ld(a,b,c,e,f)};this.zoom=function(a){if("stop"!=a||"stop"!=Z.zooming){switch(a){case "out":0<=Nb&&(Nb-=ke);break;case "in":0>=Nb&&(Nb+=ke);break;case "stop":Nb=0}Z.zooming=0==Nb?"stop":0<Nb?"in":"out";0!=Nb?pc||((0>Nb&&Z.imageZ>Z.minZ||0<Nb&&Z.imageZ<Z.maxZ)&&k.toggleWatermarks(!1),Z.useCanvas||Z.Utils.clearDisplay(Ma),pc=window.setTimeout(Dd,Uf)):(ee(),k.updateView(),k.toggleWatermarks(!0))}};this.pan=function(a){if("horizontalStop"!=a||"stop"!=Z.panningX)if("verticalStop"!=a||
"stop"!=Z.panningY){switch(a){case "left":0>=Vb&&(Vb+=Bf);break;case "up":0>=Wb&&(Wb+=Bf);break;case "down":0<=Wb&&(Wb-=Bf);break;case "right":0<=Vb&&(Vb-=Bf);break;case "horizontalStop":Vb=0;break;case "verticalStop":Wb=0;break;case "stop":Wb=Vb=0}Z.panningX=0==Vb?"stop":0<Vb?"left":"right";Z.panningY=0==Wb?"stop":0<Wb?"up":"down";la(ra,1);la(ra,1);0!=Vb||0!=Wb?pc||(k.toggleWatermarks(!1),Z.useCanvas||Z.Utils.clearDisplay(Ma),pc=window.setTimeout(Dd,Uf)):(ee(),k.updateView(),k.toggleWatermarks(!0))}};
this.zoomAndPanToView=function(a,b,c,e,f,h,g){k.zoomAndPanAllStop();if(Z.clickZoomAndPanBlock)Z.clickZoomAndPanBlock=!1;else{if("undefined"===typeof a||null===a)a=Z.imageX;if("undefined"===typeof b||null===b)b=Z.imageY;if("undefined"===typeof c||null===c)c=Z.imageZ;if("undefined"===typeof e||null===e)e=Z.imageR;if("undefined"===typeof f||null===f)f=uh;if("undefined"===typeof h||null===h)h=kg;if("center"==a||isNaN(parseFloat(a)))a=Z.imageCenterX;if("center"==b||isNaN(parseFloat(b)))b=Z.imageCenterY;
if(-1==c||isNaN(parseFloat(c)))b=Z.fitZ;k.toggleWatermarks(!1);Z.useCanvas||Z.Utils.clearDisplay(Ma);if("undefined"===typeof a||null===a)a=Z.initialX;if("undefined"===typeof b||null===b)b=Z.initialY;if("undefined"===typeof e||null===e)e=Z.imageR;"undefined"===typeof c||null===c?c=Z.initialZ:1<c&&2>c&&0!=c%1?c=1:1<c?c/=100:.99<c&&1>c&&0!=100*c%1&&(c=1);b=ma(a,b,c,e,"image");a=b.x;b=b.y;c=ga(c);if(Math.round(a)!=Math.round(Z.imageX)||Math.round(b)!=Math.round(Z.imageY)||Math.round(1E5*c)!=Math.round(1E5*
Z.imageZ)||Math.round(e)!=Math.round(Z.imageR))Te=0,Se(a,b,c,e,f,h,g)}};this.zoomAndPanAllStop=function(a,b){Z.interactivityOff||(pd&&pd&&(window.clearTimeout(pd),pd=null),Z.tourPlaying&&b&&(k.tourStop(),a=!1),Z.slideshowPlaying&&b&&(k.slideshowStop(),a=!1),Z.smoothPan&&null!==ad&&(Wa||qd(!0),a=!0),a||k.updateView())};this.z633=function(a,b){Ed(a,b)&&(sd(),Va(),pb(),zb())};this.reset=function(a){a?k.zoomAndPanToView(Z.priorX,Z.priorY,Z.priorZ,Z.priorR):k.zoomAndPanToView(Z.initialX,Z.initialY,Z.initialZ,
Z.initialR);Cd(!0)};this.labelScale=function(a){switch(a){case "down":0<=ic&&(ic-=Df);break;case "up":0>=ic&&(ic+=Df);break;case "stop":ic=0}0!=ic?Fd||(Fd=window.setTimeout(fe,Mg)):(Fd&&(window.clearTimeout(Fd),Fd=null),ic=0)};this.toggleWatermarks=function(a){if(Nd){var b="inline-block"==Nd.display;Nd.display=("undefined"!==typeof a&&null!==a?a:!b)?"inline-block":"none"}};this.toggleConstrainPan=function(){Z.constrainPan=!Z.constrainPan;if(Z.constrainPan){var a=parseFloat(ua.left),b=parseFloat(ua.top),
a=ma(a,b,Z.imageZ,Z.imageR,"container");J.left=a.x+"px";J.top=a.y+"px";k.updateView()}};this.toggleSmoothPan=function(){qd();Z.smoothPan=!Z.smoothPan};this.toggleBackfill=function(){var a=Z.ViewerDisplay.childNodes[1];a&&(a=a.childNodes[0])&&(a=a.style,a.display="none"==a.display?"inline-block":"none")};this.toggleDisplay=function(){var a=Z.ViewerDisplay.childNodes[1];a&&(a=a.childNodes[1])&&(ua=a.style,ua.display="none"==ua.display?"inline-block":"none")};this.toggleFullViewModeExternal=function(){mg=
!0;k.toggleFullViewMode()};this.toggleFullViewMode=function(a,b){var c=null,e=null;Z.fullView="undefined"!==typeof a&&null!==a?a:!Z.fullView;var f=document.body.style,h=document.documentElement.style,g=Z.ViewerDisplay.style,e=Z.Utils.getElementStyle(Z.pageContainer);Z.fullView?(Og=f.width,Pg=f.height,Qg=f.overflow,Rg=h.overflow,lg=Z.Utils.stringValidate(e.backgroundColor)&&"transparent"!=e.backgroundColor?e.backgroundColor:Z.Utils.stringValidate(f.backgroundColor)&&"transparent"!=f.backgroundColor?
f.backgroundColor:Z.Utils.getResource("z120"),Sg=g.zIndex,Z.fullScreenSupported&&!Z.fullPageVisible?(fullScreenEntering=!0,Z.Utils.fullScreenView(Z.ViewerDisplay,!0),e=Z.Utils.getScreenSize()):(e=Z.Utils.getWindowSize(),Z.mobileDevice?(f.width=e.x,f.height=e.y):(f.width="100%",f.height="100%")),c=e.x,e=e.y,f.overflow="hidden",h.overflow="hidden",g.backgroundColor=lg,g.position="fixed",g.zIndex="99999999"):(f.overflow=Qg,h.overflow=Rg,g.backgroundColor=lg,g.position="relative",g.zIndex=Sg,Z.fullScreenSupported&&
!Z.fullPageVisible&&Z.Utils.fullScreenView(Z.ViewerDisplay,!1,b),f.width=Og,f.height=Pg,c=parseFloat(e.width),e=parseFloat(e.height),isNaN(c)&&(c=Z.ViewerDisplay.clientWidth),isNaN(e)&&(e=Z.ViewerDisplay.clientHeight),mg=!1);Z.viewerW=c;Z.viewerH=e;k.setSizeAndPosition(c,e);f=document.getElementById("buttonFullView");h=document.getElementById("buttonFullViewExit");f&&h&&(f.style.display=Z.fullView?"none":"inline-block",h.style.display=Z.fullView?"inline-block":"none");mg?(oe||(f=Z.Utils.getResource("z420"),
h=parseFloat(Z.viewerW)-54,g=parseFloat(Z.viewerH)-54,e=Z.Utils.getResource("DEFAULT_FULLVIEWEXITEXTERNALBUTTONCOLOR"),oe=new Z.Utils.Button("buttonFullViewExitExternal",f,null,null,null,null,"34px","34px",h+"px",g+"px","mousedown",Ue,"z391EXITEXTERNAL","solid","1px",e,"0px","0px"),Z.ViewerDisplay.appendChild(oe.elmt)),oe.elmt.style.display="inline-block"):oe&&(oe.elmt.style.display="none");Z.ToolbarDisplay&&Z.Toolbar.getInitialized()&&(Z.toolbarCurrentW=-1==Z.toolbarW?c:Z.toolbarW,Z.Toolbar.setSizeAndPosition(Z.toolbarCurrentW,
null,null,1==Z.toolbarPosition?Z.viewerH-Z.toolbarH:0));Z.NavigatorDisplay&&Z.Navigator.getInitialized()&&Z.Navigator.setSizeAndPosition(Z.navigatorW,Z.navigatorH,Z.navigatorL,Z.navigatorT);Z.RulerDisplay&&Z.Ruler.getInitialized()&&Z.Ruler.setSizeAndPosition(null,null,null,null);k.validateXYZDefaults();Z.imageZ=ga(Z.imageZ);c=parseFloat(J.left);f=parseFloat(J.top);c=ma(c,f,Z.imageZ,Z.imageR,"container");J.left=c.x+"px";J.top=c.y+"px";k.updateView(!0)};this.rotateClockwise=function(){k.rotate(90,!0)};
this.rotateCounterwise=function(){k.rotate(-90,!0)};this.rotate=function(a,b){if(!Z.interactivityOff)if(Z.rotationSupported){Cd();var c=Z.imageR+a,e=l(c);Z.interactivityOff=!0;b?k.zoomAndPanToView(Z.imageX,Z.imageY,Z.imageZ,c,600,12,function(){Z.imageR=e}):(Z.Utils.rotateElement(J,c),0!=Z.imageR&&oCtx.rotate((c-Z.imageR)*Math.PI/180),Z.imageR=e,k.zoomAndPanToView(Z.imageX,Z.imageY,Z.imageZ))}else Z.Utils.showMessage(Z.Utils.getResource("z12"))};this.toggleEditModeMeasure=function(a){k.zoomAndPanAllStop();
"undefined"!==typeof a&&!a||"measure"==Z.labelMode?(null===Z.editMode&&"measure"==Z.labelMode&&0<q.length&&(k.deleteAllMeasureHotspots(),u=null),k.setEditModeLabel("view")):k.setEditModeLabel("measure")};this.increaseImageFilter=function(a){if(Z.Utils.stringValidate(a)){var b;switch(a){case "brightness":b=40;break;case "contrast":b=10;break;case "sharpness":b=1;break;case "blurriness":b=3}k.setImageFilter(a,b)}};this.decreaseImageFilter=function(a){if(Z.Utils.stringValidate(a)){var b;switch(a){case "brightness":b=
-40;break;case "contrast":b=-10;break;case "sharpness":b=-1;break;case "blurriness":b=-3}k.setImageFilter(a,b)}};this.setImageFilter=function(a,b){"undefined"!==typeof a&&null!==a&&"null"!==a&&(-1==Z.Utils.arrayIndexOfObjectValue(yb,"filter",a)||"edges"!=a&&"inversion"!=a&&"grayscale"!=a&&"threshold"!=a)&&(Z.Toolbar.addCounterToImageFilterList(a,yb.length),yb[yb.length]={filter:a,value:b},validateImageFiltersConvolve(),gd(a,b))};validateImageFiltersConvolve=function(){var a=-1!=Z.Utils.arrayIndexOfObjectValue(yb,
"filter","sharpness"),b=-1!=Z.Utils.arrayIndexOfObjectValue(yb,"filter","blurriness"),c=-1!=Z.Utils.arrayIndexOfObjectValue(yb,"filter","edges");fd=a||b||c};this.clearImageFilterLast=function(){0<yb.length&&(Z.Toolbar.removeLastCounterFromImageFilterList(yb.length),yb.pop(),validateImageFiltersConvolve(),k.updateView(!0))};this.clearImageFiltersAll=function(){0<yb.length&&(Z.Toolbar.removeAllCountersFromImageFilterList(),Z.Utils.arrayClear(yb),validateImageFiltersConvolve(),k.updateView(!0))};this.fullScreenEscapeHandler=
function(a){fullScreenEntering?fullScreenEntering=!1:k.toggleFullViewMode(!1,!0)}};
Z.ZoomifyToolbar=function(a){function b(){window.clearInterval(Za);Za=null;var a=document.getElementById("progressTextBoxCenteredDiv");a&&(a=a.firstChild)&&(a.nodeValue="")}function c(a){4>Z.toolbarVisible&&!Z.mobileDevice?e(a):f(!a)}function e(a){N&&(N.display=a?"inline-block":"none")}function f(a){if(N){var b=document.getElementById("buttonContainer"),c=document.getElementById("toolbarBackground"),e=document.getElementById("buttonMinimize"),f=document.getElementById("buttonExpand"),g=document.getElementById("logoDivider"),
m=0;f&&!Q&&(m=parseFloat(f.style.left)+parseFloat(f.style.width)+4);if(Z.imageFiltersVisible)var p=document.getElementById("imageFilterPanelBackground"),r=document.getElementById("buttonContainerImageFilter");var t=Z.toolbarCurrentW;a?(b&&(b.style.display="none"),e&&f&&!Q&&(g&&(g.style.display="none"),e.style.display="none",f.style.display="inline-block"),N.width=m+"px",c&&(c.style.width=m+"px"),p&&r&&(p.style.width="0px",r.style.display="none")):(b&&(b.style.display="inline-block"),e&&f&&!Q&&(g&&
(g.style.display="inline-block"),e.style.display="inline-block",f.style.display="none"),N.width=t+"px",c&&(c.style.width=t+"px"),p&&r&&Tb&&(p.style.width=G+"px",r.style.display="inline-block"))}}function g(a){if(D&&M){a=(a-Z.minZ)/(Z.maxZ-Z.minZ);var b=parseFloat(D.style.left),c=parseFloat(D.style.left)+parseFloat(D.style.width)-parseFloat(M.style.width)-b;M.style.left=a*c+b+"px"}}function m(a){M&&(W=!0,a=Z.Utils.getMousePosition(a),M.mouseXPrior=a.x,M.mouseYPrior=a.y)}function s(){if(D&&M){var b=
parseFloat(D.style.left),c=parseFloat(D.style.left)+parseFloat(D.style.width)-parseFloat(M.style.width),e=parseFloat(M.style.left)+(ca.x-M.mouseXPrior);e<b?e=b:e>c?e=c:M.mouseXPrior=ca.x;M.style.left=e+"px";b=Z.minZ+(e-b)/(c-b)*(Z.maxZ-Z.minZ);c=b-a.getZoom();Z.zooming=0<c?"in":0>c?"out":"stop";a.z633(b)}}function p(b){if(b=Z.Utils.event(b)){var c=b.type,e=Z.Utils.target(b);if(e){var f=e.parentNode;if(f){var g=f;tbID=f.id}}e=Z.Utils.relatedTarget(b)}"mousedown"==c&&a&&a.zoomAndPanAllStop(!1,!0);if((!Z.interactivityOff||
"mousedown"!=c&&"mouseup"!=c||"buttonRotateClockwise"==tbID||"buttonRotateCounterwise"==tbID)&&(!e||"[object HTMLSelectElement]"!=e&&"[object HTMLOptionElement]"!=e)&&!Z.Utils.isRightMouseButton(b)){Z.mobileDevice&&b.preventDefault();if("viewportContainer"==tbID||W)if(f=document.getElementById("buttonSlider"))tbID=f.id;var e=f,r=c;if(-1!=e.id.indexOf("button")&&-1==e.id.indexOf("buttonContainer")){var B=e.firstChild,D=e.childNodes[1],E=e.childNodes[2];if(B&&D&&E)if(B=B.style,D=D.style,E=E.style,B.visibility=
D.visibility=E.visibility="hidden","mouseover"==r&&"buttonSlider"==e.id&&W)E.visibility="visible";else if("mouseover"==r||"mouseup"==r)D.visibility="visible";else if("mousedown"==r||"mousemove"==r||"touchstart"==r||"MSPointerDown"==r)E.visibility="visible";else if("mouseout"==r||"touchend"==r||"touchcancel"==r||"MSPointerUp"==r)B.visibility="visible"}if(tbID&&"buttonBackground"!=tbID&&c)switch(c){case "mouseover":Z.Utils.removeEventListener(f.childNodes[0],"mouseover",p);Z.Utils.addEventListener(f.childNodes[1],
"mousedown",p);Z.Utils.addEventListener(f.childNodes[1],"mouseout",p);W&&g&&Z.Utils.addEventListener(g.childNodes[0],"mouseup",p);break;case "mousedown":"trackSlider"!=tbID&&(Z.Utils.removeEventListener(f.childNodes[1],"mousedown",p),Z.Utils.removeEventListener(f.childNodes[1],"mouseout",p),Z.Utils.addEventListener(f.childNodes[2],"mouseup",p),Z.Utils.addEventListener(f.childNodes[2],"mouseout",p),"buttonSlider"==tbID&&(m(b),C(b),Z.Utils.addEventListener(document,"mousemove",C),O||(O=window.setInterval(s,
ha)),Z.Utils.addEventListener(document,"mouseup",p)));a&&x(b,tbID);break;case "mouseup":Z.Utils.removeEventListener(f.childNodes[2],"mouseup",p);Z.Utils.removeEventListener(f.childNodes[2],"mouseout",p);Z.Utils.addEventListener(f.childNodes[1],"mousedown",p);Z.Utils.addEventListener(f.childNodes[1],"mouseout",p);W&&g&&Z.Utils.removeEventListener(g.childNodes[0],"mouseup",p);a&&x(b,tbID);break;case "mouseout":Z.Utils.removeEventListener(f.childNodes[1],"mousedown",p);Z.Utils.removeEventListener(f.childNodes[1],
"mouseout",p);Z.Utils.addEventListener(f.childNodes[0],"mouseover",p);a&&x(b,tbID);break;case "touchstart":"buttonSlider"==tbID&&(m(b),t(b),Z.Utils.addEventListener(document,"touchmove",t),O||(O=window.setInterval(s,ha)));Z.Utils.addEventListener(f,"touchend",p);Z.Utils.addEventListener(f,"touchcancel",p);a&&x(b,tbID);break;case "touchend":Z.Utils.addEventListener(f,"touchstart",p);a&&x(b,tbID);break;case "touchcancel":Z.Utils.addEventListener(f,"touchstart",p);a&&x(b,tbID);break;case "MSPointerDown":"buttonSlider"==
tbID&&(m(b),t(b),Z.Utils.addEventListener(document,"MSPointerMove",t),O||(O=window.setInterval(s,ha)));Z.Utils.addEventListener(f,"MSPointerUp",p);a&&x(b,tbID);break;case "MSPointerUp":Z.Utils.addEventListener(f,"MSPointerDown",p),a&&x(b,tbID)}}}function x(b,c){var e=b.type;if("mousedown"==e||"touchstart"==e)switch(e=document.activeElement.id,!Z.Utils.stringValidate(e)||"poiNameTextElement"!=e&&"labelNameTextElement"!=e&&"captionTextElement"!=e&&"tooltipTextElement"!=e&&"clickURLTextElement"!=e&&
"noteNameTextElement"!=e&&"noteTextElement"!=e||document.getElementById(e).blur(),K.positionButtonBorder(c),c){case "buttonMinimize":b.altKey?a.setHotspotsVisibility(!a.getHotspotsVisibility()):(K.minimize(!0),Z.Navigator&&Z.Navigator.setVisibility(!1));break;case "buttonExpand":b.altKey?a.setHotspotsVisibility(!a.getHotspotsVisibility()):(K.minimize(!1),Z.Navigator&&Z.Navigator.setVisibility(!0));break;case "buttonZoomOut":b.altKey||a.zoom("out");break;case "buttonSlider":break;case "trackSlider":if(D){var e=
Z.Utils.getElementPosition(D),e=Z.mobileDevice?Z.Utils.getMousePosition(b).x-e.x:b.clientX-e.x,f=parseFloat(D.style.width),e=Z.minZ+(e-0)/(f-0)*(Z.maxZ-Z.minZ);e<Z.minZ+.1&&(e=Z.minZ);e>Z.maxZ-.1&&(e=Z.maxZ);f=e-a.getZoom();Z.zooming=0<f?"in":0>f?"out":"stop";a.z633(e);Z.zooming="stop";a.updateView()}break;case "buttonZoomIn":b.altKey||a.zoom("in");break;case "buttonPanLeft":a.pan("left");break;case "buttonPanUp":a.pan("up");break;case "buttonPanDown":a.pan("down");break;case "buttonPanRight":a.pan("right");
break;case "buttonReset":a.reset(b.altKey);break;case "buttonFullView":break;case "buttonFullViewExit":break;case "buttonMeasure":a.toggleEditModeMeasure(!0);break;case "buttonMeasureExit":a.toggleEditModeMeasure(!1);break;case "buttonHelp":Z.annotations&&null===Z.editMode?Z.Utils.showHelp(Z.Utils.getResource("z32")+Z.Utils.getResource("z30")+Z.Utils.getResource("z29")):Z.Utils.showHelp(Z.Utils.getResource("z32"));break;case "buttonHelpMarkup":Z.Utils.showHelp(Z.Utils.getResource("z31"));break;case "buttonHelpAnnotation":Z.Utils.showHelp(Z.Utils.getResource("z28"));
break;case "buttonRotateClockwise":a.rotateClockwise();break;case "buttonRotateCounterwise":a.rotateCounterwise();break;case "buttonTourPrior":a.priorDestination(!0);break;case "buttonTourNext":a.nextDestination(!0);break;case "buttonTourStart":a.tourStart();break;case "buttonTourStop":a.tourStop();break;case "buttonSlideshowPrior":a.priorSlide(!0);break;case "buttonSlideshowNext":a.nextSlide(!0);break;case "buttonSlideshowStart":a.slideshowStart();break;case "buttonSlideshowStop":a.slideshowStop();
break;case "buttonAudioOn":a.audioMute(!0);break;case "buttonAudioMuted":a.audioMute(!1);break;case "buttonImageFilterPanelShow":K.imageFilterPanelShow();break;case "buttonImageFilterPanelHide":K.imageFilterPanelHide();break;case "buttonImageFilterPlus":a.increaseImageFilter(la);break;case "buttonImageFilterMinus":a.decreaseImageFilter(la);break;case "buttonImageFilterApply":a.setImageFilter(la);break;case "buttonImageFilterClear":a.clearImageFilterLast();break;case "buttonImageFiltersClearAll":a.clearImageFiltersAll();
break;case "buttonPOIAdd":a.addNewPOI();break;case "buttonPOIEdit":a.editCurrentPOI();break;case "buttonPOIDelete":a.deleteCurrentPOI();break;case "buttonPOICancel":a.cancelEditsPOI();break;case "buttonPOISave":a.saveEditsPOI();break;case "buttonLabelAdd":a.addNewLabel();break;case "buttonLabelEdit":a.editCurrentLabel();break;case "buttonLabelDelete":a.deleteCurrentLabel();break;case "buttonLabelCancel":a.cancelEditsLabel();break;case "buttonLabelSave":a.saveEditsLabel();break;case "buttonNoteAdd":a.addNewNote();
break;case "buttonNoteEdit":a.editCurrentNote();break;case "buttonNoteDelete":a.deleteCurrentNote();break;case "buttonNoteCancel":a.cancelEditsNote();break;case "buttonNoteSave":a.saveEditsNote();break;case "buttonClearAll":a.deleteAllAnnotations();break;case "buttonViewMode":a.setEditModeLabel("view");break;case "buttonEditColorPicker":a.toggleLabelColorPicker();break;case "buttonEditModeFreehand":a.setEditModeLabel("freehand");break;case "buttonEditModeText":a.setEditModeLabel("text");break;case "buttonEditModeIcon":a.setEditModeLabel("icon");
break;case "buttonEditModeRectangle":a.setEditModeLabel("rectangle");break;case "buttonEditModePolygon":a.setEditModeLabel("polygon");break;case "buttonEditModeMeasure":a.setEditModeLabel("measure");break;case "buttonLabelScaleDown":a.labelScale("down");break;case "buttonLabelScaleUp":a.labelScale("up");break;default:"buttonColor"==c.substr(0,11)&&a.setDrawingColor(c)}else if("mouseup"==e||"touchend"==e||"touchcancel"==e)if("buttonSlider"==c||W){O&&(window.clearInterval(O),O=null);W&&(Z.mobileDevice?
Z.Utils.removeEventListener(document,"touchmove",t):(Z.Utils.removeEventListener(document,"mousemove",C),Z.Utils.removeEventListener(document,"mouseup",p)));for(var e=Z.ToolbarDisplay.childNodes,f=0,g=e.length;f<g;f++){var m=e[f],r=m.id;if(r&&-1!=r.indexOf("button"))if("buttonContainer"!=r&&"buttonContainerImageFilter"!=r)Z.Utils.setButtonDefaults(m);else for(var m=m.childNodes,r=0,s=m.length;r<s;r++){var B=m[r],E=B.id;E&&-1!=E.indexOf("button")&&Z.Utils.setButtonDefaults(B)}}W=!1;Z.zooming="stop";
a.updateView()}else"buttonZoomOut"==c||"buttonZoomIn"==c?(a.zoom("stop"),0==Z.debug&&"buttonZoomOut"==c&&b.altKey&&Z.Utils.showGlobals(),"buttonZoomIn"==c&&b.altKey&&a.toggleEditMode()):"buttonPanLeft"==c||"buttonPanRight"==c?(a.pan("horizontalStop"),"buttonPanLeft"==c&&b.altKey&&a.toggleSmoothPan()):"buttonPanUp"==c||"buttonPanDown"==c?a.pan("verticalStop"):"buttonLabelScaleDown"==c||"buttonLabelScaleUp"==c?a.labelScale("stop"):"buttonFullView"==c?a.toggleFullViewMode(!0):"buttonFullViewExit"==c&&
a.toggleFullViewMode(!1);else"mouseout"==e&&("buttonZoomOut"==c||"buttonZoomIn"==c?a.zoom("stop"):"buttonPanLeft"==c||"buttonPanRight"==c?a.pan("horizontalStop"):"buttonPanUp"==c||"buttonPanDown"==c?a.pan("verticalStop"):"buttonLabelScaleDown"!=c&&"buttonLabelScaleUp"!=c||a.labelScale("stop"))}function C(a){ca=new Z.Utils.Point(a.clientX,a.clientY)}function t(a){(a=Z.Utils.getFirstTouch(a))&&(ca=new Z.Utils.Point(a.pageX,a.pageY))}function B(a){if(a=Z.Utils.event(a))if(a=Z.Utils.target(a),la=a.options[a.selectedIndex].value,
"null"!==la){a=document.getElementById("buttonImageFilterPlus");var b=document.getElementById("buttonImageFilterMinus"),c=document.getElementById("buttonImageFilterApply");"brightness"==la||"contrast"==la||"sharpness"==la||"blurriness"==la?(a.style.display="inline-block",b.style.display="inline-block",c.style.display="none"):"edges"==la||"inversion"==la||"grayscale"==la||"threshold"==la?(a.style.display="none",b.style.display="none",c.style.display="inline-block"):Z.Utils.showMessage(Z.Utils.getResource("z282"))}else a.selectedIndex=
0}var K=this,S=!1;Z.skinPath=Z.Utils.stringRemoveTrailingSlashCharacters(Z.skinPath);(new Z.NetConnector).loadXML(Z.skinPath+"/"+Z.Utils.getResource("z200"));var T,N,D,M,w=[],r=[],U=[],ha=parseInt(Z.Utils.getResource("z205"),10),W=!1,O=null,ca=null,Za=null,Ra=null,Oa,ka,Q,E,F;if(Z.imageFiltersVisible)var G,Da=[],Tb=Z.initialImageFilters,la="";this.getInitialized=function(){return S};this.getSkinArray=function(){return w};this.getSkinSizes=function(){return U};this.show=function(a){c(a)};this.setVisibility=
function(a){e(a)};this.minimize=function(a){f(a)};this.setVisibilityAnnotationPanel=function(a){Z.AnnotationPanelDisplay&&(Z.AnnotationPanelDisplay.style.display=!a||Z.measureVisible&&null===Z.editMode?"none":"inline-block")};this.toggleAnnotationPanelMode=function(b){a.clearAnnotationPanel();isInitializedAnnotationPanel=!1;a.createAnnotationPanel()};this.showProgress=function(){var a=document.getElementById("progressTextBox");a&&(a=a.style)&&(a.display="inline-block")};this.hideProgress=function(){var a=
document.getElementById("progressTextBox");a&&(a=a.style)&&(a.display="none")};this.updateProgress=function(a,c){if(Z.progressVisible){Za&&window.clearInterval(Za);var e,f=document.getElementById("progressTextBoxCenteredDiv");f&&(f=f.firstChild)&&(0==a||0==c?(f.nodeValue="llllllllll",Za=window.setInterval(b,parseInt(Z.Utils.getResource("z182")),10)):(e=Math.round(100-c/a*100),e=Math.round(e/10),f.nodeValue=Z.Utils.stringMultiply("l",e)))}};this.parseSkinXML=function(b){Z.skinMode=b.getElementsByTagName("SETUP")[0].attributes.getNamedItem("SKINMODE").nodeValue;
var e,f;1==Z.skinMode||0==Z.skinMode&&!Z.mobileDevice?(e=b.getElementsByTagName("SETUP")[0].attributes.getNamedItem("FOLDERSTANDARD").nodeValue,f="SIZESSTANDARD"):(e=b.getElementsByTagName("SETUP")[0].attributes.getNamedItem("FOLDERLARGE").nodeValue,f="SIZESLARGE");var l=b.getElementsByTagName("SETUP")[0].attributes.getNamedItem("PROGRESSCOLOR");"undefined"!==typeof l&&null!==l&&(Ra=b.getElementsByTagName("SETUP")[0].attributes.getNamedItem("PROGRESSCOLOR").nodeValue);l=[];l[l.length]=parseFloat(b.getElementsByTagName(f)[0].attributes.getNamedItem("TOOLBARW").nodeValue);
l[l.length]=parseFloat(b.getElementsByTagName(f)[0].attributes.getNamedItem("TOOLBARH").nodeValue);l[l.length]=parseFloat(b.getElementsByTagName(f)[0].attributes.getNamedItem("LOGOW").nodeValue);l[l.length]=parseFloat(b.getElementsByTagName(f)[0].attributes.getNamedItem("LOGOH").nodeValue);l[l.length]=parseFloat(b.getElementsByTagName(f)[0].attributes.getNamedItem("DIVIDERW").nodeValue);l[l.length]=parseFloat(b.getElementsByTagName(f)[0].attributes.getNamedItem("DIVIDERH").nodeValue);l[l.length]=
parseFloat(b.getElementsByTagName(f)[0].attributes.getNamedItem("BUTTONW").nodeValue);l[l.length]=parseFloat(b.getElementsByTagName(f)[0].attributes.getNamedItem("BUTTONH").nodeValue);l[l.length]=parseFloat(b.getElementsByTagName(f)[0].attributes.getNamedItem("BUTTONSPAN").nodeValue);l[l.length]=parseFloat(b.getElementsByTagName(f)[0].attributes.getNamedItem("SLIDERBUTTONW").nodeValue);l[l.length]=parseFloat(b.getElementsByTagName(f)[0].attributes.getNamedItem("SLIDERBUTTONH").nodeValue);l[l.length]=
parseFloat(b.getElementsByTagName(f)[0].attributes.getNamedItem("SLIDERTRACKW").nodeValue);l[l.length]=parseFloat(b.getElementsByTagName(f)[0].attributes.getNamedItem("SLIDERTRACKH").nodeValue);l[l.length]=parseFloat(b.getElementsByTagName(f)[0].attributes.getNamedItem("SLIDERSPAN").nodeValue);l[l.length]=parseFloat(b.getElementsByTagName(f)[0].attributes.getNamedItem("PROGRESSW").nodeValue);l[l.length]=parseFloat(b.getElementsByTagName(f)[0].attributes.getNamedItem("PROGRESSH").nodeValue);l[l.length]=
parseFloat(b.getElementsByTagName(f)[0].attributes.getNamedItem("PROGRESSFONTSIZE").nodeValue);var m,t,s;f="edit"==Z.editMode?161:"markup"==Z.editMode?152:Z.imageFiltersVisible?100:Z.tourPath||Z.slidePath?77:Z.rotationVisible?58:Z.measureVisible?51:0<Z.helpVisible?45:Z.fullScreenVisible||Z.fullPageVisible?45:Z.resetVisible?35:Z.panButtonsVisible?32:Z.sliderVisible?19:Z.minimizeVisible?14:Z.logoVisible?8:6;m=b.getElementsByTagName("FILES")[0].attributes.getNamedItem("SKIN0");null!==m&&(t=m.nodeValue);
m=b.getElementsByTagName("FILES")[0].attributes.getNamedItem("SKIN"+f.toString());null!==m&&(s=m.nodeValue);if("undefined"!==typeof t&&Z.Utils.stringValidate(t)&&"undefined"!==typeof s&&Z.Utils.stringValidate(s)){t=!1;s=0;for(f+=1;s<f;s++)m=b.getElementsByTagName("FILES")[0].attributes.getNamedItem("SKIN"+s).nodeValue,Z.Utils.stringValidate(m)?r[s]=e+"/"+m:(r[s]="null",t=!0);t&&Z.Utils.showMessage(Z.Utils.getResource("z279"));w=r;Z.ToolbarDisplay=Z.Utils.createContainerElement("div","ToolbarDisplay",
"inline-block","absolute","visible","1px","1px","0px","1px","none","0px","transparent none","0px","0px","normal");N=Z.ToolbarDisplay.style;b=parseInt(Z.Utils.getResource("z230"),10);N.zIndex=(b+1).toString();b=new Z.Utils.Graphic("toolbarBackground",Z.skinPath,r[0],"1px","1px","0px","0px");parseFloat(Z.Utils.getResource("z82"));Z.Utils.getResource("z83NOALPHA");Z.ToolbarDisplay.appendChild(b.elmt);U=l;Z.logoVisible&&(Z.Utils.stringValidate(Z.logoCustomPath)?(l=Z.Utils.cacheProofPath(Z.logoCustomPath),
l=new Z.Utils.Graphic("toolbarLogo",l,null,"1px","1px","1px","1px")):l=new Z.Utils.Graphic("toolbarLogo",Z.skinPath,r[7],"1px","1px","1px","1px"),Z.Utils.stringValidate(Z.logoLinkURL)?(b=document.createElement("a"),b.setAttribute("href",Z.logoLinkURL),b.setAttribute("target",Z.Utils.getResource("z427TARGET")),b.setAttribute("title",Z.Utils.getResource("z360")),b.setAttribute("outline","none"),b.appendChild(l.elmt),Z.ToolbarDisplay.appendChild(b)):(l.elmt.setAttribute("title",Z.Utils.getResource("z427DISPLAY")),
Z.ToolbarDisplay.appendChild(l.elmt)),0==Z.toolbarVisible||1==Z.toolbarVisible)&&(l=new Z.Utils.Graphic("logoDivider",Z.skinPath,r[8],"1px","1px","1px","1px"),Z.ToolbarDisplay.appendChild(l.elmt));l=Z.Utils.createContainerElement("div","buttonContainer","inline-block","absolute","visible","1px","1px","0px","0px","none","0px","transparent none","0px","0px","normal","default");Z.ToolbarDisplay.appendChild(l);Z.mobileDevice?Z.Utils.addEventListener(l,"touchstart",Z.Utils.preventDefault):(Z.Utils.addEventListener(l,
"mousedown",Z.Utils.preventDefault),Z.Utils.addEventListener(l,"mouseover",K.backgroundEventsHandler));b=new Z.Utils.Graphic("buttonBackground",Z.skinPath,r[0],"1px","1px","0px","0px");l.appendChild(b.elmt);Z.Utils.setOpacity(b.elmt,"0","#FBFAFA");(0!=Z.toolbarVisible&&1!=Z.toolbarVisible||Z.mobileDevice)&&Z.minimizeVisible&&(b=new Z.Utils.Button("buttonMinimize",null,Z.skinPath,r[9],r[10],r[11],"1px","1px","1px","1px","mouseover",p,"z363"),Z.ToolbarDisplay.appendChild(b.elmt),b=new Z.Utils.Button("buttonExpand",
null,Z.skinPath,r[12],r[13],r[14],"1px","1px","1px","1px","mouseover",p,"z341"),Z.ToolbarDisplay.appendChild(b.elmt));b=new Z.Utils.Button("buttonZoomOut",null,Z.skinPath,r[1],r[2],r[3],"1px","1px","1px","1px","mouseover",p,"z400");l.appendChild(b.elmt);Z.sliderVisible&&(b=new Z.Utils.Graphic("trackSlider",Z.skinPath,r[15],"1px","1px","0px","0px","z385"),l.appendChild(b.elmt),Z.Utils.addEventListener(b.elmt,"mousedown",p),Z.Utils.addEventListener(b.elmt,"touchstart",p),b=new Z.Utils.Button("buttonSlider",
null,Z.skinPath,r[17],r[18],r[19],"1px","1px","1px","1px","mouseover",p,"z385"),l.appendChild(b.elmt));b=new Z.Utils.Button("buttonZoomIn",null,Z.skinPath,r[4],r[5],r[6],"1px","1px","1px","1px","mouseover",p,"z399");l.appendChild(b.elmt);Z.panButtonsVisible&&(b=new Z.Utils.Graphic("panDivider",Z.skinPath,r[20],"1px","1px","1px","1px"),l.appendChild(b.elmt),b=new Z.Utils.Button("buttonPanLeft",null,Z.skinPath,r[21],r[22],r[23],"1px","1px","1px","1px","mouseover",p,"z370"),l.appendChild(b.elmt),b=new Z.Utils.Button("buttonPanUp",
null,Z.skinPath,r[24],r[25],r[26],"1px","1px","1px","1px","mouseover",p,"z372"),l.appendChild(b.elmt),b=new Z.Utils.Button("buttonPanDown",null,Z.skinPath,r[27],r[28],r[29],"1px","1px","1px","1px","mouseover",p,"z369"),l.appendChild(b.elmt),b=new Z.Utils.Button("buttonPanRight",null,Z.skinPath,r[30],r[31],r[32],"1px","1px","1px","1px","mouseover",p,"z371"),l.appendChild(b.elmt));Z.resetVisible&&(b=new Z.Utils.Button("buttonReset",null,Z.skinPath,r[33],r[34],r[35],"1px","1px","1px","1px","mouseover",
p,"z378"),l.appendChild(b.elmt));if(Z.fullScreenVisible||Z.fullPageVisible)null===Z.editMode&&(b=new Z.Utils.Graphic("fullViewDivider",Z.skinPath,r[36],"1px","1px","1px","1px"),l.appendChild(b.elmt)),b=new Z.Utils.Button("buttonFullViewExit",null,Z.skinPath,r[40],r[41],r[42],"1px","1px","1px","1px","mouseover",p,"z391EXIT"),l.appendChild(b.elmt),b=new Z.Utils.Button("buttonFullView",null,Z.skinPath,r[37],r[38],r[39],"1px","1px","1px","1px","mouseover",p,"z391"),l.appendChild(b.elmt);Z.measureVisible&&
null===Z.editMode&&(Z.fullScreenVisible||Z.fullPageVisible||(b=new Z.Utils.Graphic("measureDivider",Z.skinPath,r[36],"1px","1px","1px","1px"),l.appendChild(b.elmt)),null===Z.editMode&&(b=new Z.Utils.Button("buttonMeasureExit",null,Z.skinPath,r[49],r[50],r[51],"1px","1px","1px","1px","mouseover",p,"z392EXIT"),l.appendChild(b.elmt)),b=new Z.Utils.Button("buttonMeasure",null,Z.skinPath,r[46],r[47],r[48],"1px","1px","1px","1px","mouseover",p,"z392"),l.appendChild(b.elmt));Z.rotationVisible&&(b=new Z.Utils.Graphic("rotateDivider",
Z.skinPath,r[52],"1px","1px","1px","1px"),l.appendChild(b.elmt),b=new Z.Utils.Button("buttonRotateCounterwise",null,Z.skinPath,r[53],r[54],r[55],"1px","1px","1px","1px","mouseover",p,"z381"),l.appendChild(b.elmt),b=new Z.Utils.Button("buttonRotateClockwise",null,Z.skinPath,r[56],r[57],r[58],"1px","1px","1px","1px","mouseover",p,"z380"),l.appendChild(b.elmt));null!==Z.tourPath&&(b=new Z.Utils.Graphic("tourDivider",Z.skinPath,r[59],"1px","1px","1px","1px"),l.appendChild(b.elmt),b=new Z.Utils.Button("buttonTourPrior",
null,Z.skinPath,r[60],r[61],r[62],"1px","1px","1px","1px","mouseover",p,"z394"),l.appendChild(b.elmt),b=new Z.Utils.Button("buttonTourNext",null,Z.skinPath,r[63],r[64],r[65],"1px","1px","1px","1px","mouseover",p,"z393"),l.appendChild(b.elmt),b=new Z.Utils.Button("buttonTourStart",null,Z.skinPath,r[66],r[67],r[68],"1px","1px","1px","1px","mouseover",p,"z395"),l.appendChild(b.elmt),b=new Z.Utils.Button("buttonTourStop",null,Z.skinPath,r[69],r[70],r[71],"1px","1px","1px","1px","mouseover",p,"z396"),
l.appendChild(b.elmt));null!==Z.slidePath&&(b=new Z.Utils.Graphic("slideshowDivider",Z.skinPath,r[59],"1px","1px","1px","1px"),l.appendChild(b.elmt),b=new Z.Utils.Button("buttonSlideshowPrior",null,Z.skinPath,r[60],r[61],r[62],"1px","1px","1px","1px","mouseover",p,"z384"),l.appendChild(b.elmt),b=new Z.Utils.Button("buttonSlideshowNext",null,Z.skinPath,r[63],r[64],r[65],"1px","1px","1px","1px","mouseover",p,"z383"),l.appendChild(b.elmt),b=new Z.Utils.Button("buttonSlideshowStart",null,Z.skinPath,r[66],
r[67],r[68],"1px","1px","1px","1px","mouseover",p,"z386"),l.appendChild(b.elmt),b=new Z.Utils.Button("buttonSlideshowStop",null,Z.skinPath,r[69],r[70],r[71],"1px","1px","1px","1px","mouseover",p,"z387"),l.appendChild(b.elmt));if(null!==Z.tourPath||null!==Z.slidePath)b=new Z.Utils.Button("buttonAudioOn",null,Z.skinPath,r[72],r[73],r[74],"1px","1px","1px","1px","mouseover",p,"z321"),l.appendChild(b.elmt),b=new Z.Utils.Button("buttonAudioMuted",null,Z.skinPath,r[75],r[76],r[77],"1px","1px","1px","1px",
"mouseover",p,"z322"),l.appendChild(b.elmt);if(Z.imageFiltersVisible){b=new Z.Utils.Graphic("imageFilterDivider",Z.skinPath,r[78],"1px","1px","1px","1px");l.appendChild(b.elmt);b=new Z.Utils.Button("buttonImageFilterPanelHide",null,Z.skinPath,r[79],r[80],r[81],"1px","1px","1px","1px","mouseover",p,"z350");l.appendChild(b.elmt);b=new Z.Utils.Button("buttonImageFilterPanelShow",null,Z.skinPath,r[82],r[83],r[84],"1px","1px","1px","1px","mouseover",p,"z351");l.appendChild(b.elmt);b=Z.Utils.createContainerElement("div",
"buttonContainerImageFilter","none","absolute","visible","1px","1px","0px","0px","solid","1px","transparent none","0px","0px","normal","default");Z.ToolbarDisplay.appendChild(b);Z.mobileDevice||Z.Utils.addEventListener(b,"mouseover",K.backgroundEventsHandler);e=parseFloat(Z.Utils.getResource("z82"));t=Z.Utils.getResource("z83");f=Z.Utils.getResource("z83NOALPHA");t=Z.Utils.createContainerElement("div","imageFilterPanelBackground","inline-block","absolute","hidden","1px","1px","0px","0px","none","0px",
t,"0px","0px","normal",null,!0);Z.Utils.setOpacity(t,e,f);b.appendChild(t);e=Z.Utils.getResource("z425").split(",");f=Z.Utils.getResource("z426").split(",");t=0;for(s=e.length;t<s;t++)Da[Da.length]={text:e[t],value:f[t]};e=new Z.Utils.createSelectElement("imageFilterList","",Da,1,1,1,null,!0,B);b.appendChild(e);e=new Z.Utils.Button("buttonImageFilterMinus",null,Z.skinPath,r[85],r[86],r[87],"1px","1px","1px","1px","mouseover",p,"z349");b.appendChild(e.elmt);e=new Z.Utils.Button("buttonImageFilterPlus",
null,Z.skinPath,r[88],r[89],r[90],"1px","1px","1px","1px","mouseover",p,"z352");b.appendChild(e.elmt);e=new Z.Utils.Button("buttonImageFilterApply",null,Z.skinPath,r[91],r[92],r[93],"1px","1px","1px","1px","mouseover",p,"z346");b.appendChild(e.elmt);e=new Z.Utils.Graphic("imageFilterStateDivider",Z.skinPath,r[94],"1px","1px","1px","1px");b.appendChild(e.elmt);e=new Z.Utils.Button("buttonImageFilterClear",null,Z.skinPath,r[95],r[96],r[97],"1px","1px","1px","1px","mouseover",p,"z347");b.appendChild(e.elmt);
e=new Z.Utils.Button("buttonImageFiltersClearAll",null,Z.skinPath,r[98],r[99],r[100],"1px","1px","1px","1px","mouseover",p,"z347ALL");b.appendChild(e.elmt)}if(1==Z.helpVisible||3==Z.helpVisible)b=new Z.Utils.Button("buttonHelp",null,Z.skinPath,r[43],r[44],r[45],"1px","1px","1px","1px","mouseover",p,"z342"),l.appendChild(b.elmt);Z.progressVisible&&(b=Z.Utils.createContainerElement("div","progressTextBox","inline-block","absolute","hidden","1px","1px","1px","1px","none","0px","transparent none","0px",
"0px","normal",null,!0),e=U[16],l.appendChild(b),l=document.createTextNode(Z.Utils.getResource("z183")),b.appendChild(Z.Utils.createCenteredElement(l,"progressTextBoxCenteredDiv")),null===Ra&&(Ra=Z.Utils.getResource("z183COLOR")),Z.Utils.setTextNodeStyle(l,Ra,"verdana",e+"px","none","normal","normal","normal","normal","1em","left","none"),Z.Utils.disableTextInteraction(l));Z.ViewerDisplay.appendChild(Z.ToolbarDisplay);Z.toolbarW=U[0];Z.toolbarCurrentW=-1==Z.toolbarW?Z.viewerW:Z.toolbarW;Z.toolbarH=
T=U[1];K.setSizeAndPosition(Z.toolbarCurrentW,Z.toolbarH,0,1==Z.toolbarPosition?Z.viewerH-T:0);a&&a.getInitialized()&&(1==Z.toolbarVisible&&(l=Z.Utils.getElementStyle(Z.pageContainer),l=parseFloat(l.height),isNaN(l)&&(l=Z.ViewerDisplay.clientHeight),a.setSizeAndPosition(Z.viewerW,l-Z.toolbarH,0,0),a.validateXYZDefaults(!0),a.setView(Z.initialX,Z.initialY,Z.initialZ)),l=a.getZoom(),g(l),a.setDrawingColor("buttonColor0",!0));c(1==Z.toolbarVisible||2==Z.toolbarVisible||4==Z.toolbarVisible||7==Z.toolbarVisible);
Z.Utils.addEventListener(Z.ToolbarDisplay,"mouseover",Z.Utils.stopPropagation);S=!0;Z.Utils.validateCallback("toolbarInitialized");Z.Viewport&&Z.Viewport.getInitialized()&&Z.Toolbar&&Z.Toolbar.getInitialized()&&Z.Navigator&&Z.Navigator.getInitialized()&&Z.Utils.validateCallback("viewerInitialized")}else Z.Utils.showMessage(Z.Utils.getResource("z278"))};this.setSizeAndPosition=function(b,c,e,f){"undefined"===typeof b||null===b?b=0<Z.toolbarVisible?Z.toolbarCurrentW:0:Z.toolbarCurrentW=b;if("undefined"===
typeof c||null===c)c=0<Z.toolbarVisible?T:0;if("undefined"===typeof e||null===e)e=0;if("undefined"===typeof f||null===f)f=1==Z.toolbarPosition?Z.viewerH-T:0;N=Z.ToolbarDisplay.style;N.width=b+"px";N.height=c+"px";N.left=e+"px";N.top=f+"px";var g=b,m=c,p=U[2],r=U[3],t=U[4],s=U[5],B=U[6],w=U[7],x=U[8],C=U[9],K=U[10],S=U[11],O=U[12],W=U[13],Da=U[14],ca=U[15],y=0,la=(m-r)/2+1,ha=(m-s)/2,wa=(m-w)/2,Va=1.3*wa,Ra=wa+4,Za=wa+2,nf=1==Z.logoVisible?0:x/2,Ab=1==Z.logoVisible?0:x/2,Bb=x-(B-t),Ea=2,jb=0;Z.panButtonsVisible&&
(Ea+=4,jb+=1);Z.resetVisible&&(Ea+=1);if(Z.fullScreenVisible||Z.fullPageVisible)Ea+=1,jb+=1;Z.helpVisible&&(Ea+=1,Z.fullScreenVisible||Z.fullPageVisible||(jb+=1));Z.measureVisible&&(Z.fullScreenVisible||Z.fullPageVisible||(jb+=1),Ea+=1);Z.rotationVisible&&(Ea+=2,jb+=1);if(null!==Z.tourPath||null!==Z.slidePath)Ea+=3,jb+=1,Z.audioContent&&(Ea+=1);Z.imageFiltersVisible&&(Ea+=1,jb+=1);var Lb=Ea*x+jb*Bb;Z.sliderVisible&&(Lb+=W);Oa=ka=Q=E=!1;var Vc=(1==Z.logoVisible?p+2:0)+(0!=Z.toolbarVisible&&1!=Z.toolbarVisible&&
0!=Z.minimizeVisible?x:0),rf=1==Z.panButtonsVisible?4*x+Bb:0,sf=1==Z.resetVisible?x:0,Tc=Vc+20+Lb+20+Da;Tc>g&&(Oa=!0,Tc-W>g&&(ka=!0,Tc-W-Da>g&&(Q=!0,Tc-W-Da-Vc>g&&(F=!0,Tc-W-Da-Vc-sf>g&&(E=!0,Lb-=rf),Lb-=sf),Vc=0),Da=0),Lb-=W);var gf=(g-Lb)/2-20+3,Jc=document.getElementById("toolbarBackground");Jc&&(Jc.style.width=g+"px",Jc.style.height=m+"px",Jc.firstChild.style.width=g+"px",Jc.firstChild.style.height=m+"px");var nc=document.getElementById("buttonContainer");nc&&(nc.style.width=Lb+40+"px",nc.style.height=
m+"px",nc.style.left=gf+"px");var $a=document.getElementById("buttonBackground");$a&&($a.style.width=g+"px",Z.Utils.graphicSize($a,parseFloat(nc.style.width),parseFloat(nc.style.height)),$a.style.left="0px");var Wd=document.getElementById("toolbarLogo");if(Wd){var md=Wd.style;if(md)if(Q)md.display="none";else{md.display="inline-block";Z.Utils.graphicSize(Wd,p,r);md.left=y+"px";md.top=la+"px";var y=y+(p+2),Xd=document.getElementById("logoDivider");if(Xd){Z.Utils.graphicSize(Xd,t,s);var td=Xd.style;
td.left=y+"px";td.top=ha+"px"}}}if(0!=Z.toolbarVisible&&1!=Z.toolbarVisible){var Ub=document.getElementById("buttonMinimize"),Yd=document.getElementById("buttonExpand");if(Ub&&Yd){var dc=Ub.style,nd=Yd.style;dc&&nd&&(Q?(dc.display="none",nd.display="none"):(dc.display="inline-block",nd.display="inline-block",Z.Utils.buttonSize(Ub,B,w),Z.Utils.buttonSize(Yd,B,w),dc.left=y+nf+"px",dc.top=Va+"px",nd.left=y+Ab+"px",nd.top=Va+"px"))}}var y=20,ib=document.getElementById("buttonZoomOut");if(ib){Z.Utils.buttonSize(ib,
B,w);var qf=ib.style;qf.left=y+"px";qf.top=wa+"px";y+=x}D=document.getElementById("trackSlider");M=document.getElementById("buttonSlider");if(D&&M){var Uc=D.style,ld=M.style;Uc&&ld&&(Oa?(Uc.display="none",ld.display="none"):(Uc.display="inline-block",ld.display="inline-block",Z.Utils.graphicSize(D,S,O),Uc.left=y-2+"px",Uc.top=Ra+"px",Z.Utils.buttonSize(M,C,K),ld.left=parseFloat(Uc.left)+"px",ld.top=Za+"px",y+=W))}var Ae=document.getElementById("buttonZoomIn");if(Ae){Z.Utils.buttonSize(Ae,B,w);var pf=
Ae.style;pf.left=y+"px";pf.top=wa+"px";y+=x+1}if(!E){var ze=document.getElementById("panDivider");if(ze){Z.Utils.graphicSize(ze,t,s);var of=ze.style;of.left=y+"px";of.top=ha+"px";var y=y+Bb,De=document.getElementById("buttonPanLeft");if(De){Z.Utils.buttonSize(De,B,w);var fc=De.style;fc.left=y+"px";fc.top=wa+"px";y+=x}var gc=document.getElementById("buttonPanUp");if(gc){Z.Utils.buttonSize(gc,B,w);var Ke=gc.style;Ke.left=y+"px";Ke.top=wa+"px";y+=x}var Xc=document.getElementById("buttonPanDown");if(Xc){Z.Utils.buttonSize(Xc,
B,w);var Me=Xc.style;Me.left=y+"px";Me.top=wa+"px";y+=x}var Ne=document.getElementById("buttonPanRight");if(Ne){Z.Utils.buttonSize(Ne,B,w);var vf=Ne.style;vf.left=y+"px";vf.top=wa+"px";y+=x}}}if(!F){var He=document.getElementById("buttonReset");if(He){Z.Utils.buttonSize(He,B,w);var tf=He.style;tf.left=y+"px";tf.top=wa+"px";y+=x+1}}var Fe=document.getElementById("fullViewDivider");if(Fe){Z.Utils.graphicSize(Fe,t,s);var uf=Fe.style;uf.left=y+"px";uf.top=ha+"px";y+=Bb}var Oe=document.getElementById("buttonFullViewExit");
if(Oe){Z.Utils.buttonSize(Oe,B,w);var ec=Oe.style;ec.left=y+"px";ec.top=wa+"px";ec.display=Z.fullView?"inline-block":"none"}var zc=document.getElementById("buttonFullView");if(zc){Z.Utils.buttonSize(zc,B,w);var $d=zc.style;$d.left=y+"px";$d.top=wa+"px";y+=x+1;$d.display=Z.fullView?"none":"inline-block"}var Kc=document.getElementById("measureDivider");if(Kc){Z.Utils.graphicSize(Kc,t,s);var xc=Kc.style;xc.left=y+"px";xc.top=ha+"px";y+=Bb}if(null===Z.editMode){var ae=document.getElementById("buttonMeasureExit");
if(ae){Z.Utils.buttonSize(ae,B,w);var be=ae.style;be.left=y+"px";be.top=wa+"px";be.display="measure"==Z.labelMode?"inline-block":"none"}}if(Ub=document.getElementById("buttonMeasure"))Z.Utils.buttonSize(Ub,B,w),dc=Ub.style,dc.left=y+"px",dc.top=wa+"px",y+=x+1,dc.display="measure"==Z.labelMode?"none":"inline-block";var Ic=document.getElementById("rotateDivider");if(Ic){Z.Utils.graphicSize(Ic,t,s);var Pe=Ic.style;Pe.left=y+"px";Pe.top=ha+"px";var y=y+Bb,ce=document.getElementById("buttonRotateCounterwise");
if(ce){Z.Utils.buttonSize(ce,B,w);var Lc=ce.style;Lc.left=y+"px";Lc.top=wa+"px";y+=x}var ud=document.getElementById("buttonRotateClockwise");if(ud){Z.Utils.buttonSize(ud,B,w);var rb=ud.style;rb.left=y+"px";rb.top=wa+"px";y+=x+1}}if(null!==Z.tourPath){var Mc=document.getElementById("tourDivider");if(Mc){Z.Utils.graphicSize(Mc,t,s);var Ac=Mc.style;Ac.left=y+"px";Ac.top=ha+"px";var y=y+Bb,oc=document.getElementById("buttonTourPrior");if(oc){Z.Utils.buttonSize(oc,B,w);var db=oc.style;db.left=y+"px";db.top=
wa+"px";y+=x+1}var ab=document.getElementById("buttonTourNext");if(ab){Z.Utils.buttonSize(ab,B,w);var Yc=ab.style;Yc.left=y+"px";Yc.top=wa+"px";y+=x+1}var Qe=document.getElementById("buttonTourStop");if(Qe){Z.Utils.buttonSize(Qe,B,w);var Re=Qe.style;Re.left=y+"px";Re.top=wa+"px";Re.display=Z.tourPlaying?"inline-block":"none"}var de=document.getElementById("buttonTourStart");if(de){Z.Utils.buttonSize(de,B,w);var $c=de.style;$c.left=y+"px";$c.top=wa+"px";y+=x+1;$c.display=Z.tourPlaying?"none":"inline-block"}}}else if(null!==
Z.slidePath){var Cd=document.getElementById("slideshowDivider");if(Cd){Z.Utils.graphicSize(Cd,t,s);var Ld=Cd.style;Ld.left=y+"px";Ld.top=ha+"px";var y=y+Bb,Dd=document.getElementById("buttonSlideshowPrior");if(Dd){Z.Utils.buttonSize(Dd,B,w);var Se=Dd.style;Se.left=y+"px";Se.top=wa+"px";y+=x+1}var ee=document.getElementById("buttonSlideshowNext");if(ee){Z.Utils.buttonSize(ee,B,w);var Ed=ee.style;Ed.left=y+"px";Ed.top=wa+"px";y+=x+1}var fe=document.getElementById("buttonSlideshowStop");if(fe){Z.Utils.buttonSize(fe,
B,w);var Ue=fe.style;Ue.left=y+"px";Ue.top=wa+"px";Ue.display=Z.slideshowPlaying?"inline-block":"none"}var gd=document.getElementById("buttonSlideshowStart");if(gd){Z.Utils.buttonSize(gd,B,w);var ge=gd.style;ge.left=y+"px";ge.top=wa+"px";y+=x+1;ge.display=Z.slideshowPlaying?"none":"inline-block"}}}if(null!==Z.tourPath||null!==Z.slidePath){var Sd=document.getElementById("buttonAudioMuted");if(Sd){Z.Utils.buttonSize(Sd,B,w);var he=Sd.style;he.left=y+"px";he.top=wa+"px";he.display="none"}var Na=document.getElementById("buttonAudioOn");
if(Na){Z.Utils.buttonSize(Na,B,w);var xa=Na.style;xa.left=y+"px";xa.top=wa+"px";y+=x+1;xa.display="none"}a.initializeAudioMuteButtons()}if(Z.imageFiltersVisible){var We=document.getElementById("imageFilterDivider");if(We){Z.Utils.graphicSize(We,t,s);var Xe=We.style;Xe.left=y+"px";Xe.top=ha+"px";var y=y+Bb,qd=document.getElementById("buttonImageFilterPanelHide");if(qd){Z.Utils.buttonSize(qd,B,w);var bf=qd.style;bf.left=y+"px";bf.top=wa+"px";bf.display=Tb?"inline-block":"none"}var Ze=document.getElementById("buttonImageFilterPanelShow");
if(Ze){Z.Utils.buttonSize(Ze,B,w);var $e=Ze.style;$e.left=y+"px";$e.top=wa+"px";y+=x+1;$e.display=Tb?"none":"inline-block"}var bb=15,ed=U[6],jc=U[7],k=U[8],Od=U[4],Ie=U[5],cd=k-(ed-Od),pe=(jc-Ie)/2,Ec=parseInt(Z.Utils.getResource("z137"),10),Sa=G=Math.round(Ec+4*k+2*cd+30-4),Pd=Math.round(jc+24),Qd=document.getElementById("buttonImageFilterPanelShow"),dd=document.getElementById("buttonContainerImageFilter"),Ja=document.getElementById("imageFilterList");if(dd&&Qd&&Ja){var Ka=parseFloat(Qd.style.left),
Cb=parseFloat(Qd.parentNode.style.left),le=dd.style;le.width=Sa+"px";le.height=Pd+"px";le.left=Ka+Cb+k-Sa+"px";le.top=-(Pd+5)+"px";var mc=document.getElementById("imageFilterPanelBackground");if(mc){var df=mc.style;df.width=Sa+"px";df.height=Pd+"px"}var Jd=Ja.style;Jd.width=Ec+"px";Jd.left="15px";Jd.top="10px";var bb=bb+(Ec+cd+2),ia=document.getElementById("buttonImageFilterMinus");if(ia){Z.Utils.buttonSize(ia,ed,jc);var $b=ia.style;$b.left=bb+"px";$b.top="12px";bb+=k}var Db=document.getElementById("buttonImageFilterPlus");
if(Db){Z.Utils.buttonSize(Db,ed,jc);var ja=Db.style;ja.left=bb+"px";ja.top="12px";bb+=k}var J=document.getElementById("buttonImageFilterApply");if(J){Z.Utils.buttonSize(J,ed,jc);var Kd=J.style;ja?Kd.left=parseFloat(ja.left)+"px":(Kd.left=bb+"px",bb+=k);Kd.top="12px";J.style.display="none"}var ba=document.getElementById("imageFilterStateDivider");if(ba){Z.Utils.graphicSize(ba,Od,Ie);var da=ba.style;da.left=bb+"px";da.top=12+pe+"px";bb+=cd}var Xb=document.getElementById("buttonImageFilterClear");if(Xb){Z.Utils.buttonSize(Xb,
ed,jc);var me=Xb.style;me.left=bb+"px";me.top="12px";bb+=k+1}var na=document.getElementById("buttonImageFiltersClearAll");if(na){Z.Utils.buttonSize(na,ed,jc);var ua=na.style;ua.left=bb+"px";ua.top="12px"}}}}if(1==Z.helpVisible||3==Z.helpVisible){var La=document.getElementById("buttonHelp");if(La){Z.Utils.buttonSize(La,B,w);var ne=La.style;ne.left=y+"px";ne.top=wa+"px"}}var vb=document.getElementById("progressTextBox");if(vb){var Yb=vb.style;Yb&&(ka?Yb.display="none":(Yb.display="inline-block",Yb.width=
Da+"px",Yb.height=ca+"px",Yb.left=g-parseFloat(nc.style.left)-parseFloat(Yb.width)+"px",Yb.top=(m-parseFloat(Yb.height))/2+"px"))}};this.syncSliderToViewport=function(a){g(a)};this.z457=function(a){p(a)};this.backgroundEventsHandler=function(a){a=Z.Utils.event(a);if(a=Z.Utils.relatedTarget(a)){var b=a.parentNode;b&&(b=b.id)&&(W||-1==b.indexOf("button")||-1!=b.indexOf("buttonContainer")||Z.Utils.setButtonDefaults(a.parentNode))}};this.positionButtonBorder=function(a){if("buttonColor"==a.substr(0,11))var b=
document.getElementById("buttonBorderSm");else if("buttonViewMode"==a||"buttonEditModeFreehand"==a||"buttonEditModeText"==a||"buttonEditModeIcon"==a||"buttonEditModeRectangle"==a||"buttonEditModePolygon"==a||"buttonEditModeMeasure"==a)b=document.getElementById("buttonBorderLg");var c=document.getElementById(a);b&&c&&("buttonClearAll"==a&&(c=document.getElementById("buttonViewMode")),a=b.style,c=c.style,a.left=parseFloat(c.left)-2+"px",a.top=parseFloat(c.top)-2+"px")};this.imageFilterPanelShow=function(){var a=
document.getElementById("imageFilterPanelBackground"),b=document.getElementById("buttonContainerImageFilter"),c=document.getElementById("buttonImageFilterPanelShow"),e=document.getElementById("buttonImageFilterPanelHide");a&&b&&(a.style.width=G+"px",b.style.display="inline-block",c.style.display="none",e.style.display="inline-block");Tb=!0};this.imageFilterPanelHide=function(){var a=document.getElementById("imageFilterPanelBackground"),b=document.getElementById("buttonContainerImageFilter"),c=document.getElementById("buttonImageFilterPanelShow"),
e=document.getElementById("buttonImageFilterPanelHide");a&&b&&(a.style.width="0px",b.style.display="none",c.style.display="inline-block",e.style.display="none");Tb=!1};this.addCounterToImageFilterList=function(a,b){var c=document.getElementById("imageFilterList"),e=Z.Utils.arrayIndexOfObjectValue(Da,"value",a);if(-1!=e){var f=c.options[e].text,f=isNaN(f.substring(f.length-1,f.length))?":  ":",";c.options[e].text+=f+(b+1).toString()}};this.removeLastCounterFromImageFilterList=function(a){for(var b=
document.getElementById("imageFilterList"),c,e=a.toString(),f=0,g=b.options.length;f<g;f++)a=b.options[f].text.length,b.options[f].text.substring(a-1)==e&&(c=b.options[f].text.substring(a-2,a-1),c=","==c?2:3,b.options[f].text=b.options[f].text.substring(0,a-c))};this.removeAllCountersFromImageFilterList=function(){for(var a=document.getElementById("imageFilterList"),b=a.options.length=0,c=Da.length;b<c;b++)a.options[a.options.length]=new Option(Da[b].text,Da[b].value)}};
Z.ZoomifyNavigator=function(a){function b(c,e){"ZoomifyImageFile"==Z.tileSource&&(G=e);if(0!=G.width&&0!=G.height){Z.NavigatorDisplay=Z.Utils.createContainerElement("div","NavigatorDisplay","inline-block","absolute","hidden",Da+"px",Tb+"px",la+"px",h+"px","solid","1px","transparent none","0px","0px","normal",null,!0);O=Z.NavigatorDisplay;ca=O.style;Z.slidePath&&Z.Utils.setOpacity(O,0);var f=parseInt(Z.Utils.getResource("z230"),10);ca.zIndex=(f+2).toString();var f=parseFloat(Z.Utils.getResource("z82")),
m=Z.Utils.getResource("z83"),t=Z.Utils.getResource("z83NOALPHA"),m=Z.Utils.createContainerElement("div","navigatorBackground","inline-block","absolute","hidden",Da+"px",Tb+"px","0px","0px","none","0px",m,"0px","0px","normal",null,!0);Z.Utils.setOpacity(m,f,t);Z.NavigatorDisplay.appendChild(m);Za=m;Ra=Za.style;f=Z.Utils.createContainerElement("div","navigatorImageContainer","inline-block","absolute","hidden",Da+"px",Tb+"px","0px","0px","none","0px","transparent none","0px","0px","normal",null,!0);
f.appendChild(G);G.alt=Z.Utils.getResource("z439");Z.NavigatorDisplay.appendChild(f);Oa=f;ka=Oa.style;Q=G;f=Q.width;t=Q.height;m=Z.Utils.createContainerElement("div","navigatorRectangle","inline-block","absolute","hidden",Da+1+"px",Tb+1+"px",la+"px",h+"px","solid","1px","transparent none","0px","0px","normal",null,!0);m.style.borderColor=Z.Utils.stringValidateColorValue(Z.navigatorRectangleColor);Z.NavigatorDisplay.appendChild(m);E=m;F=E.style;Z.ViewerDisplay.appendChild(Z.NavigatorDisplay);g(Da,
Tb,la,h,ma,f,t);p(1==Z.navigatorVisible||2==Z.navigatorVisible);Z.mobileDevice?(Z.Utils.addEventListener(O,"touchstart",M),Z.Utils.addEventListener(O,"touchmove",w),Z.Utils.addEventListener(O,"touchend",r),Z.Utils.addEventListener(O,"touchcancel",U)):(Z.Utils.addEventListener(O,"mouseover",Z.Utils.stopPropagation),Z.Utils.addEventListener(O,"mousedown",T));ha=!0;Z.Utils.validateCallback("navigatorInitialized");a&&a.getInitialized()&&Z.Toolbar&&Z.Toolbar.getInitialized()&&Z.Navigator&&Z.Navigator.getInitialized()&&
Z.Utils.validateCallback("viewerInitialized");x()}else window.setTimeout(function(){b(c,e)},100)}function c(b){"ZoomifyImageFile"==Z.tileSource?ga=a.formatTilePath(0,0,0):"ZoomifyImageFolder"==Z.tileSource?ga=Z.Utils.cacheProofPath(Z.imagePath+"/TileGroup0/0-0-0."+Z.tileType):"ZoomifyPFFFile"==Z.tileSource?ga=a.formatTilePath(0,0,0):"ImageServer"==Z.tileSource&&(ga=a.formatTilePath(0,0,0));G=null;G=new Image;G.onload=b;G.onerror=S;"offsetLoading"!=ga?"ZoomifyImageFile"==Z.tileSource?(new Z.NetConnector).loadImage(ga,
Z.Utils.createCallback(null,b),"navigator"):G.src=ga:window.setTimeout(function(){c(b)},100)}function e(a,b){if(Z.NavigatorDisplay)if(Z.slidePath&&Z.Utils.setOpacity(Z.NavigatorDisplay,0),"ZoomifyImageFile"==Z.tileSource&&(G=b),Oa&&G&&0<G.width&&0<G.height){var c=G.width,f=G.height;Oa.appendChild(G);Q=Z.NavigatorDisplay.childNodes[1].firstChild;g(Da,Tb,la,h,ma,c,f);c=Z.ToolbarDisplay&&"inline-block"==Z.ToolbarDisplay.style||"undefined"!==typeof slideList&&null!==slideList&&"visible"==slideList.style.visibility;
p((1==Z.navigatorVisible||2==Z.navigatorVisible)&&c);c=parseInt(Z.Utils.getResource("z230"),10);Z.NavigatorDisplay.style.zIndex=(c+2).toString();x()}else window.setTimeout(function(){e()},100)}function f(){ha&&(W&&(window.clearInterval(W),W=null),O&&ca&&Za&&Ra&&Oa&&ka&&Q&&E&&F||(O=Z.NavigatorDisplay,ca=O.style,Za=Z.NavigatorDisplay.firstChild,Ra=Za.style,Oa=Z.NavigatorDisplay.childNodes[1],ka=Oa.style,Q=Z.NavigatorDisplay.childNodes[1].firstChild,E=Z.NavigatorDisplay.childNodes[2],F=E.style))}function g(a,
b,c,e,f,g,h){f||(f=ma);if("undefined"===typeof a||null===a)a=Z.navigatorW;if("undefined"===typeof b||null===b)b=Z.navigatorH;if("undefined"===typeof c||null===c)c=0;if("undefined"===typeof e||null===e)e=0;O||(O=Z.NavigatorDisplay);ca||(ca=O.style);Q=O.childNodes[1].firstChild;0==Q.width&&"undefined"!==g&&null!==g&&(Q.width=g);0==Q.height&&"undefined"!==h&&null!==h&&(Q.height=h);O&&ca&&Q&&(f&&(a=1,a=0==f?Z.viewerW/Z.viewerH:Q.width/Q.height,a*=b),ca.width=a+"px",ca.height=b+"px",ca.left=c+"px",ca.top=
e+"px",m(a,b))}function m(a,b){Q||(Q=Z.NavigatorDisplay.childNodes[1].firstChild);Q&&0!=Q.width&&0!=Q.height?(Ra||(Ra=Z.NavigatorDisplay.firstChild.style),ka||(ka=Z.NavigatorDisplay.childNodes[1].style),Ra&&ka&&(Ra.width=a+"px",Ra.height=b+"px",s(a,b),ka.width=Q.width+"px",ka.height=Q.height+"px",ka.left=(a-Q.width)/2+"px",ka.top=(b-Q.height)/2+"px",x())):window.setTimeout(function(){m(a,b)},100)}function s(a,b){Q||(Q=Z.NavigatorDisplay.childNodes[1].firstChild);if(Q){var c=Q.width,e=Q.height,f=c/
e,g=a/c,h=b/e;g<=h?(c=a,e=a/f,navImageT=(b-a/c*e)/2):h<g&&(e=b,c=b*f,navImageL=(a-b/e*c)/2);Q.width=c;Q.height=e}}function p(a){ca||(ca=Z.NavigatorDisplay.style);ca&&(ca.display=a?"inline-block":"none")}function x(){if(a&&a.getInitialized()){t();C();var b=a.calculateCurrentCenterCoordinates();B(b)}}function C(){if(Q&&F){var b=Q.width/Z.imageW,c=Q.height/Z.imageH,e=a.getZoom(),c=Z.viewerH*c/e;F.width=Z.viewerW*b/e+"px";F.height=c+"px"}}function t(){ka||(ka=Z.NavigatorDisplay.childNodes[1].style);if(ka){var b=
a.getRotation();Z.Utils.rotateElement(ka,b,!0)}}function B(a){if(Q&&F&&ka){if("undefined"===typeof a||null===a||0==a.x&&0==a.y)a=new Z.Utils.Point(Z.imageX,Z.imageY);if("undefined"===typeof z||null===z)z=Z.imageZ;var b=Z.imageR;0>b&&(b+=360);var c=parseFloat(Q.width),e=parseFloat(Q.height),b=Z.Utils.rotatePoint(c/Z.imageW*a.x-c/2,e/Z.imageH*a.y-e/2,-b);a=b.x-parseFloat(F.width)/2;c=b.y-parseFloat(F.height)/2;b=parseFloat(ca.width)/2;c=parseFloat(ca.height)/2+c-1;F.left=b+a+"px";F.top=c+"px"}}function K(){if(Q&&
F&&ka){if("undefined"===typeof z||null===z)z=Z.imageZ;var b=Z.imageR;0>b&&(b+=360);var c=parseFloat(F.left),e=parseFloat(F.top),f=parseFloat(ca.width)/2,g=parseFloat(ca.height)/2,e=e-g,c=c-f+parseFloat(F.width)/2,f=e+parseFloat(F.height)/2,b=Z.Utils.rotatePoint(c,f,b),c=parseFloat(Q.width),f=parseFloat(Q.height),e=c/Z.imageW,b=new Z.Utils.Point((b.x+c/2)/e,(b.y+f/2)/e);a.syncViewportToNavigator(b)}}function S(){Z.Utils.showMessage(Z.Utils.getResource("z271"))}function T(b){Z.interactivityOff||(a.zoomAndPanAllStop(!1,
!0),O&&E&&F&&(b=Z.Utils.event(b),E.mouseXPrior=b.clientX,E.mouseYPrior=b.clientY,dragPtStart=new Z.Utils.Point(b.clientX,b.clientY),Z.Utils.addEventListener(O,"mousemove",N),Z.Utils.addEventListener(O,"mouseup",D),Z.Utils.addEventListener(document,"mouseup",D)))}function N(a){if(!Z.interactivityOff&&E&&F){var b=parseFloat(F.left),c=parseFloat(F.top);F.left=b+(a.clientX-E.mouseXPrior)+"px";F.top=c+(a.clientY-E.mouseYPrior)+"px";E.mouseXPrior=a.clientX;E.mouseYPrior=a.clientY;K();return!1}}function D(b){if(!Z.interactivityOff&&
O&&E&&F){document.mousemove=null;document.mouseup=null;Z.Utils.removeEventListener(O,"mousemove",N);Z.Utils.removeEventListener(O,"mouseup",D);Z.Utils.removeEventListener(document,"mouseup",D);b=Z.Utils.event(b);var c=new Z.Utils.Point(b.clientX,b.clientY);4>Z.Utils.calculatePointsDistance(dragPtStart.x,dragPtStart.y,c.x,c.y)&&(c=Z.Utils.getElementPosition(Z.NavigatorDisplay),F.left=b.clientX-c.x-parseFloat(F.width)/2+"px",F.top=b.clientY-c.y-parseFloat(F.height)/2+"px");K();a.updateView()}}function M(a){!Z.interactivityOff&&
(a.preventDefault(),O&&E&&F&&(a=Z.Utils.getFirstTouch(a)))&&(a=new Z.Utils.Point(a.pageX,a.pageY),dragPtStart=new Z.Utils.Point(a.x,a.y),E.mouseXPrior=a.x,E.mouseYPrior=a.y)}function w(a){if(!Z.interactivityOff&&(a.preventDefault(),Z.mousePan)){if(E&&F&&(a=Z.Utils.getFirstTouch(a))){a=new Z.Utils.Point(a.pageX,a.pageY);var b=parseFloat(F.left),c=parseFloat(F.top);F.left=b+(a.x-E.mouseXPrior)+"px";F.top=c+(a.y-E.mouseYPrior)+"px";E.mouseXPrior=a.x;E.mouseYPrior=a.y;K()}return!1}}function r(b){if(!Z.interactivityOff&&
O&&E&&F){if(b=Z.Utils.getFirstTouch(b)){b=new Z.Utils.Point(b.pageX,b.pageY);var c=new Z.Utils.Point(b.x,b.y);Z.Utils.calculatePointsDistance(dragPtStart.x,dragPtStart.y,c.x,c.y)<(Z.mobileDevice?6:3)&&(c=Z.Utils.getElementPosition(Z.NavigatorDisplay),F.left=b.x-c.x-parseFloat(F.width)/2+"px",F.top=b.y-c.y-parseFloat(F.height)/2+"px")}K();a.updateView()}}function U(b){if(!Z.interactivityOff&&O&&E&&F){if(b=Z.Utils.getFirstTouch(b)){b=new Z.Utils.Point(b.pageX,b.pageY);var c=new Z.Utils.Point(b.x,b.y);
Z.Utils.calculatePointsDistance(dragPtStart.x,dragPtStart.y,c.x,c.y)<(Z.mobileDevice?6:3)&&(c=Z.Utils.getElementPosition(Z.NavigatorDisplay),F.left=b.x-c.x-parseFloat(F.width)/2+"px",F.top=b.y-c.y-parseFloat(F.height)/2+"px")}K();a.updateView()}}var ha=!1,W,O,ca,Za,Ra,Oa,ka,Q,E,F,G,Da=Z.navigatorW,Tb=Z.navigatorH,la=Z.navigatorL,h=Z.navigatorT,ma=Z.navigatorFit,ga;c(b);this.z556=function(a,c){b(a,c)};this.setImage=function(a){Oa&&(Oa.innerHTML="");c(e)};this.getInitialized=function(){return ha};this.setVisibility=
function(a){p(a)};this.syncToViewport=function(){x()};this.z657=function(){C()};this.z659=function(){t()};this.z658=function(a){B(a)};this.z682=function(){ha?f():W=window.setInterval(f,300)};this.setSizeAndPosition=function(a,b,c,e,f,h,m){g(a,b,c,e,f,h,m)}};
Z.ZoomifyRuler=function(a){function b(a,b,c,e){if("undefined"===typeof a||null===a)a=Z.rulerW;if("undefined"===typeof b||null!==b)b=Z.rulerH;if("undefined"===typeof c||null!==c)c=-1==Z.rulerL&&Z.Navigator?Z.navigatorL:Z.rulerL;if("undefined"===typeof e||null!==e)e=-1==Z.rulerT&&Z.Navigator?Z.navigatorT+Z.navigatorH+1:Z.rulerT;p.width=a+"px";p.height=b+"px";p.left=c+"px";p.top=e+"px"}function c(a){p||(p=Z.RulerDisplay.style);p&&(p.display=a?"inline-block":"none")}function e(){var b=a.getZoom(),c="pixels"==
Z.units?1:5;if(r){magnificationList.visibility="visible";var e;e=0!=W?W*b:100*b;1>e?Math.round(100*e):Math.round(e)}e=0;for(var f=Oa.length;e<f;e++)Oa[e].symbol==Z.units&&(ka=e);Ra=null!==Za&&0!=Za?Za:null!==ca&&0!=ca?Z.imageW/ca:1;b=Z.Utils.roundToFixed(Q/Ra/b,c);T.firstChild.nodeValue=b.toString();M.visibility="visible";D.firstChild.nodeValue="um"!=Oa[ka].symbol?Oa[ka].symbol:"\u03bcm"}function f(b){if(r){var c=Math.round(100*a.getZoom()),c="%",e=Math.round(100*a.getZoom())==Math.round(1E3*a.getZoom())/
1E3*100?"":"~";1==Z.rulerListType&&0!=W&&(c=100*a.getZoom()*W/100,newMagRounded=Math.round(c),c="x");e=newMagRounded.toString()+c+e;if(b){for(b=insertIndex=0;newMagRounded>O[b].value;)b++,insertIndex=b;if(newMagRounded==O[insertIndex].value)Z.Utils.updateSelectElement(w,O);else{var f=Z.Utils.arrayClone("magnifications",O,f),f=Z.Utils.arraySplice(f,insertIndex,0,{text:e,value:newMagRounded.toString()});Z.Utils.updateSelectElement(w,f)}w.selectedIndex=insertIndex}else w.options[0]=new Option(e,newMagRounded.toString()),
w.selectedIndex=0}}function g(b){var c=0;if(b=Z.Utils.event(b))b=Z.Utils.target(b),c=parseInt(b.options[b.selectedIndex].value,10);isNaN(c)||a.zoomAndPanToView(a.viewX,a.viewY,(1==Z.rulerListType?100*c/W:c)/100)}var m=!1,s,p,x,C,t,B,K,S,T,N,D,M,w,r;Z.Utils.getResource("z442");var U=Z.Utils.getResource("z441"),ha=Z.Utils.getResource("z440"),W=Z.sourceMagnification,O,ca=Z.unitsPerImage,Za=Z.pixelsPerUnit,Ra=1,Oa=[],ka=-1,Q=1;(function(){Z.RulerDisplay=Z.Utils.createContainerElement("div","RulerDisplay",
"inline-block","absolute","hidden","1px","1px","0px","0px","solid","1px","transparent none","0px","0px","normal");s=Z.RulerDisplay;p=s.style;var E=parseFloat(Z.Utils.getResource("z82")),F=Z.Utils.getResource("z83"),G=Z.Utils.getResource("z83NOALPHA"),F=Z.Utils.createContainerElement("div","rulerBackground","inline-block","absolute","hidden","1px","1px","0px","0px","none","0px",F,"0px","0px","normal",null,!0);Z.Utils.setOpacity(F,E,G);Z.RulerDisplay.appendChild(F);x=F;C=x.style;E=Z.Utils.getResource("z198");
G=Z.Utils.createContainerElement("div","rulerScaleBar","inline-block","absolute","hidden","1px","1px","0px","0px","none","0px",E,"0px","0px","normal",null,!0);Z.RulerDisplay.appendChild(G);t=G;B=t.style;G=parseInt(Z.Utils.getResource("z230"),10);B.zIndex=(G+3).toString();G=Z.Utils.createContainerElement("div","rulerScaleBarNotchL","inline-block","absolute","hidden","1px","1px","0px","0px","none","0px",E,"0px","0px","normal",null,!0);Z.RulerDisplay.appendChild(G);rSBNL=G;rsbnlS=rSBNL.style;E=Z.Utils.createContainerElement("div",
"rulerScaleBarNotchR","inline-block","absolute","hidden","1px","1px","0px","0px","none","0px",E,"0px","0px","normal",null,!0);Z.RulerDisplay.appendChild(E);rSBNR=E;rsbnrS=rSBNR.style;E=parseInt(Z.Utils.getResource("z194"),10);G=Z.Utils.createContainerElement("div","errorTextBox","inline-block","absolute","hidden","1px","1px","0px","0px","none","0px","transparent none","0px","0px","nowrap",null,!0);F=document.createTextNode("");G.appendChild(F);Z.Utils.setTextNodeStyle(F,"black","verdana",E+"px","none",
"normal","normal","normal","normal","1em","center","none");Z.RulerDisplay.appendChild(G);K=G;S=K.style;G=Z.Utils.createContainerElement("div","scaleTextBox","inline-block","absolute","hidden","1px","1px","0px","0px","none","0px","transparent none","0px","0px","nowrap",null,!0);F=document.createTextNode("");G.appendChild(F);Z.Utils.setTextNodeStyle(F,"black","verdana",E+"px","none","normal","normal","normal","normal","1em","right","none");Z.RulerDisplay.appendChild(G);T=G;N=T.style;G=Z.Utils.createContainerElement("div",
"unitTextBox","inline-block","absolute","hidden","1px","1px","0px","0px","none","0px","transparent none","0px","0px","nowrap",null,!0);F=document.createTextNode("");G.appendChild(F);Z.Utils.setTextNodeStyle(F,"black","verdana",E+"px","none","normal","normal","normal","normal","1em","left","none");Z.RulerDisplay.appendChild(G);D=G;M=D.style;if(0!=Z.rulerListType){O=1==Z.rulerListType&&0!=W?[{text:"2.5x",value:2.5},{text:"5x",value:5},{text:"10x",value:10},{text:"20x",value:20},{text:"40x",value:40},
{text:"60x",value:60},{text:"100x",value:100}]:[{text:"10%",value:10},{text:"20%",value:20},{text:"30%",value:30},{text:"40%",value:40},{text:"50%",value:50},{text:"60%",value:60},{text:"70%",value:70},{text:"80%",value:80},{text:"90%",value:90},{text:"100%",value:100}];E=new Z.Utils.createSelectElement("magnificationList","",O,1,1,1,null,!0,g);Z.RulerDisplay.appendChild(E);w=E;r=w.style;var E=100*Z.minZ,G=100*Z.maxZ,F=Math.round(E),ca=Math.round(G),ka="%";-1==E&&(E=Math.round(100*a.calcZoomDecimalToFitDisplay()));
1==Z.rulerListType&&0!=W&&(E=E*W/100,F=Math.round(E),ka="x");for(;O[0].value<=F;)O=Z.Utils.arraySplice(O,0,1);-1==G&&(G=Math.round(100*a.calcZoomDecimalToFitDisplay()));1==Z.rulerListType&&0!=W&&(G=G*W/100,ca=Math.round(G),ka="x");for(;O[O.length-1].value>=ca;)O=Z.Utils.arraySplice(O,O.length-1,1);O=Z.Utils.arraySplice(O,0,0,{text:F.toString()+ka+(F==E?"":"~")+U,value:F});O[O.length]={text:ca.toString()+ka+(ca==G?"":"~")+ha,value:G};Z.Utils.updateSelectElement(w,O);w.selectedIndex=0}Oa=[{magnitude:Math.pow(10,
24),symbol:"Ym"},{magnitude:Math.pow(10,21),symbol:"Zm"},{magnitude:Math.pow(10,18),symbol:"Em"},{magnitude:Math.pow(10,15),symbol:"Pm"},{magnitude:Math.pow(10,12),symbol:"Tm"},{magnitude:Math.pow(10,9),symbol:"Gm"},{magnitude:Math.pow(10,6),symbol:"Mm"},{magnitude:Math.pow(10,3),symbol:"km"},{magnitude:Math.pow(10,2),symbol:"hm"},{magnitude:Math.pow(10,1),symbol:"dam"},{magnitude:Math.pow(10,0),symbol:"m"},{magnitude:Math.pow(10,-1),symbol:"dm"},{magnitude:Math.pow(10,-2),symbol:"cm"},{magnitude:Math.pow(10,
-3),symbol:"mm"},{magnitude:Math.pow(10,-6),symbol:"um"},{magnitude:Math.pow(10,-9),symbol:"nm"},{magnitude:Math.pow(10,-12),symbol:"pm"},{magnitude:Math.pow(10,-15),symbol:"fm"},{magnitude:Math.pow(10,-18),symbol:"am"},{magnitude:Math.pow(10,-21),symbol:"zm"},{magnitude:Math.pow(10,-24),symbol:"ym"},{magnitude:Math.pow(10,-24),symbol:"pixels"}];E=Z.rulerW;G=Z.rulerH;F=-1==Z.rulerL&&Z.Navigator?Z.navigatorL:Z.rulerL;ca=-1==Z.rulerT&&Z.Navigator?Z.navigatorT+Z.navigatorH+1:Z.rulerT;Q=0!=Z.rulerListType?
E-53-16:E-10;var ka=(G-1+5)/2,la=Q/2-5,h=ka-10,ma="pixels"==Z.units?7:0;C&&B&&rsbnlS&&rsbnrS&&K&&S&&T&&N&&D&&M&&(b(E,G,F,ca),C.width=E+"px",C.height=G+"px",C.left="0px",C.top="0px",r&&(r.width="53px",r.left=E-53-3+"px",r.top=(G-20)/2+"px",r.visibility="visible"),B.width=Q+"px",B.height="1px",B.left="5px",B.top=ka+3+"px",rsbnlS.width="1px",rsbnlS.height="6px",rsbnlS.left="5px",rsbnlS.top=ka+"px",rsbnrS.width="1px",rsbnrS.height="6px",rsbnrS.left=5+Q+"px",rsbnrS.top=ka+"px",S.width=Q+"px",S.height=
"15px",S.left="12px",S.top=h+"px",N.width=la+"px",N.height="15px",N.left=15-ma+"px",N.top=h+"px",M.width=la+"px",M.height="15px",M.left=Q/2+15-ma+"px",M.top=h+"px");Z.ViewerDisplay.appendChild(Z.RulerDisplay);c(Z.rulerVisible);Z.mobileDevice||Z.Utils.addEventListener(s,"mouseover",Z.Utils.stopPropagation);m=!0;a&&a.getInitialized()&&(e(),f(!0))})();this.getInitialized=function(){return m};this.setVisibility=function(a){c(a)};this.setSizeAndPosition=function(a,c,e,f,g){b(a,c,e,f,g)};this.syncToViewport=
function(b){a&&a.getInitialized()&&(e(),f(b))}};
Z.NetConnector=function(){function a(a,e,f,g,m,p){var s=b();if(s){var x="function"===typeof e;if(x){var w=e;e=function(){window.setTimeout(Z.Utils.createCallback(null,w,s),1)};s.onreadystatechange=function(){4==s.readyState&&(s.onreadystatechange=new Function,e())}}try{"undefined"===typeof f||null===f?(s.open("GET",a,x),s.send(null)):"undefined"!==typeof g&&null!==g&&("postXML"==g?(Z.postingXML=!0,s.open("POST",a,!0),s.setRequestHeader("Content-Type","application/xml"),s.send(f)):"ZoomifyImageFile"==
Z.tileSource&&(s.open("GET",a,!0),s.responseType="arraybuffer",Z.Utils.defineObjectProperty(s,"zType",{value:g,writable:!1,enumerable:!1,configurable:!1}),Z.Utils.defineObjectProperty(s,"zTile",{value:m,writable:!1,enumerable:!1,configurable:!1}),Z.Utils.defineObjectProperty(s,"zChunkNumber",{value:p,writable:!1,enumerable:!1,configurable:!1}),Z.browser==Z.browsers.SAFARI&&s.setRequestHeader("If-Modified-Since","Thu, 01 Dec 1994 16:00:00 GMT"),s.setRequestHeader("Range","bytes="+f.start.toString()+
"-"+f.end.toString()),s.send(null)))}catch(r){c(r,a,g),s.onreadystatechange=s=null}}else Z.Utils.showMessage(Z.Utils.getResource("z295"))}function b(){var a=null;switch(Z.xmlHttpRequestSupport){case "XMLHttpRequest":a=new XMLHttpRequest;break;case "Msxml2.XMLHTTP.6.0":a=new ActiveXObject("Msxml2.XMLHTTP.6.0");break;case "Msxml2.XMLHTTP.3.0":a=new ActiveXObject("Msxml2.XMLHTTP.3.0");break;case "Microsoft.XMLHTTP":a=new ActiveXObject("Microsoft.XMLHTTP")}return a}function c(a,b,c){1==Z.localUse&&(Z.browser==
Z.browsers.CHROME||Z.browser==Z.browsers.OPERA||Z.browser==Z.browsers.IE&&11==Z.browserVersion||Z.browser==Z.browsers.SAFARI&&7<=Z.browserVersion)?Z.Utils.showMessage(Z.Utils.getResource("z288"),!0):1==Z.localUse&&"ZoomifyImageFile"==Z.tileSource?Z.Utils.showMessage(Z.Utils.getResource("z290"),!0):1==Z.localUse&&"ZoomifyPFFFile"==Z.tileSource?Z.Utils.showMessage(Z.Utils.getResource("z289"),!0):-1!=b.toLowerCase().indexOf(".zif")?Z.Utils.showMessage(Z.Utils.getResource("z256-ZIFBYTERANGE")+c+".",!1,
s,"center"):-1!=b.indexOf("ImageProperties.xml")?Z.Utils.showMessage(Z.Utils.getResource("z256-IMAGEXML"),!0,null,"left"):-1!=b.toLowerCase().indexOf(".pff")?Z.Utils.showMessage(Z.Utils.getResource("z256-IMAGEHEADER"),!1,s,"center"):-1!=b.toLowerCase().indexOf("reply_data")?Z.Utils.showMessage(Z.Utils.getResource("z256-IMAGEOFFSET"),!1,s,"center"):-1!=b.indexOf(Z.Utils.getResource("z200"))?Z.Utils.showMessage(Z.Utils.getResource("z256-TOOLBARXML"),!0,null,"left"):-1!=b.indexOf(Z.Utils.getResource("z209"))?
Z.Utils.showMessage(Z.Utils.getResource("z256-SLIDESXML"),!1,s,"center"):-1!=b.indexOf(Z.Utils.getResource("z135"))?Z.Utils.showMessage(Z.Utils.getResource("z256-HOTSPOTSXML"),!1,s,"center"):-1!=b.indexOf(Z.Utils.getResource("z69"))?Z.Utils.showMessage(Z.Utils.getResource("z256-ANNOTATIONSXML"),!1,s,"center"):-1!=b.indexOf(Z.Utils.getResource("z68"))?Z.Utils.showMessage(Z.Utils.getResource("z256-ANNOTATIONSJSON"),!1,s,"center"):-1!=b.toLowerCase().indexOf(Z.Utils.getResource("z70"))||-1!=b.toLowerCase().indexOf(Z.Utils.getResource("z70"))?
Z.Utils.showMessage(Z.Utils.getResource("z256-ANNOTATIONSSAVEHANDLER"),!1,s,"center"):Z.Utils.showMessage(Z.Utils.getResource("z256"),!1,s,"center")}function e(a){if(a)if(200!==a.status&&0!==a.status&&206!==a.status)if("ZoomifyImageFile"==Z.tileSource){var b=a.status;a=404==b?"Not Found":a.statusText;Z.Utils.showMessage(Z.Utils.getResource("z273RANGEREQUESTS")+b+" - "+a,!0,null,"left")}else b=a.status,a=404==b?"Not Found":a.statusText,Z.Utils.showMessage(Z.Utils.getResource("z273")+b+" - "+a,!1,s,
"center");else{var c=null,c=null!==Z.annotationPath&&".json"==Z.annotationPath.toLowerCase().substring(Z.annotationPath.length-5,Z.annotationPath.length);if(a.response&&a.zType&&"ZoomifyImageFile"==Z.tileSource)Z.Viewport&&(b=new Z.Utils.createUint8Array(a.response,0),"header"==a.zType?Z.Viewport.parseZIFHeader(b):"offset"==a.zType?Z.Viewport.parseZIFOffsetChunk(b,a.zChunkNumber):"byteCount"==a.zType?Z.Viewport.parseZIFByteCountChunk(b,a.zChunkNumber):"image"==a.zType.substring(0,5)?(p--,Z.Viewport.parseZIFTileImage(b,
a.zTile,a.zType)):"navigator"==a.zType?Z.Viewport.parseZIFNavigatorImage(b,a.zTile,a.zType):Z.Utils.showMessage(Z.Utils.getResource("z256-ZIFBYTES"),!1,s,"center"));else if(a.responseXML&&a.responseXML.documentElement&&!c)c=a.responseXML,f(c);else if(a.responseText)if(a=a.responseText,-1!=a.indexOf("ZAS")&&c)try{Z.annotationJSONObject=JSON.parse(a);var b=Z.Utils.jsonConvertObjectToXMLText(Z.annotationJSONObject),e=Z.Utils.xmlConvertTextToDoc(b);Z.Viewport&&Z.Viewport.parseAnnotationsXML(e)}catch(g){Z.Utils.showMessage(g.name+
Z.Utils.getResource("z276")+g.message)}else Z.postingXML?(Z.postingXML=!1,Z.Utils.showMessage(Z.Utils.getResource("z1"),!1,s,"center"),Z.Viewport&&Z.Viewport.setAllHotspotsSaved()):"ZoomifyImageFolder"==Z.tileSource?(c=Z.Utils.xmlConvertTextToDoc(a),f(c)):"ZoomifyPFFFile"==Z.tileSource&&(-1!=a.toUpperCase().indexOf("PFFHEADER")?(b=a.indexOf("reply_data=")+11,a=a.substring(b,a.length)):(b=a.indexOf("begin=")+6,e=a.indexOf("&",b),beginValue=a.substring(b,e),b=a.indexOf("reply_data=")+11,replyDataValue=
a.substring(b,a.length),a="<PFFOFFSET BEGIN='"+beginValue+"' REPLYDATA='"+replyDataValue+"' />"),c=Z.Utils.xmlConvertTextToDoc(a),f(c))}else Z.Utils.showMessage(Z.Utils.getResource("z272"),!1,s,"center")}function f(a){if(a&&a.documentElement){var b=a.documentElement.tagName;"COPYRIGHT"==b?(b=a.documentElement.getAttribute("STATEMENTTEXT"),a=a.documentElement.getAttribute("DECLINEDTEXT"),Z.Utils.stringValidate(b)?Z.Utils.showCopyright(b,a):Z.Utils.showMessage(Z.Utils.getResource("z255"),!0)):"IMAGE_PROPERTIES"==
b||"ZIFHEADER"==b||"PFFHEADER"==b?("ZoomifyImageFile"==Z.tileSource||"ZoomifyImageFolder"==Z.tileSource||"ZoomifyPFFFile"==Z.tileSource||"ImageServer"==Z.tileSource)&&Z.Viewport&&Z.Viewport.z602(a):"PFFOFFSET"==b?Z.Viewport&&Z.Viewport.parseOffsetChunk(a):"SKINDATA"==b?Z.Toolbar&&Z.Toolbar.parseSkinXML(a):"SLIDEDATA"==b?Z.Viewport&&Z.Viewport.parseSlidesXML(a):"HOTSPOTDATA"==b?Z.Viewport&&Z.Viewport.parseHotspotsXML(a):"ZAS"==b?Z.Viewport&&Z.Viewport.parseAnnotationsXML(a):Z.Utils.showMessage(Z.Utils.getResource("z296"),
!0)}else Z.Utils.showMessage(Z.Utils.getResource("z293"),!0)}function g(a,b,c){p--;if("function"===typeof a)try{a(c)}catch(e){Z.Utils.showMessage(e.name+Z.Utils.getResource("z245")+b+" "+e.message,!0)}}function m(a,b,c){function e(c){f.onload=null;f.onabort=null;f.onerror=null;g&&window.clearTimeout(g);window.setTimeout(function(){b(a,c?f:null)},1)}var f=null,g=null;this.start=function(){f=new Image;var b=function(){e(!1)};f.onload=function(){e(!0)};f.onabort=b;f.onerror=b;g=window.setTimeout(function(){console.log(Z.Utils.getResource("z253"));
e(!1);self.validateView("imageRequestTimeout",c+" timeout: "+a)},C);f.src=a}}var s=parseInt(Z.Utils.getResource("z268MEDIUM"),10),p=0,x=parseInt(Z.Utils.getResource("z140"),10),C=parseFloat(Z.Utils.getResource("z139"));this.loadXML=function(b){a(b,e,null)};this.loadJSON=function(b){a(b,e,null)};this.loadByteRange=function(b,c,f,g,m,p){c=new Z.Utils.Range(c,f);a(b,e,c,g,m,p)};this.loadImageByteRange=function(b,c,f,g){c=b.substring(0,b.indexOf("?"));var m=parseFloat(b.substring(b.indexOf("?")+1,b.indexOf(",")));
b=parseFloat(b.substring(b.indexOf(",")+1,b.length));b=new Z.Utils.Range(m,m+b);a(c,e,b,f,g)};this.postXML=function(b,c){a(b,e,c,"postXML")};this.loadImage=function(a,b,c,e){return p<x?(p++,b=Z.Utils.createCallback(null,g,b),"ZoomifyImageFile"==Z.tileSource&&("undefined"!==typeof e&&null!==e||"navigator"==c)?this.loadImageByteRange(a,b,c,e):(new m(a,b,c)).start(),!0):!1}};
Z.Utils={addCrossBrowserMethods:function(){document.addEventListener?(this.disableTextInteraction=function(a){if(a){var b=a.parentNode.style;b&&(a.parentNode.unselectable="on",b.userSelect="none",b.MozUserSelect="none",b.webkitUserSelect="none",b.webkitTouchCallout="none",b.webkitTapHighlightColor="transparent")}},this.renderQuality=function(a,b){b&&a.style.setProperty("image-rendering","high"==b?"optimizeQuality":"optimizeSpeed",null)},this.setOpacity=function(a,b,c){Z.alphaSupported?a.style.opacity=
b:c&&(a.style.backgroundColor=c)}):document.attachEvent&&(this.disableTextInteraction=function(a){a&&(a.parentNode.unselectable="on",a.parentNode.onselectstart=function(){return!1})},this.renderQuality=function(a,b){b&&(a.style.msInterpolationMode="high"==b?"bicubic":"nearest-neighbor")},this.setOpacity=function(a,b,c){Z.alphaSupported?(b*=100,a.style.zoom=1,a.style.filter="progid:DXImageTransform.Microsoft.Alpha(Opacity="+b+")",a.style.filter="alpha(opacity="+b+")",100==b&&(a.style.filter="")):c&&
(a.style.backgroundColor=c)})},addCrossBrowserEvents:function(){document.addEventListener?(this.addEventListener=function(a,b,c){a&&("mousewheel"==b&&a.addEventListener("DOMMouseScroll",c,!1),a.addEventListener(b,c,!1))},this.removeEventListener=function(a,b,c){a&&("mousewheel"==b&&a.removeEventListener("DOMMouseScroll",c,!1),a.removeEventListener(b,c,!1))},this.event=function(a){return a},this.target=function(a){return a.target},this.relatedTarget=function(a){return a.relatedTarget},this.isRightMouseButton=
function(a){var b=!1;if(2==a.which||3==a.which)b=!0;return b},this.preventDefault=function(a){a.preventDefault()},this.stopPropagation=function(a){a.stopPropagation()}):document.attachEvent&&(this.addEventListener=function(a,b,c){if(-1==this._findListener(a,b,c)){var e=function(){var b=window.event;Function.prototype.call?c.call(a,b):(a._currentListener=c,a._currentListener(b),a._currentListener=null)};a.attachEvent("on"+b,e);b={target:a,eventName:b,handler:c,handler2:e};var e=(a.document||a).parentWindow,
f="l"+this._listenerCounter++;e._allListeners||(e._allListeners={});e._allListeners[f]=b;a._listeners||(a._listeners=[]);a._listeners[a._listeners.length]=f;e._unloadListenerAdded||(e._unloadListenerAdded=!0,e.attachEvent("onunload",this._removeAllListeners))}},this.removeEventListener=function(a,b,c){if(a&&(c=this._findListener(a,b,c),-1!=c)){var e=(a.document||a).parentWindow,f=a._listeners[c];a.detachEvent("on"+b,e._allListeners[f].handler2);a._listeners=Z.Utils.arraySplice(a._listeners,c,1);delete e._allListeners[f]}},
this.event=function(a){return window.event},this.target=function(a){return a.srcElement},this.relatedTarget=function(a){var b=null;"mouseover"==a.type?b=a.fromElement:"mouseout"==a.type&&(b=a.toElement);return b},this.isRightMouseButton=function(a){var b=!1;2==a.button&&(b=!0);return b},this.preventDefault=function(a){a&&(a.returnValue=!1)},this.stopPropagation=function(a){a.cancelBubble=!0},this._findListener=function(a,b,c){var e=a._listeners;if(!e)return-1;a=(a.document||a).parentWindow;for(var f=
e.length-1;0<=f;f--){var g=a._allListeners[e[f]];if(g&&g.eventName==b&&g.handler==c)return f}return-1},this._removeAllListeners=function(){for(id in this._allListeners){var a=this._allListeners[id];a.target.detachEvent("on"+a.eventName,a.handler2);delete this._allListeners[id]}},this._listenerCounter=0)},declareGlobals:function(){Z.pageContainerID=null;Z.imagePath=null;Z.skinPath=null;Z.skinMode=null;Z.parameters=null;Z.browsers=null;Z.browser=null;Z.browserVersion=null;Z.scaleThreshold=null;Z.canvasSupported=
null;Z.cssTransformsSupported=null;Z.cssTransformProperty=null;Z.cssTransformNoUnits=null;Z.alphaSupported=null;Z.renderQuality=null;Z.rotationSupported=null;Z.fullScreenSupported=null;Z.arraySpliceSupported=null;Z.float32ArraySupported=null;Z.uInt8ArraySupported=null;Z.xmlHttpRequestSupport=null;Z.definePropertySupported=null;Z.responseArraySupported=null;Z.responseArrayPrototyped=!1;Z.mobileDevice=null;Z.localUse=null;Z.zifSupported=null;Z.onReady=null;Z.onAnnotationReady=null;Z.initialX=null;Z.initialY=
null;Z.initialZ=null;Z.initialZoom=null;Z.minZ=null;Z.minZoom=null;Z.maxZ=null;Z.maxZoom=null;Z.zoomSpeed=null;Z.panSpeed=null;Z.smoothPan=null;Z.smoothPanEasing=null;Z.smoothPanGlide=null;Z.fadeInSpeed=null;Z.validateViewTimer=null;Z.toolbarVisible=null;Z.toolbarAutoShowHide=null;Z.toolbarW=null;Z.toolbarH=null;Z.toolbarPosition=null;Z.navigatorVisible=null;Z.navigatorW=null;Z.navigatorWidth=null;Z.navigatorH=null;Z.navigatorHeight=null;Z.navigatorL=null;Z.navigatorLeft=null;Z.navigatorT=null;Z.navigatorTop=
null;Z.navigatorFit=null;Z.navigatorRectangleColor=null;Z.clickZoom=null;Z.doubleClickZoom=null;Z.doubleClickDelay=null;Z.clickPan=null;Z.clickZoomAndPanBlock=!1;Z.mousePan=null;Z.keys=null;Z.constrainPan=null;Z.tooltipsVisible=null;Z.helpVisible=0;Z.watermarkPath=null;Z.copyrightPath=null;Z.hotspots=!1;Z.hotspotPath=null;Z.hotspotFolder=null;Z.hotspotListTitle=null;Z.hotspotsDrawOnlyInView=!0;Z.captionBoxes=!1;Z.tour=!1;Z.tourPath=null;Z.tourListTitle=null;Z.tourPlaying=null;Z.slideshow=!1;Z.slidePath=
null;Z.slideListTitle=null;Z.slideTransitionSpeed=null;Z.slideshowPlaying=null;Z.slideTransitionTimeout=null;Z.audioContent=!1;Z.audioMuted=!1;Z.annotations=!1;Z.annotationPath=null;Z.annotationPanelVisible=null;Z.annotationFolder=null;Z.annotationJSONObject=null;Z.annotationXMLText=null;Z.simplePath=!1;Z.noPost=!1;Z.noPostDefaults=!1;Z.unsavedEditsTest=!0;Z.enableSelectionHighlighting=null;Z.externalEditPermissionFunction=null;Z.annotationSort="none";Z.saveHandlerPath=null;Z.postingXML=!1;Z.minimizeVisible=
null;Z.sliderVisible=null;Z.panButtonsVisible=null;Z.resetVisible=null;Z.fullViewVisible=null;Z.fullScreenVisible=null;Z.fullPageVisible=null;Z.initialFullPage=null;Z.fullPageInitial=null;Z.measureVisible=!1;Z.rotationVisible=null;Z.initialR=null;Z.initialRotation=null;Z.virtualPointerVisible=null;Z.crosshairsVisible=null;Z.rulerVisible=null;Z.units=null;Z.unitsPerImage=null;Z.pixelsPerUnit=null;Z.sourceMagnification=null;Z.magnification=null;Z.rulerListType=null;Z.rulerW=null;Z.rulerWidth=null;Z.rulerH=
null;Z.rulerHeight=null;Z.rulerL=null;Z.rulerLeft=null;Z.rulerT=null;Z.rulerTop=null;Z.coordinatesVisible=null;Z.imageFiltersVisible=null;Z.initialImageFilters=null;Z.progressVisible=null;Z.logoVisible=null;Z.logoLink=null;Z.logoLinkURL=null;Z.logoCustomPath=null;Z.canvas=null;Z.debug=null;Z.imageProperties=null;Z.serverIP=null;Z.serverPort=null;Z.tileHandlerPath=null;Z.tileHandlerPathFull=null;Z.tileW=null;Z.tileH=null;Z.tileType="jpg";Z.tilesPNG=null;Z.freehandVisible=null;Z.textVisible=null;Z.iconVisible=
null;Z.rectangleVisible=null;Z.polygonVisible=null;Z.annotationPathProvided=!1;Z.saveHandlerProvided=!1;Z.tileSource=null;Z.focal=null;Z.quality=null;Z.markupMode=null;Z.editMode=null;Z.editing=null;Z.labelMode="view";Z.editModePrior=Z.editMode;Z.Viewer=null;Z.ViewerDisplay=null;Z.Viewport=null;Z.Toolbar=null;Z.ToolbarDisplay=null;Z.TooltipDisplay=null;Z.Navigator=null;Z.NavigatorDisplay=null;Z.MessageDisplay=null;Z.messages=null;Z.messageDisplayList=[];Z.overlayMessage=null;Z.CoordinatesDisplay=
null;Z.coordinates=null;Z.coordinatesSave=null;Z.CopyrightDisplay=null;Z.AnnotationPanelDisplay=null;Z.imageW=null;Z.imageH=null;Z.imageCenterX=null;Z.imageCenterY=null;Z.imageX=0;Z.imageY=0;Z.imageZ=0;Z.imageR=0;Z.priorX=0;Z.priorY=0;Z.priorZ=0;Z.priorR=0;Z.preventDupCall=!1;Z.fitZ=null;Z.zooming="stop";Z.panningX="stop";Z.panningY="stop";Z.fullView=!1;Z.interactivityOff=!1;Z.useCanvas=!0;Z.specialStorageEnabled=null;Z.callbacks=[];Z.updateViewPercent=0;Z.TraceDisplay=null;Z.traces=null;Z.delayedFunctionCallTimer=
null},detectBrowserFeatures:function(){Z.browsers={UNKNOWN:0,IE:1,FIREFOX:2,SAFARI:3,CHROME:4,OPERA:5};var a=Z.browsers.UNKNOWN,b=0,c=1E4,e=navigator.appName,f=navigator.appVersion,g=!1,m=!1,s=navigator.userAgent.toLowerCase();if("Microsoft Internet Explorer"==e&&window.attachEvent&&window.ActiveXObject)b=s.indexOf("msie"),a=Z.browsers.IE,b=parseFloat(s.substring(b+5,s.indexOf(";",b))),g="undefined"!==typeof document.documentMode;else if("Netscape"==e&&-1!=s.indexOf("trident"))a=Z.browsers.IE,b=11;
else if("Netscape"==e&&window.addEventListener){var p=s.indexOf("firefox"),e=s.indexOf("safari"),f=s.indexOf("chrome");0<=p?(a=Z.browsers.FIREFOX,b=parseFloat(s.substring(p+8)),c=1E4):0<=e&&(c=s.substring(0,e).lastIndexOf("/"),a=0<=f?Z.browsers.CHROME:Z.browsers.SAFARI,b=parseFloat(s.substring(c+1,e)),c=1E4);e=new Image;e.style.getPropertyValue&&(m=e.style.getPropertyValue("image-rendering"))}else"Opera"==e&&window.opera&&"[object Opera]"==Object.prototype.toString.call(window.opera)&&(a=Z.browsers.OPERA,
b=parseFloat(f));var x;if(window.ActiveXObject)for(e=["Msxml2.XMLHTTP.6.0","Msxml2.XMLHTTP.3.0","Microsoft.XMLHTTP"],f=0,p=e.length;f<p;f++)try{netReq=new ActiveXObject(e[f]);x=e[f];break}catch(C){}else window.XMLHttpRequest&&(netReq=new XMLHttpRequest,x="XMLHttpRequest");var e="response"in XMLHttpRequest.prototype||"mozResponseArrayBuffer"in XMLHttpRequest.prototype||"mozResponse"in XMLHttpRequest.prototype||"responseArrayBuffer"in XMLHttpRequest.prototype,f=document.createElement("canvas"),f=!(!f.getContext||
!f.getContext("2d")),p=!(a==Z.browsers.SAFARI&&4>b||a==Z.browsers.CHROME&&2>b),f=f&&p,p=!(a==Z.browsers.CHROME&&2>b),m=g||m?"high":null,t=(document.documentElement||{}).style||{},g=!1,B=["transform","WebkitTransform","MozTransform","OTransform","msTransform"],K,S;for(;K=B.shift();)if("undefined"!==typeof t[K]){g=!0;S=/webkit/i.test(K);break}t=g;B=!1;if("undefined"!==typeof document.cancelFullScreen||"undefined"!==typeof document.webkitCancelFullScreen||"undefined"!==typeof document.mozCancelFullScreen||
"undefined"!==typeof document.oCancelFullScreen||"undefined"!==typeof document.msCancelFullScreen||"undefined"!==typeof document.msExitFullscreen)B=!0;var T=Array.prototype.splice,N=!1;try{new Float32Array(1),N=!0}catch(D){}var M=!1;try{new Uint8Array(1),M=!0}catch(w){}var r=!1;if("function"==typeof Object.defineProperty)try{Object.defineProperty({},"x",{}),r=!0}catch(U){}var s=-1<s.indexOf("android")||-1<s.indexOf("iphone")||-1<s.indexOf("ipad")||-1<s.indexOf("ipod"),ha;switch(window.location.protocol){case "http:":ha=
!1;break;case "https:":ha=!1;break;case "file:":ha=!0;break;default:ha=null}var W=!(Z.browser==Z.browsers.IE&&9>Z.browserVersion||Z.browser==Z.browsers.OPERA&&15>Z.browserVersion||Z.browser==Z.browsers.CHROME&&25>Z.browserVersion&&Z.browser==Z.browsers.FIREFOX&&20>Z.browserVersion&&Z.browser==Z.browsers.SAFARI&&5>Z.browserVersion);Z.browser=a;Z.browserVersion=b;Z.scaleThreshold=c;Z.xmlHttpRequestSupport=x;Z.responseArraySupported=e;Z.canvasSupported=f;Z.useCanvas=Z.canvasSupported;Z.imageFiltersVisible=
!Z.useCanvas&&Z.imageFiltersVisible?!1:Z.imageFiltersVisible;Z.cssTransformsSupported=g;Z.cssTransformProperty=K;Z.cssTransformNoUnits=S;Z.alphaSupported=p;Z.renderQuality=m;Z.rotationSupported=t;Z.fullScreenSupported=B;Z.arraySpliceSupported=T;Z.float32ArraySupported=N;Z.uInt8ArraySupported=M;Z.definePropertySupported=r;Z.mobileDevice=s;Z.localUse=ha;Z.zifSupported=W},enforceCopyright:function(){this.readCookie("imageCopyright")?Z.Viewer.configureViewer():this.loadCopyrightText()},readCookie:function(a){a+=
"=";for(var b=document.cookie.split(";"),c=0,e=b.length;c<e;c++){for(var f=b[c];" "==f.charAt(0);)f=f.substring(1,f.length);if(0==f.indexOf(a))return f.substring(a.length,f.length)}return null},loadCopyrightText:function(){(new Z.NetConnector).loadXML(Z.copyrightPath)},showCopyright:function(a,b){var c=this.getResource("z102"),e=this.getResource("z101");Z.CopyrightDisplay=this.createContainerElement("div","CopyrightDisplay","inline-block","absolute","hidden",Z.viewerW-2+"px",Z.viewerH-2+"px","0px",
"0px","solid","1px",c,"0px","0px","normal",null,!0);Z.ViewerDisplay.appendChild(Z.CopyrightDisplay);c=parseInt(Z.Utils.getResource("z230"),10);Z.CopyrightDisplay.style.zIndex=(c+11).toString();var f=parseFloat(Z.CopyrightDisplay.style.width)/2-220,c=parseFloat(Z.CopyrightDisplay.style.height)/2-100,g=this.createContainerElement("div","textBox","inline-block","absolute","hidden","440px","200px",f+"px",c+"px","none","0px","transparent none","0px","0px","normal",null,!0);g.id="textBox";Z.CopyrightDisplay.appendChild(g);
var m=document.createTextNode(a);g.appendChild(this.createCenteredElement(m,"copyrightTextNode"));this.setTextNodeStyle(m,"black","verdana","16px","none","normal","normal","normal","normal","1em","justify","none");var m=this.createContainerElement("div","declinedTextContainer","hidden","absolute","hidden","0px","0px","0px","0px","none","0px","transparent none","0px","0px","normal",null,!0),s=document.createTextNode(b);m.appendChild(s);g.appendChild(m);f=f+220-95;c=c+200+20;g=this.getResource("z418");
g=new Z.Utils.Button("buttonAgree",g,null,null,null,null,"80px","20px",f+"px",c+"px","mousedown",this.copyrightAgreeButtonHandler,"z332","solid","1px",e,"0px","0px");Z.CopyrightDisplay.appendChild(g.elmt);f+=110;g=this.getResource("z419");e=new Z.Utils.Button("buttonExit",g,null,null,null,null,"80px","20px",f+"px",c+"px","mousedown",this.copyrightExitButtonHandler,"z333","solid","1px",e,"0px","0px");Z.CopyrightDisplay.appendChild(e.elmt)},hideCopyright:function(){var a=document.getElementById("copyrightTextNode").firstChild,
b=document.getElementById("declinedTextContainer").firstChild.nodeValue;a.nodeValue=b;a=document.getElementById("buttonAgree");Z.Utils.removeEventListener(a,"mousedown",this.copyrightAgreeButtonHandler);Z.CopyrightDisplay.removeChild(a);a=document.getElementById("buttonExit");Z.Utils.removeEventListener(a,"mousedown",this.copyrightExitButtonHandler);Z.CopyrightDisplay.removeChild(a)},copyrightAgreeButtonHandler:function(a){Z.ViewerDisplay.removeChild(Z.CopyrightDisplay);document.cookie="imageCopyright=confirmed";
Z.Viewer.configureViewer()},copyrightExitButtonHandler:function(a){Z.Utils.hideCopyright()},parseParameters:function(a){var b=[];if("object"===typeof a)b=a;else if("string"===typeof a){a=a.split("&");for(var c=0,e=a.length;c<e;c++){var f=a[c],g=f.indexOf("=");if(0<g){var m=f.substring(0,g),f=f.substring(g+1);b[m]=f}}}return b},parametersToDelimitedString:function(a,b){var c="",e;for(e in a)c+=e+"="+a[e].toString()+b;return c=c.slice(0,-1)},setParameters:function(a){var b=this.getResource("z287"),
c=this.getResource("z110"),e=this.getResource("z109"),f=this.getResource("z108"),c=c!=e?!0:!1;c||(Z.logoLinkURL=Z.Utils.getResource("z427"));var g=this.getResource("z187"),m=this.getResource("z186"),e=this.getResource("z185"),g=g!=m?!0:!1,s=this.getResource("z215"),m=this.getResource("z214"),p=this.getResource("z213");Z.specialStorageEnabled=s!=m?!0:!1;var x=this.getResource("z107"),C=this.getResource("z106"),s=this.getResource("z105"),x=x!=C?!0:!1;Z.skinPath=this.getResource("z201");Z.skinMode=this.getResource("z199");
isNaN(parseFloat(this.getResource("z143")))||(Z.initialX=parseFloat(this.getResource("z143")));isNaN(parseFloat(this.getResource("z144")))||(Z.initialY=parseFloat(this.getResource("z144")));isNaN(parseFloat(this.getResource("z145")))||(Z.initialZ=parseFloat(this.getResource("z145")));isNaN(parseFloat(this.getResource("z163")))||(Z.minZ=parseFloat(this.getResource("z163")));isNaN(parseFloat(this.getResource("z153")))||(Z.maxZ=parseFloat(this.getResource("z153")));isNaN(parseFloat(this.getResource("z241")))||
(Z.zoomSpeed=parseFloat(this.getResource("z241")));isNaN(parseFloat(this.getResource("z175")))||(Z.panSpeed=parseFloat(this.getResource("z175")));isNaN(parseFloat(this.getResource("z111")))||(Z.fadeInSpeed=parseFloat(this.getResource("z111")));Z.navigatorVisible=parseInt(this.getResource("z171"),10);Z.navigatorW=parseInt(this.getResource("z172"),10);Z.navigatorH=parseInt(this.getResource("z167"),10);Z.navigatorL=parseInt(this.getResource("z168"),10);Z.navigatorT=parseInt(this.getResource("z170"),
10);Z.navigatorFit=this.getResource("z166");Z.navigatorRectangleColor=this.getResource("z169");Z.clickZoom="0"!=this.getResource("z93");Z.doubleClickZoom="0"!=this.getResource("DEFAULT_DOUBLECLICKZOOM");Z.doubleClickDelay=parseFloat(this.getResource("DEFAULT_DOUBLECLICKDELAY"));Z.clickPan="0"!=this.getResource("z92");Z.mousePan="0"!=this.getResource("z164");Z.constrainPan="0"!=this.getResource("z95");Z.smoothPan="0"!=this.getResource("DEFAULT_SMOOTHPAN");Z.smoothPanEasing=parseInt(this.getResource("DEFAULT_SMOOTHPANEASING"),
10);Z.smoothPanGlide=parseInt(this.getResource("DEFAULT_SMOOTHPANGLIDE"),10);Z.keys="0"!=this.getResource("z146");Z.canvas="0"!=this.getResource("z88");Z.debug=parseInt(this.getResource("z104"),10);Z.toolbarVisible=parseInt(this.getResource("z223"),10);Z.toolbarAutoShowHide=0!=Z.toolbarVisible&&1!=Z.toolbarVisible&&6!=Z.toolbarVisible&&7!=Z.toolbarVisible;Z.toolbarPosition=parseFloat(this.getResource("z222"));Z.logoVisible="0"!=this.getResource("z150");Z.logoCustomPath=this.getResource("z149");Z.minimizeVisible=
"0"!=this.getResource("z162");Z.sliderVisible="0"!=this.getResource("z206");Z.panButtonsVisible="0"!=this.getResource("z174");Z.resetVisible="0"!=this.getResource("DEFAULT_RESETVISIBLE");Z.tooltipsVisible="0"!=this.getResource("z224");Z.helpVisible=parseInt(this.getResource("z128"),10);Z.progressVisible="0"!=this.getResource("z184");Z.fullViewVisible="0"!=this.getResource("z121");Z.fullScreenVisible="0"!=this.getResource("z119");Z.fullPageVisible="0"!=this.getResource("z118");Z.initialFullPage="0"!=
this.getResource("z141");Z.measureVisible="0"!=this.getResource("z157");Z.rotationVisible="0"!=this.getResource("z190");Z.initialR=this.getResource("DEFAULT_INITIALR");Z.units=this.getResource("z231");Z.sourceMagnification=parseInt(this.getResource("z212"),10);Z.virtualPointerVisible="0"!=this.getResource("z233");Z.crosshairsVisible="0"!=this.getResource("z103");Z.rulerVisible="0"!=this.getResource("z196");Z.rulerListType=this.getResource("z193");Z.rulerW=parseInt(this.getResource("z197"),10);Z.rulerH=
parseInt(this.getResource("z191"),10);Z.rulerL=parseInt(this.getResource("z192"),10);Z.rulerT=parseInt(this.getResource("z195"),10);isNaN(parseFloat(this.getResource("z210")))||(Z.slideTransitionSpeed=parseFloat(this.getResource("z210")));Z.coordinatesVisible="0"!=this.getResource("z100");Z.imageFiltersVisible="0"!=this.getResource("z138");Z.initialImageFilters="0"!=this.getResource("z142");Z.freehandVisible="0"!=this.getResource("z116");Z.textVisible="0"!=this.getResource("z217");Z.iconVisible="0"!=
this.getResource("z136");Z.rectangleVisible="0"!=this.getResource("z189");Z.polygonVisible="0"!=this.getResource("z181");Z.annotationPanelVisible=parseInt(this.getResource("DEFAULT_ANNOTATIONPANELVISIBLE"),10);Z.focal=parseInt(this.getResource("z114"),10);Z.quality=parseInt(this.getResource("z188"),10);if("object"===typeof a&&null!==a){Z.annotationPathProvided=void 0!==a.zHotspotPath||void 0!==a.zAnnotationPath||void 0!==a.zAnnotationXMLText||void 0!==a.zAnnotationJSONObject;Z.saveHandlerProvided=
void 0!==a.zSaveHandlerPath;for(var t in a)if("function"!==typeof a[t])if("undefined"===typeof Z[Z.Utils.stringLowerCaseFirstLetter(t.substr(1))])alert(b+" "+t);else if(pValue=a[t],c||"zNavigatorVisible"==t)switch(t){case "zOnAnnotationReady":"function"===typeof pValue&&(Z.onAnnotationReady=pValue);break;case "zOnReady":"function"===typeof pValue&&(Z.onReady=pValue,window.setTimeout(Z.getReady,100));break;case "zInitialX":isNaN(parseFloat(pValue))||(Z.initialX=parseFloat(pValue));break;case "zInitialY":isNaN(parseFloat(pValue))||
(Z.initialY=parseFloat(pValue));break;case "zInitialZoom":isNaN(parseFloat(pValue))||(Z.initialZ=parseFloat(pValue),Z.initialZ&&-1!=Z.initialZ&&(Z.initialZ/=100));break;case "zMinZoom":isNaN(parseFloat(pValue))||(Z.minZ=parseFloat(pValue),Z.minZ&&-1!=Z.minZ&&(Z.minZ/=100));break;case "zMaxZoom":isNaN(parseFloat(pValue))||(Z.maxZ=parseFloat(pValue),Z.maxZ&&-1!=Z.maxZ&&(Z.maxZ/=100));break;case "zNavigatorVisible":Z.navigatorVisible=parseInt(pValue,10);break;case "zToolbarVisible":Z.toolbarVisible=
parseInt(pValue,10);Z.toolbarAutoShowHide=0!=Z.toolbarVisible&&1!=Z.toolbarVisible&&6!=Z.toolbarVisible&&7!=Z.toolbarVisible;break;case "zLogoVisible":"0"==pValue&&(Z.logoVisible=!1);break;case "zMinimizeVisible":"0"==pValue&&(Z.minimizeVisible=!1);break;case "zSliderVisible":"0"==pValue&&(Z.sliderVisible=!1);break;case "zPanButtonsVisible":"0"==pValue&&(Z.panButtonsVisible=!1);break;case "zResetVisible":"0"==pValue&&(Z.resetVisible=!1);break;case "zFullViewVisible":"1"==pValue?(Z.fullScreenVisible=
!0,Z.fullPageVisible=!1):"0"==pValue&&(Z.fullScreenVisible=!1,Z.fullPageVisible=!1);break;case "zFullScreenVisible":"0"==pValue&&(Z.fullScreenVisible=!1,Z.fullPageVisible=!1);break;case "zFullPageVisible":"1"==pValue&&(Z.fullScreenVisible=!1,Z.fullPageVisible=!0);break;case "zInitialFullPage":"1"==pValue&&(Z.initialFullPage=!0);break;case "zFullPageInitial":alert(Z.Utils.getResource("z275")+" zFullPageInitial is now zInitialFullPage");break;case "zSkinPath":Z.skinPath=pValue;break;case "zTooltipsVisible":"0"==
pValue&&(Z.tooltipsVisible=!1);break;case "zHelpVisible":Z.helpVisible=parseInt(pValue,10);break;case "zProgressVisible":"0"==pValue&&(Z.progressVisible=!1);break;default:if(g)switch(t){case "zZoomSpeed":Z.zoomSpeed=parseInt(pValue,10);break;case "zPanSpeed":Z.panSpeed=parseInt(pValue,10);break;case "zFadeInSpeed":Z.fadeInSpeed=parseInt(pValue,10);break;case "zClickZoom":"0"==pValue&&(Z.clickZoom=!1);break;case "zDoubleClickZoom":"0"==pValue&&(Z.doubleClickZoom=!1);break;case "zDoubleClickDelay":Z.doubleClickDelay=
parseInt(pValue,10);break;case "zClickPan":"0"==pValue&&(Z.clickPan=!1);break;case "zMousePan":"0"==pValue&&(Z.mousePan=!1);break;case "zKeys":"0"==pValue&&(Z.keys=!1);break;case "zConstrainPan":"0"==pValue&&(Z.constrainPan=!1);break;case "zSmoothPan":"0"==pValue&&(Z.smoothPan=!1);break;case "zSmoothPanEasing":C=parseInt(pValue,10);1<=C&&5>=C&&(Z.smoothPanEasing=C);break;case "zSmoothPanGlide":C=parseInt(pValue,10);1<=C&&5>=C&&(Z.smoothPanGlide=C);break;case "zCanvas":"0"==pValue&&(Z.canvas=!1);Z.canvasSupported&&
Z.canvas||(Z.useCanvas=!1);break;case "zDebug":Z.debug=parseInt(pValue,10);break;case "zImageProperties":Z.imageProperties=pValue;break;case "zNavigatorWidth":isNaN(parseInt(pValue,10))||(Z.navigatorW=parseInt(pValue,10));break;case "zNavigatorHeight":isNaN(parseInt(pValue,10))||(Z.navigatorH=parseInt(pValue,10));break;case "zNavigatorLeft":isNaN(parseInt(pValue,10))||(Z.navigatorL=parseInt(pValue,10));break;case "zNavigatorTop":isNaN(parseInt(pValue,10))||(Z.navigatorT=parseInt(pValue,10));break;
case "zNavigatorFit":isNaN(parseFloat(pValue))||(Z.navigatorFit=parseInt(pValue,10));break;case "zNavigatorRectangleColor":Z.navigatorRectangleColor=pValue;break;case "zToolbarPosition":Z.toolbarPosition=parseInt(pValue,10);break;case "zLogoCustomPath":Z.logoCustomPath=pValue;break;case "zRotationVisible":"1"==pValue&&(Z.rotationVisible=!0);break;case "zInitialRotation":isNaN(parseFloat(pValue))||(Z.initialR=parseInt(pValue,10));break;case "zVirtualPointerVisible":"1"==pValue&&(Z.virtualPointerVisible=
!0);break;case "zCrosshairsVisible":"1"==pValue&&(Z.crosshairsVisible=!0);break;case "zRulerVisible":"1"==pValue&&(Z.rulerVisible=!0);break;case "zRulerListType":this.stringValidate(pValue)&&(Z.rulerListType=pValue);break;case "zRulerWidth":isNaN(parseInt(pValue,10))||(Z.rulerW=parseInt(pValue,10));break;case "zRulerHeight":isNaN(parseInt(pValue,10))||(Z.rulerH=parseInt(pValue,10));break;case "zRulerLeft":isNaN(parseInt(pValue,10))||(Z.rulerL=parseInt(pValue,10));break;case "zRulerTop":isNaN(parseInt(pValue,
10))||(Z.rulerT=parseInt(pValue,10));break;case "zMeasureVisible":Z.measureVisible="1"==pValue?!0:!1;break;case "zUnits":this.stringValidate(pValue)&&(Z.units=pValue);break;case "zUnitsPerImage":isNaN(parseFloat(pValue))||(Z.unitsPerImage=parseFloat(pValue));break;case "zPixelsPerUnit":isNaN(parseFloat(pValue))||(Z.pixelsPerUnit=parseFloat(pValue));break;case "zSourceMagnification":isNaN(parseInt(pValue,10))||(Z.sourceMagnification=parseInt(pValue,10));break;case "zMagnification":alert(Z.Utils.getResource("z275")+
" zMagnification is now zSourceMagnification");break;case "zWatermarkPath":Z.watermarkPath=pValue;break;case "zCopyrightPath":Z.copyrightPath=pValue;break;case "zCoordinatesVisible":"1"==pValue&&(Z.coordinatesVisible=!0);break;case "zHotspotPath":Z.hotspotPath=Z.Utils.stringRemoveTrailingSlashCharacters(pValue);Z.hotspotFolder=Z.hotspotPath;".xml"==Z.hotspotPath.toLowerCase().substring(Z.hotspotPath.length-4,Z.hotspotPath.length)&&(Z.hotspotFolder=Z.hotspotFolder.substring(0,Z.hotspotFolder.lastIndexOf("/")));
Z.hotspots=!0;break;case "zHotspotListTitle":Z.hotspotListTitle=pValue;break;case "zHotspotsDrawOnlyInView":"0"==pValue&&(Z.hotspotsDrawOnlyInView=!1);break;case "zCaptionBoxes":"1"==pValue&&(Z.captionBoxes=!0);break;case "zTourPath":Z.tourPath=Z.Utils.stringRemoveTrailingSlashCharacters(pValue);Z.hotspotPath=Z.tourPath;Z.hotspotFolder=Z.hotspotPath;".xml"==Z.hotspotPath.toLowerCase().substring(Z.hotspotPath.length-4,Z.hotspotPath.length)&&(Z.hotspotFolder=Z.hotspotFolder.substring(0,Z.hotspotFolder.lastIndexOf("/")));
Z.tour=!0;break;case "zTourListTitle":Z.tourListTitle=pValue;break;case "zSlidePath":Z.slidePath=Z.Utils.stringRemoveTrailingSlashCharacters(pValue);".xml"==Z.slidePath.toLowerCase().substring(Z.slidePath.length-4,Z.slidePath.length)&&(Z.slideFolder=Z.slideFolder.substring(0,Z.slideFolder.lastIndexOf("/")));Z.slideshow=!0;break;case "zSlideListTitle":Z.slideListTitle=pValue;break;case "zTilesPNG":"1"==pValue&&(Z.tileType="png");break;case "zTileW":Z.tileW=parseInt(pValue,10);break;case "zTileH":Z.tileH=
parseInt(pValue,10);break;default:if(x)switch(t){case "zImageFiltersVisible":"1"==pValue&&(Z.imageFiltersVisible=!0);break;case "zInitialImageFilters":"0"==pValue&&(Z.initialImageFilters=!1);break;case "zAnnotationPath":Z.annotationPath=Z.Utils.stringRemoveTrailingSlashCharacters(pValue);Z.annotationFolder=Z.annotationPath;".xml"==Z.annotationPath.toLowerCase().substring(Z.annotationPath.length-4,Z.annotationPath.length)&&(Z.annotationFolder=Z.annotationFolder.substring(0,Z.annotationFolder.lastIndexOf("/")));
Z.annotations=!0;break;case "zAnnotationPanelVisible":Z.annotationPanelVisible=parseInt(pValue,10);break;case "zAnnotationXMLText":Z.annotationXMLText=pValue;Z.annotations=!0;break;case "zAnnotationJSONObject":Z.annotationJSONObject=pValue;Z.annotations=!0;break;case "zSimplePath":"1"==pValue&&(Z.simplePath=!0);break;case "zNoPost":"1"==pValue&&(Z.noPost=!0);break;case "zNoPostDefaults":"1"==pValue&&(Z.noPostDefaults=!0);break;case "zUnsavedEditsTest":"0"==pValue&&(Z.unsavedEditsTest=!1);break;case "zEnableSelectionHighlighting":"1"==
pValue&&(Z.enableSelectionHighlighting=!0);break;case "zAnnotationSort":Z.annotationSort=pValue;break;case "zFreehandVisible":"0"==pValue&&(Z.freehandVisible=!1);break;case "zTextVisible":"0"==pValue&&(Z.textVisible=!1);break;case "zIconVisible":"0"==pValue&&(Z.iconVisible=!1);break;case "zRectangleVisible":"0"==pValue&&(Z.rectangleVisible=!1);break;case "zPolygonVisible":"0"==pValue&&(Z.polygonVisible=!1);break;case "zMarkupMode":"1"==pValue&&(Z.annotationPathProvided?(Z.editMode="markup",Z.editing=
"addLabel"):alert(this.getResource("z247")));break;case "zEditMode":"1"==pValue&&(Z.annotationPathProvided?Z.editMode="edit":alert(this.getResource("z247")));break;case "zSaveHandlerPath":Z.saveHandlerPath=pValue;break;default:if(Z.specialStorageEnabled==m)alert(p+" "+t);else switch(t){case "zServerIP":Z.serverIP=pValue;break;case "zServerPort":Z.serverPort=pValue;break;case "zTileHandlerPath":Z.tileHandlerPath=pValue;break;case "zImageW":Z.imageW=parseInt(pValue,10);Z.imageCenterX=Z.imageW/2;break;
case "zImageH":Z.imageH=parseInt(pValue,10);Z.imageCenterY=Z.imageH/2;break;case "zFocal":Z.focal=parseInt(pValue,10);break;case "zQuality":Z.quality=parseInt(pValue,10)}}else alert(s+" "+t)}else alert(e+" "+t)}else alert(f+" "+t)}if(Z.Utils.stringValidate(Z.annotationPath)||Z.Utils.stringValidate(Z.saveHandlerPath))x?Z.Utils.stringValidate(Z.saveHandlerPath)&&(Z.saveHandlerPath=Z.saveHandlerPath):(Z.annotationPath="",alert(s));Z.Utils.validateImagePath()},resetParametersXYZ:function(a){isNaN(parseFloat(this.getResource("z143")))||
(Z.initialX=parseFloat(this.getResource("z143")));isNaN(parseFloat(this.getResource("z144")))||(Z.initialY=parseFloat(this.getResource("z144")));isNaN(parseFloat(this.getResource("z145")))||(Z.initialZ=parseFloat(this.getResource("z145")));isNaN(parseFloat(this.getResource("z163")))||(Z.minZ=parseFloat(this.getResource("z163")));isNaN(parseFloat(this.getResource("z153")))||(Z.maxZ=parseFloat(this.getResource("z153")));if(this.stringValidate(a))for(var b=0,c=a.length;b<c;b++){var e=a[b],f=e.indexOf("=");
if(0<f){var g=e.substring(0,f),e=e.substring(f+1);if(this.stringValidate(e))switch(g){case "zInitialX":isNaN(parseFloat(e))||(Z.initialX=parseFloat(e));break;case "zInitialY":isNaN(parseFloat(e))||(Z.initialY=parseFloat(e));break;case "zInitialZoom":isNaN(parseFloat(e))||(Z.initialZ=parseFloat(e),Z.initialZ&&-1!=Z.initialZ&&(Z.initialZ/=100));break;case "zMinZoom":isNaN(parseFloat(e))||(Z.minZ=parseFloat(e),Z.minZ&&-1!=Z.minZ&&(Z.minZ/=100));break;case "zMaxZoom":isNaN(parseFloat(e))||(Z.maxZ=parseFloat(e),
Z.maxZ&&-1!=Z.maxZ&&(Z.maxZ/=100))}}}},validateImagePath:function(){if(null!==Z.imagePath){var a=this.getResource("z213");-1!=Z.imagePath.toLowerCase().indexOf(".zif")?Z.zifSupported?(Z.tileSource="ZoomifyImageFile",Z.Utils.validateResponseArrayFunctionality()):alert(this.getResource("z16")):Z.Utils.stringValidate(Z.tileHandlerPath)?-1!=Z.imagePath.toLowerCase().indexOf(".pff")?Z.specialStorageEnabled?(Z.tileSource="ZoomifyPFFFile",a=Z.tileHandlerPath,Z.tileHandlerPathFull=a):alert(a):Z.Utils.stringValidate(Z.tileHandlerPath)&&
(Z.specialStorageEnabled?(Z.tileSource="ImageServer",a=Z.tileHandlerPath,Z.tileHandlerPathFull=a):alert(a)):Z.tileSource="ZoomifyImageFolder"}},getResource:function(a){var b="";switch(a){case "z110":b="Enable Express parameters";break;case "z109":b="Changing This Violates License Agreement";break;case "z108":b="Support for this parameter is enabled only in the Zoomify Image Viewer included in the Zoomify HTML5 Express, Pro, and Enterprise editions: ";break;case "z187":b="Enable Pro parameters";break;
case "z186":b="Changing This Violates License Agreement";break;case "z185":b="Support for this parameter is enabled only in the Zoomify Image Viewer included in the Zoomify HTML5 Pro and Enterprise editions: ";break;case "z215":b="Changing this violates License Agreement";break;case "z214":b="Changing this violates License Agreement";break;case "z213":b="Support for Zoomify Image File (PFF) storage and other special storage options is enabled only in the Zoomify Image Viewer included in the Zoomify HTML5 Enterprise edition.";
break;case "z107":b="Changing this violates License Agreement";break;case "z106":b="Changing this violates License Agreement";break;case "z105":b="Support for this parameter is enabled only in the Zoomify Image Viewer included in the Zoomify HTML5 Enterprise edition: ";break;case "z125":b="0";break;case "z124":b="8192";break;case "z123":b="1060";break;case "z90":b="ZoomifyImageFile"==Z.tileSource?"1024":"256";break;case "z90-PFF":b="256";break;case "z221":b="256";break;case "z219":b="256";break;case "z140":b=
"300";break;case "z139":b="60000";break;case "z218":b="1.15";break;case "z220":b=Z.mobileDevice?"50":"300";break;case "z81":b="6";break;case "z78":b="3";break;case "z80":b="5";break;case "z77":b="3";break;case "z79":b="3";break;case "z76":b="2";break;case "z75":b="0";break;case "z173":b=Z.mobileDevice?"1":"1.5";Z.rotationVisible&&(b="2");break;case "z74":b=Z.mobileDevice?"1":"2";break;case "z88":b="1";break;case "z230":b="2000";break;case "z104":b="0";break;case "z175":b="5";break;case "z176":b="10";
break;case "z241":b="5";break;case "z242":b="0.02";break;case "z238":b="30";break;case "z240":b="20";break;case "z239":b="800";break;case "z93TIERSKIPTHRESHOLD":b="0.2";break;case "z122":b="10";break;case "z165":b="300";break;case "z111":b="5";break;case "z112":b="0.067";break;case "z146":b="1";break;case "z164":b="1";break;case "z92":b="1";break;case "z93":b="1";break;case "DEFAULT_DOUBLECLICKZOOM":b="1";break;case "DEFAULT_DOUBLECLICKDELAY":b="350";break;case "z95":b="1";break;case "DEFAULT_SMOOTHPAN":b=
"1";break;case "DEFAULT_SMOOTHPANEASING":b="2";break;case "DEFAULT_SMOOTHPANGLIDE":b="2";break;case "z143":b=null;break;case "z144":b=null;break;case "z145":b=null;break;case "z163":b=null;break;case "z153":b="1";break;case "z83":b="#FBFAFA";break;case "z83NOALPHA":b="#FBFAFA";break;case "z83LIGHT":b="#FEFEFE";break;case "z82":b="0.75";break;case "z86":b="0.75";break;case "z87":b="#C0C0C0";break;case "z200":b="skinFiles.xml";break;case "z201":b="Assets/Skins/Default";break;case "z199":b="0";break;
case "z171":b="2";break;case "z172":b="150";break;case "z167":b="100";break;case "z168":b="-1";break;case "z170":b="-1";break;case "z166":b=null;break;case "z169":b="#0000FF";break;case "z223":b="4";break;case "z222":b="1";break;case "z224":b="1";break;case "z128":b="1";break;case "z150":b="1";break;case "z149":b=null;break;case "z162":b="1";break;case "z206":b="1";break;case "z205":b="10";break;case "z174":b="1";break;case "DEFAULT_RESETVISIBLE":b="1";break;case "z121":b="1";break;case "z119":b=
"1";break;case "z120":b="white";break;case "z118":b="0";break;case "z141":b="0";break;case "z232":b="Assets/VirtualPointer/virtualPointer.png";break;case "z157":b="undefined"===typeof Z.parameters||null===Z.parameters||"undefined"!==typeof Z.parameters.zMeasureVisible&&"0"==Z.parameters.zMeasureVisible||!("undefined"!==typeof Z.parameters.zMarkupMode&&"1"==Z.parameters.zMarkupMode||"undefined"!==typeof Z.parameters.zEditMode&&"1"==Z.parameters.zEditMode)?"0":"1";break;case "DEFAULT_FULLVIEWEXITEXTERNALBUTTONCOLOR":b=
"\t#F8F8F8";break;case "z190":b="0";break;case "DEFAULT_INITIALR":b="0";break;case "z184":b="1";break;case "z182":b="500";break;case "z183":b=" ";break;case "z183COLOR":b="#000000";break;case "z212":b="40";break;case "z231":b="pixels";break;case "z233":b="0";break;case "z103":b="0";break;case "z196":b="0";break;case "z193":b="2";break;case "z194":b="10";break;case "z198":b="#696969";break;case "z197":b="150";break;case "z191":b="30";break;case "z192":b="-1";break;case "z195":b="-1";break;case "z100":b=
"0";break;case "z234":b="0.6";break;case "z235":b="0.33";break;case "z237":b="512";break;case "z236":b="384";break;case "z102":b="#D3D3D3";break;case "z101":b="#FFFFFF";break;case "z227":b="destinations.xml";break;case "z226":b=!0;break;case "z225":b=!0;break;case "z209":b="slides.xml";break;case "z208":b=!0;break;case "z207":b=!0;break;case "z203":b="NAME";break;case "z204":b="200";break;case "z202":b="2";break;case "z210":b="2";break;case "z211":b="0.05";break;case "z156":b="170";break;case "z155":b=
"12";break;case "z154":b="11";break;case "z135":b="hotspots.xml";break;case "z130":b="6";break;case "z161":b="2";break;case "z152":b="7";break;case "z129":b="14";break;case "z160":b="3";break;case "z151":b="14";break;case "z115":b="1.8";break;case "z134":b=!0;break;case "z132":b="NAME";break;case "z133":b="200";break;case "z131":b="2";break;case "z138":b="0";break;case "z142":b="1";break;case "z137":b="150";break;case "z116":b="1";break;case "z217":b="1";break;case "z136":b="1";break;case "z189":b=
"1";break;case "z181":b="1";break;case "DEFAULT_ANNOTATIONPANELVISIBLE":b="2";break;case "z69":b="annotations.xml";break;case "z68":b="annotations.json";break;case "z57":b="circle.png";break;case "z57TYPE":b="icon";break;case "z70":b="save";break;case "z71":b="upload";break;case "z67":b=!0;break;case "z65":b="220";break;case "z61":b="177";break;case "z62":b="11";break;case "z63":b="11";break;case "z64":b="11";break;case "z72SMALL":b="2";break;case "z72":b="3";break;case "z53":b="50";break;case "z51":b=
"122";break;case "z55":b="160";break;case "z54":b="88";break;case "z56":b="10";break;case "z59":b="82";break;case "z66":b=!0;break;case "z52":b=!0;break;case "z60":b=!0;break;case "z147":b="0.02";break;case "z148":b="30";break;case "z177":b=2;break;case "z179":b=.3;break;case "z180":b=300;break;case "z96":b="1";break;case "z98":b="#FFFFFF";break;case "z89":b="#FFFFFF";break;case "z177FREEHAND":b=2;break;case "z113":b="#FFFFFF";break;case "z216":b="#999999";break;case "z97":b="10";break;case "DEFAULT_MASKCOLOR":b=
"#000000";break;case "DEFAULT_MASKALPHA":b="0.5";break;case "z127":b="lightgray";break;case "z126":b="white";break;case "z159":b="lightgray";break;case "z158":b="white";break;case "z99":b="lightgray";break;case "DEFAULT_TRACEDISPLAYTEXTFONTSIZE":b="11";break;case "DEFAULT_TRACEDISPLAYTEXTPADDINGSMALL":b="2";break;case "z229":b="#D3D3D3";break;case "z228":b="#FFFFFF";break;case "z114":b="1";break;case "z188":b="55";break;case "z9":b="Displaying or editing polygon hotspots requires a browser that supports the HTML5 canvas feature.";
break;case "z12":b="Rotation requires a newer browser version. Please consider upgrading to the current release of your browser.";break;case "z16":b="Viewing Zoomify Images stored in the ZIF format requires a newer browser version. Please consider upgrading to the current release of your browser.";break;case "z6":b="5000";break;case "z6SHORT":b="3000";break;case "z4SHORT":b="Click a button to\npick a label type";break;case "z4":b="Click a button to pick a label type.\nTips will show only on first use of each button.";
break;case "ALERT_HOWTOEDITMODEVIEW":b="Click image to zoom-in.\nAlt-click to zoom-out.\nClick-drag to pan.";break;case "ALERT_HOWTOEDITMODEFREEHAND":b="\nClick-drag in image to draw.";break;case "ALERT_HOWTOEDITMODETEXT":b="\nClick in image to create caption. Edit text in panel.";break;case "ALERT_HOWTOEDITMODEICON":b="Select icon type from list.\nClick image to create icon.\nAlt-click-drag icon to position.";break;case "ALERT_HOWTOEDITMODERECTANGLE":b="\nClick-drag in image to create rectangle.";
break;case "ALERT_HOWTOEDITMODEPOLYGON":b="Click in image to start polygon and add control points.\nRe-click first point to close the polygon.\nOr alt-click in image to leave polygon open.";break;case "ALERT_HOWTOEDITMODEMEASURE":b="Click in image to measure length.\nAdditional clicks measure perimeter.\nRe-click starting point to measure area.";break;case "z8":b="\nClick the '?' button for help.";break;case "z3":b="Click links are disabled in edit mode\nto allow hotspot positioning by click-dragging:\n";
break;case "z2":b="\nCancelling all unsaved edits.";break;case "z15":b="\nSaving unsaved edits.";break;case "z1":b="\nXML save complete.";break;case "z13":b="SAVEDISABLEDFORDEMO";break;case "z14":b="\nDemo edits are saved only during the browser session.";break;case "z11":b="\nProcessing image filter...";break;case "z10":b="\nProcessing backfill image filter...";break;case "z268":b="3000";break;case "z268MEDIUM":b="1500";break;case "z268SHORT":b="750";break;case "z287":b="Parameter unrecognized or deprecated - see the Parameters List documentation: ";
break;case "z275":b="Parameter deprecated - please replace: ";break;case "z288":b="Recent versions of most browsers allow dynamic content loading (such as viewing of Zoomify Images) only from a web server.  Please change your browser settings (see READ ME FIRST file for details) or use FireFox or an earlier version of your browser for local viewing.";break;case "z290":b="Browsers allow ZIF file viewing only from a web server.  Please use Zoomify Image folders for local viewing.";break;case "z289":b=
"Browsers allow PFF file viewing only from a web server.  Please use Zoomify Image folders for local viewing.";break;case "z249":b="Image failed to load: possible invalid path, missing image, or network error.";break;case "z280":b="Sorry!  Part of this view is not refreshing.  The network may be slow, or the website might be missing a file:  ";break;case "z280-ZIF":b="Sorry!  Part of this view is not refreshing.  The network may be slow, or the ZIF file may be faulty:  ";break;case "z247":b="Attempt to initiate Edit mode without providing path to hotspots or annotations XML data file.";
break;case "z248":b="Hotspot media failed to load: possible invalid path, missing file, or legacy hotspot media such as library clip of Flash-based viewer.";break;case "z246":b="Media of one or more hotspots unsupported: hotspot media of type 'symbol' depend on internal Library of Flash-based viewers.";break;case "z298":b="Attempt to initiate Edit mode without providing path to Save Handler - server side script or other resource to post XML data.";break;case "z297":b="Annotations cannot be saved: missing or incorrect save\nhandler path parameter, or missing file on server.";
break;case "z256-ZIFBYTERANGE":b="Error loading image: ZIF file data request failed. Request content type: ";break;case "z256-ZIFBYTES":b="Error loading image: ZIF file invalid.";break;case "z295":b="Browser does not support XMLHttpRequest.";break;case "z256-IMAGEXML":b="Error loading image: please make sure image path in web page matches image folder location on webserver.";break;case "z256-PFFIMAGEHEADER":b="Error loading image: image header request invalid.";break;case "z256-PFFIMAGEOFFSET":b=
"Error loading image: image offset request invalid.";break;case "z256-TOOLBARXML":b="Error loading toolbar - skin files not found: please verify that the folders 'Assets/Skins/Default' are in same folder as the web page displaying the Viewer, or add zSkinPath parameter to web page.";break;case "z256-SLIDESXML":b="Error loading slides: please make sure slide path in web page matches slides folder location on webserver.";break;case "z256-HOTSPOTSXML":b="Error loading hotspots: please make sure hotspot path in web page matches hotspots folder location on webserver.";
break;case "z256-ANNOTATIONSXML":b="Error loading annotations: please make sure annotation XML path in web page matches annotation folder location on webserver.";break;case "z256-ANNOTATIONSJSON":b="Error loading annotations: please make sure annotation JSON path in web page matches annotation folder location on webserver.";break;case "z256-ANNOTATIONSSAVEHANDLER":b="Error saving annotations: please make sure save handler path in web page matches save handler file location on webserver.";break;case "z256":b=
"Error making network request:\npossible invalid path or network error.";break;case "z272":b="Error related to network security: ";break;case "z273":b="Error related to network status: ";break;case "z273RANGEREQUESTS":b="Network error. If using ZIF storage, setting MIME type on web server may be necessary. See READ ME FIRST file in ZIF Storage folder or contact Support: ";break;case "z244":b=" converting XML text to XML doc (DOMParser): ";break;case "z243":b=" converting XML doc to XML text (DOMParser): ";
break;case "z276":b=" parsing JSON file to JSON object: ";break;case "z277":b=" parsing JSON label to JSON object: ";break;case "z294":b="Browser does not support XML DOM.";break;case "z293":b="XML Doc invalid.";break;case "z296":b="XML invalid.";break;case "z255":b="Image XML invalid.";break;case "z252":b="Image properties XML invalid.";break;case "z250":b="Image properties invalid.";break;case "z251":b="Image properties parameter invalid.";break;case "z254":b="Image tile count does not match value in image XML. If the count is invalid display problems can result.";
break;case "z245":b=" while executing callback: ";break;case "z253":b="\nImage tile request not fulfilled within time period expected";break;case "z271":b="Navigator image failed to load: possible invalid path, missing image, or network error.";break;case "z278":b="Skin XML invalid.";break;case "z279":b="The skin XML file has one or more faulty name lines.";break;case "z291":b="Virtual pointer graphic failed to load: ";break;case "z292":b="Watermark image failed to load: ";break;case "z283":b="Unknown element style - no known method to identify.";
break;case "z284":b="Unknown mouse position - no known method to calculate.";break;case "z285":b="Unknown mouse scroll - no known method to calculate.";break;case "z286":b="Unknown window size - no known method to calculate.";break;case "z282":b="Selected filter requires assignment of increment or toggle interface.";break;case "z360":b="Launch Zoomify Website";break;case "z363":a="";Z.hotspots?a="\nAlt-Click: Toggle Hotspot Visibility":Z.annotations&&(a="\nAlt-Click: Toggle Label Visibility");b="Minimize Toolbar"+
a;break;case "z341":a="";Z.hotspots?a="\nAlt-Click: Toggle Hotspot Visibility":Z.annotations&&(a="\nAlt-Click: Toggle Label Visibility");b="Expand Toolbar"+a;break;case "z400":b="Zoom Out";break;case "z385":b="Zoom In And Out";break;case "z399":b="Zoom In";break;case "z370":b="Pan Left";break;case "z372":b="Pan Up";break;case "z369":b="Pan Down";break;case "z371":b="Pan Right";break;case "z378":b="Reset Initial View\nAlt-Click: Prior View";break;case "z391":b="Enter Full View";break;case "z391EXIT":b=
"Exit Full View";break;case "z391EXITEXTERNAL":b="Exit Full View";break;case "z342":b="Show Help";break;case "z342MARKUP":b="Show Markup Help";break;case "z342ANNOTATION":b="Show Annotation Help";break;case "z380":b="Rotate Clockwise 90 Degrees";break;case "z381":b="Rotate Counterwise 90 Degrees";break;case "z398":b="Click-Drag To Position";break;case "z392":b="Begin Measuring";break;case "z392EXIT":b="Stop Measuring";break;case "z394":b="Prior Destination";break;case "z393":b="Next Destination";
break;case "z395":b="Start Tour";break;case "z396":b="Stop Tour";break;case "z384":b="Prior Slide";break;case "z383":b="Next Slide";break;case "z386":b="Start Slideshow";break;case "z387":b="Stop Slideshow";break;case "z321":b="Mute Sound";break;case "z322":b="Enable Sound";break;case "z350":b="Hide Image Filter Panel";break;case "z351":b="Show Image Filter Panel";break;case "z352":b="Increase Filter";break;case "z349":b="Decrease Filter";break;case "z346":b="Apply Selected Filter";break;case "z347":b=
"Clear Last Application Of Selected Filter";break;case "z347ALL":b="Clear All Filters";break;case "z397":b="Image Navigation";break;case "z334":b="Toggle Color Palette";break;case "z335":b="Freehand Drawings";break;case "z340":b="Text Labels";break;case "z336":b="Icon Labels";break;case "z339":b="Rectangle Labels";break;case "z338":b="Polygon Labels";break;case "z337":b="Measurements";break;case "z373":b="Add New POI";break;case "z376":b="Edit Current POI";break;case "z375":b="Delete Current POI";
break;case "z374":b="Cancel POI Changes";break;case "z377":b="Save POI Changes";break;case "z353":b="Add New Label";break;case "z356":b="Edit Current Label";break;case "z355":b="Delete Current Label";break;case "z354":b="Cancel Label Changes";break;case "z357":b="Save Label Changes";break;case "z364":b="Add New Note";break;case "z367":b="Edit Current Note";break;case "z366":b="Delete Current Note";break;case "z365":b="Cancel Note Changes";break;case "z368":b="Save Note Changes";break;case "z324":b=
"Select Color";break;case "z325":b="Select Color";break;case "z326":b="Select Color";break;case "z327":b="Select Color";break;case "z328":b="Select Color";break;case "z329":b="Select Color";break;case "z330":b="Select Color";break;case "z331":b="Select Color";break;case "z359":b="Grow Label";break;case "z358":b="Shrink Label";break;case "z379":b="Hide Icon Until Mouse-Over";break;case "z342OK":b="Close Help Display";break;case "z362":b="Accept And Close Message";break;case "z361":b="Decline And Close Message";
break;case "z332":b="Agree To Copyright And View Images";break;case "z333":b="Exit And Do Not View Images";break;case "z382":b="Toggle Full Page View";break;case "z390":b="Toggle Viewport Display";break;case "z388":b="Toggle Viewport Backfill";break;case "z389":b="Toggle Constrain Pan";break;case "z427DISPLAY":b="www.zoomify.com";break;case "z427":b="http://www.zoomify.com";break;case "z427TARGET":b="_blank";break;case "z439":b="Navigator Bird's Eye View";break;case "z420":b="X";break;case "z441":b=
" min";break;case "z440":b=" max";break;case "z442":b="units in %s";break;case "z431":b="Length: ";break;case "z431TOTAL":b="Total length: ";break;case "z433":b="Perimeter: ";break;case "z430":b="Area: ";break;case "z434":b="\u00b2";break;case "z425":b="Select Filter Type,<>,Brightness,Contrast,Sharpness,Blurriness,<>,Edges,Inversion,Grayscale,Threshold";break;case "z426":b="null,null,brightness,contrast,sharpness,blurriness,null,edges,inversion,grayscale,threshold";break;case "z418":b="Agree";break;
case "z419":b="Exit";break;case "z444":b="Tour Destinations";break;case "z443":b="Slides";break;case "z424":b="Hotspots";break;case "z410":b="POI";break;case "z408":b="Label";break;case "z407":b="Caption";break;case "z413":b="Tooltip";break;case "z414":b="Click";break;case "z412":b="Scale";break;case "z411":b="Rollover";break;case "z409":b="Note";break;case "z403":b="Select Icon Type,Circle,Triangle,Square,Arrow Down,Arrow Down Left,Arrow Down Right,Arrow Left,Arrow Right,Arrow Up,Arrow Up Left,Arrow Up Right,Line Horizontal,Line Vertical,External Graphics File";
break;case "z404":b="shim,circle.png,triangle.png,square.png,arrowDown.png,arrowDownLeft.png,arrowDownRight.png,arrowLeft.png,arrowRight.png,arrowUp.png,arrowUpLeft.png,arrowUpRight.png,lineHorizontal.png,lineVertical.png,External Graphics File";break;case "z401":b="Caption position...,Bottom Left,Bottom Center,Bottom Right,Center Left,Center Center,Center Right,Top Left,Top Center,Top Right";break;case "z402":b="shim,7,8,9,4,5,6,1,2,3";break;case "z405":b="Open URL in...,Same Window,New Window,Parent Frame,Top Frame";
break;case "z406":b="shim,_self,_blank,_parent,_top";break;case "z422":b="430";break;case "z421":b="300";break;case "z423":b="OK";break;case "z437":b="430";break;case "z436":b="84";break;case "z435":b="Cancel";break;case "z438":b="OK";break;case "z417":b="290";break;case "z415":b="200";break;case "z416":b="Current Mouse Coordinates\n(Alt-Click add, select, right-click Copy)";break;case "UI_TRACEDISPLAYTITLE":b="Trace Values\n\n";break;case "z445":b="This panel is enabled using the HTML parameter 'zDebug=1' (basic) or 'zDebug=2' (adds tile tracing). It can be called in JavaScript as follows:\n\n   Z.Utils.trace('value to display');  \n\nThe buttons below display or modify important state values.  Web designers new to JavaScript will also benefit from the console, trace, profiling, and other debugging features of leading browsers.";
break;case "UI_TRACEDISPLAYTILESTATUSTEXT":b="Required Cached Requested Loaded Displayed Waiting";break;case "UI_TRACEDISPLAYELAPSEDTIMETEXT":b="Seconds";break;case "UI_TRACEDISPLAYTILESPERSECONDTEXT":b="Loads / Second";break;case "z446":b="Show Globals";break;case "z449":b="Toggle Display";break;case "z447":b="Toggle Backfill";break;case "z448":b="Toggle Constrain Pan";break;case "z32":b="<p align=%22center%22><font face=%22Arial,Helvetica,sans-serif%22><strong>Viewer Help</strong></font></p><p align=%22justify%22><font face=%22Arial,Helvetica,sans-serif%22>To explore this image, simply click the image to zoom, alt-click (option-click) to zoom out, or click-drag to pan.<br><br>The Navigator thumbnail overview can also be clicked or click-dragged to pan.<br><br>Use the Toolbar for exact navigation - if using a mouse, hold it over any button to see a helpful tip.</font></p>";
break;case "z31":b="<p align=%22center%22><font face=%22Arial,Helvetica,sans-serif%22><strong>Markup Help</strong></font></p><p align=%22justify%22><font face=%22Arial,Helvetica,sans-serif%22>Markup Mode allows fast, easy addition of labels to a zoomable image.<br><br><strong>Creating A Label</strong><br><br>Click any of the buttons at the top of the Markup Panel: Freehand, Text, Rectangle, Polygon, or Measure.<br><br>Next, click or click-drag in the image:<ul><li>Freehand drawings are created by click-dragging.<li>Text labels are created with a simple click in the image.<li>Icons first require the type of icon to be chosen from the icon list. Then the icon is created by clicking the image.<li>Rectangles do not require multiple clicks - just click-drag and all four corners are automatically created and positioned.<li>Polygons require multiple clicks in the image to create corner <i>control points</i>.  Alt-click the image to create a final point, or click the first point to close the polygon.<li>Measurements are just like polygons but the caption dynamically changes to display the current length or area.<li>Control points of rectangles, polygons, and measurments can be click-dragged to modify a polygon.</ul>Use the Color button to set a color. The color selected affects freehand drawings, text captions, icon captions, and the lines and captions of rectangles, polygons, and measurements.<br><br>Use the View button to return to navigation mode.<br><br><strong>Editing Label Values</strong><br><br>The Markup Panel also displays the name and caption of the currently selected label for easy editing. Use the TAB key to implement any edits or click in the image.<br><br>Delete a label using the trash can button. The label will be removed from the image and the Markup Panel will display the prior label in the label list.<br><br>Save a label using the button with the disk icon. Or, use the label list to change the selected label - the previously selected label will be automatically saved.<br><br><i><strong>Special Tips:</strong><ul><li>Alt-click any label to display its name and caption in the Markup Panel for editing.<li>Alt-click-drag any completed label to reposition it in the image.<li>If using a mouse, hold the cursor over any button at any time to see a helpful reminder.</ul></i></font></p>";
break;case "z28":b="<p align=%22center%22><font face=%22Arial,Helvetica,sans-serif%22><strong>Annotation Editing Help</strong></font></p><p align=%22justify%22><font face=%22Arial,Helvetica,sans-serif%22>The Annotation Panel provides an intuitive, visual means, to add <i>Points of Interest</i> to a zoomable image, including the option of associated <i>Labels</i> and <i>Notes</i>.<br><br><strong>Point Of Interests</strong><br><br>A Point Of Interest (POI) is a place in the image that is named and listed so that it can be navigated to easily.<br><br>To create a Point Of Interest, click the <i>Add</i> button beneath the Point Of Interest choice list at the top of the Annotation Panel to create a new Point of Interest. Or, click the <i>Edit</i> button to modify the current POI. If no Annotations have been created, a placeholder POI will be the only item in the Point Of Interest list.<br><br><i><strong>More Buttons:</strong></i><br><br>When the Add button is clicked, two different buttons will be displayed: <i>Save</i> and <i>Cancel</i>. If the Edit button is clicked, a third button will also be displayed: <i>Delete</i>.<br><br>Save a Point Of Interest using the button with the disk icon. Cancel edits to a Point Of Interest using the button with the large X icon.<br><br>Delete a Point Of Interest using the trash can button. The POI will be removed from the list and the prior POI in the list will be displayed.<br><br><i><strong>Important:</strong><ul><li>Changing the selected POI in the POI list will automatically save any edits to the current POI.<li>Clicking any of the buttons Save, Cancel, and Delete will leave the Add or Edit mode and return to Annotation Panel to its default display.<li>If using a mouse, hold the cursor over any button to see a helpful reminder.</ul></i><strong>Labels</strong><br><br>To add a new Label to the current Point Of Interest, click the Add button beneath the Label section of the Annotation Panel. Or, click the Edit button to edit the current Label. If no Labels have been created yet, the Label list will be empty.<br><br>If adding a new Label, click any of the buttons at the top of the Label section of the Annotation Panel: Freehand, Text, Rectangle, Polygon, or Measure.<br><br>Now click or click-drag in the image to create a new Label:<ul><li>Freehand drawings are created by click-dragging.<li>Text labels are created with a simple click in the image.<li>Icons first require the type of icon to be chosen from the icon list. Then the icon is created by clicking the image.<li>Rectangles do not require multiple clicks - just click-drag and all four corners are automatically created and repositioned.<li>Polygons require multiple clicks in the image to create corner <i>control points</i>.  Alt-click the image to create a final point, or click the first point to close the polygon.<li>Measurements are just like polygons except that the caption dynamically changes to display the current length or area.</ul>Use the Color button to set the color of new freehand drawings, text captions, icon captions, and the lines and captions of rectangles, polygons, and measurements.<br><br>Use the View button to return to navigation mode in the current Label.<br><br><i><strong>Important:</strong><ul><li>In Add mode, multiple clicks or click-drags will create multiple Labels - to support rapid annotation authoring.<li>In Edit mode, any clicks or click-drags will simple replace the current Label in the image.<li>Alt-click any label in the image to display its values in the Annotatoin Panel for editing. (Add or Edit mode)<li>Alt-click-drag any completed label in the image to reposition it.  (Add or Edit mode)<li>Control points of rectangles, polygons, and measurments can be click-dragged to modify a polygon.</ul></i><i><strong>More Label Values:</strong></i><br><br>The Annotation Panel also displays the name, caption, tooltip, and click-URL of of the currently selected label for easy editing. Use the TAB key to implement any edits or click in another text field or in the image. <br><br>Two choice lists are also included: the first allows the caption to be positioned relative to the Label in the image while the second determines whether the click-URL (if any) will open in the current browser window or a new browser window or a specific frame in the web page. <br><br>The Scale buttons allow the Label to be sized in the image.  The Rollover checkbox can be used to hide a Label in the image until the cursor is over it (not supported by mobile devices).<br><br>The Save, Cancel, and Delete buttons for Labels work just as they do with Points of Interest, as described above. And remember, changing the selected Label in the Label list will automatically save any edits to the current Label. Alt-clicking or alt-click-dragging a Label in the image will also change the current Label in the Label list and cause any edits to be saved (see the first two Special Tips below).<br><br><i><strong>Important:</strong><ul><li>Changing the selected Label by clicking or click-dragging it in the image will change the selected Point Of Interest if the newly selected Label is associated with a different POI - if editing is in progress the edits will be automatically saved.<li>If using a mouse, hold the cursor over any button to see a helpful reminder.</ul></i><strong>Notes</strong><br><br>To add a new Note to the current Point Of Interest, click the Add button beneath the Note section of the Annotation Panel. Or, click the Edit button to edit the current Note. If no Notes have been created yet, the Note list will be empty.<br><br>Use the name and text fields to easily add or edit the Note values. Notes can hold a virtually unlimited number of characters (spaces included). A vertical scrollbar automatically appears when a note requires more lines than fit in the note area. Notes can contain carriage returns.<br><br>The Save, Cancel, and Delete buttons for Notes work just as they do with Points of Interest, as described above. And remember, changing the selected Note in the Note list will automatically save any edits to the current Note.</font></p>";
break;case "z30":b="<p align=%22center%22><font face=%22Arial,Helvetica,sans-serif%22><strong>\\/ \\/ \\/</strong></font></p>";break;case "z29":b="<p align=%22center%22><font face=%22Arial,Helvetica,sans-serif%22><strong>Annotation Help</strong></font></p><p align=%22justify%22><font face=%22Arial,Helvetica,sans-serif%22>The Annotation Panel provides an intuitive display of <i>Points of Interest</i> in a zoomable image, along with associated <i>Labels</i> and <i>Notes</i>, if any.<br><br>A Point Of Interest (POI) is a place in the image that is named and listed so that it can be navigated to easily.<br><br>A Label is a visual element in the image: a freehand drawing, text caption, rectangle or other polygon, or a measurement.<br><br>A Note is text associated with a Point Of Interest. Notes can hold a virtually unlimited number of characters (spaces included). A vertical scrollbar automatically appears when a note requires more lines than fit in the note area.</font></p>";
break;case "z50":b="Anonymous";break;case "z27":b="Whole Image";break;case "z43":b="New Point Of Interest ";break;case "z44":b=this.getResource("z50");break;case "z34":b="New Hotspot ";break;case "z33":b="Caption for hotspot ";break;case "z37":b="New Label ";break;case "z35":b="Caption for label ";break;case "z45":b="Polygon ";break;case "z38":b="Tooltip for label ";break;case "z36":b="";break;case "z39":b=this.getResource("z50");break;case "z40":b="New Note ";break;case "z41":b="Note text";break;
case "z42":b=this.getResource("z50");break;case "z20":b="List creation in progress...";break;case "z21":b="Note loading in progress...";break;case "z25":b="#FFFFFF";break;case "z22":b="#000000";break;case "z48":b="#FFFFFF";break;case "z46":b="#FFFFFF";break;case "z26":b="1";break;case "z23":b="1";break;case "z49":b="1";break;case "z47":b="1";break;case "z24":b="8";break;default:b="Unexpected resource request"}return b},clearDisplay:function(a){if(a)if(Z.useCanvas&&"CANVAS"==a.tagName)Z.Utils.clearCanvas(a);
else for(;a.hasChildNodes();)a.removeChild(a.lastChild)},clearCanvas:function(a){a=a.getContext("2d");a.save();a.setTransform(1,0,0,1,0,0);a.clearRect(0,0,a.canvas.width,a.canvas.height);a.restore()},deleteDiv:function(a){for(a=document.getElementById(a);a.hasChildNodes();)a.removeChild(a.lastChild);a.parentNode.removeChild(a)},createCallback:function(a,b){for(var c=[],e=2,f=arguments.length;e<f;e++)c[c.length]=arguments[e];return function(){for(var e=c.concat([]),f=0,s=arguments.length;f<s;f++)e[e.length]=
arguments[f];return b.apply(a,e)}},validateCallback:function(a){var b=Z.Utils.arrayIndexOfObjectValue(Z.callbacks,"callbackEvent",a);if(-1!=b){var c=Z.callbacks[b];if("object"===typeof c&&"function"===typeof c.callbackFunction)switch(a){case "viewUpdateCompleteGetLabelIDs":var e=Z.Viewport.getLabelIDsInCurrentView(!1);Z.Utils.functionCallWithDelay(function(){c.callbackFunction(e)},10);break;case "viewUpdateCompleteGetLabelInternalIDs":var f=Z.Viewport.getLabelIDsInCurrentView(!0);Z.Utils.functionCallWithDelay(function(){c.callbackFunction(f)},
10);break;case "labelSavedGetJSONObject":var g=Z.Viewport.getCurrentLabel();if(g){var m=g.internalID,s=Z.Viewport.getLabelJSONObject(m,!0);Z.Utils.functionCallWithDelay(function(){c.callbackFunction(s)},10)}break;case "labelCreatedGetInternalID":Z.Viewport&&!Z.Viewport.getParsingXML()&&(g=Z.Viewport.getCurrentLabel())&&(m=g.internalID,Z.Utils.functionCallWithDelay(function(){c.callbackFunction(m)},10));break;case "labelSelectedInViewportGetIDs":Z.Viewport&&(g=Z.Viewport.getCurrentLabel())&&Z.Utils.functionCallWithDelay(function(){c.callbackFunction(g.id,
g.internalID)},10);break;default:Z.Utils.functionCallWithDelay(function(){c.callbackFunction()},10)}}},createContainerElement:function(a,b,c,e,f,g,m,s,p,x,C,t,B,K,S,T,N){var D=document.createElement(a);this.stringValidate(b)&&(D.id=b);b=D.style;b.display=this.stringValidate(c)?c:"inline-block";b.position=this.stringValidate(e)?e:"static";b.overflow=this.stringValidate(f)?f:"hidden";"canvas"==a?(this.stringValidate(g)&&D.setAttribute("width",g),this.stringValidate(m)&&D.setAttribute("height",m)):(this.stringValidate(g)&&
(b.width=g),this.stringValidate(m)&&(b.height=m));this.stringValidate(s)&&(b.left=s);this.stringValidate(p)&&(b.top=p);b.borderStyle=this.stringValidate(x)?x:"none";b.borderWidth=this.stringValidate(C)?C:"0px";b.borderColor="#696969";b.background=this.stringValidate(t)?t:"transparent none";b.margin=this.stringValidate(B)?B:"0px";b.padding=this.stringValidate(K)?K:"0px";b.whiteSpace=this.stringValidate(S)?S:"normal";this.stringValidate(T)&&(b.cursor=T);"undefined"!==N&&N&&(Z.mobileDevice?Z.Utils.addEventListener(D,
"touchstart",Z.Utils.preventDefault):(Z.Utils.addEventListener(D,"mousedown",Z.Utils.preventDefault),Z.Utils.addEventListener(D,"contextmenu",Z.Utils.preventDefault)));return D},createCenteredElement:function(a,b){var c=this.createContainerElement("div"),e=[];e[e.length]='<div style="#position:relative; display:table; height:100%; width:100%; border:none; margin:0px; padding:0px; overflow:hidden; text-align:left;">';e[e.length]='<div style="#position:absolute; display:table-cell; #top:50%; width:100%; border:none; margin:0px; padding:0px; vertical-align:middle;">';
e[e.length]='<div id="'+b+'"; style="#position:relative; width:100%; #top:-50%; border:none; margin:0px; padding:0px; text-align:center;"></div></div></div>';c.innerHTML=e.join("");for(var e=c=c.firstChild,f=c.getElementsByTagName("div");0<f.length;)e=f[0],f=e.getElementsByTagName("div");e.appendChild(a);return c},createTextElement:function(a,b,c,e,f,g,m,s,p,x,C,t,B,K,S,T,N,D){c=Z.Utils.createContainerElement("div","textBoxFor-"+a,"inline-block","absolute","hidden",c,e,f,g,s,p,"white","0px",m,"normal");
e=document.createElement("textarea");c.appendChild(e);f=e.style;e.id=a;e.value=b;e.readOnly=x;f.width="100%";f.height="100%";f.margin="0";f.border="0";this.stringValidate(C)&&(f.fontFamily=C);this.stringValidate(t)&&(f.fontSize=t);this.stringValidate(B)&&(f.resize=B);this.stringValidate(K)&&(e.columns=K);this.stringValidate(S)&&(e.rows=S);this.stringValidate(T)&&(f.overflowX=T);this.stringValidate(N)&&(f.overflowY=N);this.stringValidate(D)&&(e.wrap=D,"off"==D&&(f.whiteSpace="nowrap"));return c},createSelectElement:function(a,
b,c,e,f,g,m,s,p){var x=document.createElement("select");x.id=a;Z.Utils.stringValidate(b)&&"none"!=b&&(x.options[0]=new Option(b,null));a=0;for(b=c.length;a<b;a++)x.options[x.options.length]=new Option(c[a].text,c[a].value);x.onchange=p;c=x.style;c.width=e+"px";c.position="absolute";c.left=f+"px";c.top=g+"px";c.fontSize=null==m?"11px":m+"px";c.fontFamily="verdana";c.visibility=s;return x},updateSelectElement:function(a,b,c){if(a){var e=-1!=a.selectedIndex?a.selectedIndex:0;a.innerHTML="";for(var f=
0,g=b.length;f<g;f++)a.options[a.options.length]=new Option(b[f].text,b[f].value.toString());"undefined"!==typeof c&&null!==c&&(b=parseInt(Z.Utils.arrayIndexOfObjectValue(b,"value",c),10),-1!=b&&(e=b));b=a.options.length-1;a.selectedIndex=e<=b?e:b}},getChildElementByID:function(a,b){for(var c=null,e=0,f=a.childNodes.length;e<f&&(c=a.childNodes[e],c.id!=b)&&(c=Z.Utils.getChildElementByID(c,b),null===c);e++);return c},getElementPosition:function(a){for(var b=0,c=0,e="fixed"==this.getElementStyle(a).position,
f=this.getOffsetParent(a,e);f;)b+=a.offsetLeft,c+=a.offsetTop,e&&(a=this.getPageScroll(),b+=a.x,c+=a.y),a=f,e="fixed"==this.getElementStyle(a).position,f=this.getOffsetParent(a,e);return new this.Point(b,c)},getOffsetParent:function(a,b){return b&&a!=document.body?document.body:a.offsetParent},getElementSize:function(a){return new this.Point(a.clientWidth,a.clientHeight)},getElementStyle:function(a){if(a.currentStyle)return a.currentStyle;if(window.getComputedStyle)return window.getComputedStyle(a,
"");this.showMessage(this.getResource("z283"))},getElementStyleProperty:function(a,b){if(window.getComputedStyle)return window.getComputedStyle(a,null).getPropertyValue(b);if(a.currentStyle)return a.currentStyle[b];this.showMessage(this.getResource("z283"))},getEventTargetCoords:function(a){return getElementPosition(Z.Utils.target(a))},getFirstTouch:function(a){var b=null,c=a.touches;a=a.changedTouches;"undefined"!==typeof c?b=c[0]:"undefined"!==typeof a&&(b=a[0]);return b},getMousePosition:function(a){var b=
0,c=0;"DOMMouseScroll"==a.type&&Z.browser==Z.browsers.FIREFOX&&3>Z.browserVersion?(b=a.screenX,c=a.screenY):"number"===typeof a.pageX?(b=a.pageX,c=a.pageY):"number"===typeof a.clientX?(b=a.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,c=a.clientY+document.body.scrollTop+document.documentElement.scrollTop):this.showMessage(this.getResource("z284"));return new this.Point(b,c)},getMouseScroll:function(a){var b=0;"number"===typeof a.wheelDelta?b=a.wheelDelta:"number"===typeof a.detail?
b=-1*a.detail:this.showMessage(this.getResource("z285"));return b?b/Math.abs(b):0},getPageScroll:function(){var a=0,b=0,c=document.documentElement||{},e=document.body||{};if("number"===typeof window.pageXOffset)a=window.pageXOffset,b=window.pageYOffset;else if(e.scrollLeft||e.scrollTop)a=e.scrollLeft,b=e.scrollTop;else if(c.scrollLeft||c.scrollTop)a=c.scrollLeft,b=c.scrollTop;return new this.Point(a,b)},getScreenSize:function(){return new this.Point(screen.width,screen.height)},getWindowSize:function(){var a=
0,b=0,c=document.documentElement||{},e=document.body||{};"number"===typeof window.innerWidth?(a=window.innerWidth,b=window.innerHeight):c.clientWidth||c.clientHeight?(a=c.clientWidth,b=c.clientHeight):e.clientWidth||e.clientHeight?(a=e.clientWidth,b=e.clientHeight):this.showMessage(this.getResource("z286"));return new this.Point(a,b)},Button:function(a,b,c,e,f,g,m,s,p,x,C,t,B,K,S,T,N,D,M,w){a=Z.Utils.createContainerElement("span",a,"inline-block","absolute","hidden",m,s,p,x,K,S,T,N,D,M,w);if(Z.Utils.stringValidate(b)){var r=
document.createTextNode(b);a.appendChild(Z.Utils.createCenteredElement(r));Z.Utils.setTextNodeStyle(r,"black","verdana","13px","none","normal","normal","normal","normal","1em","center","none")}else{c=Z.Utils.stringRemoveTrailingSlashCharacters(c);var U=Z.Utils.createGraphicElement(c+"/"+e),ha=Z.Utils.createGraphicElement(c+"/"+f),W=Z.Utils.createGraphicElement(c+"/"+g);U.style.width=ha.style.width=W.style.width=m;U.style.height=ha.style.height=W.style.height=s;U.style.position=ha.style.position=W.style.position=
"absolute";Z.browser==Z.browsers.FIREFOX&&3>Z.browserVersion&&(U.style.top=ha.style.top=W.style.top="");ha.style.visibility=W.style.visibility="hidden";U.alt=ha.alt=W.alt="";"undefined"!==typeof B&&Z.Utils.stringValidate(B)&&(U.alt=Z.Utils.getResource(B));a.appendChild(U);a.appendChild(ha);a.appendChild(W)}Z.mobileDevice?(Z.Utils.addEventListener(a,"touchstart",Z.Utils.preventDefault),Z.Utils.addEventListener(a,"touchend",Z.Utils.preventDefault),Z.Utils.addEventListener(a,"touchcancel",Z.Utils.preventDefault)):
(Z.Utils.addEventListener(a,"mousedown",Z.Utils.preventDefault),Z.Utils.addEventListener(a,"mouseover",Z.Utils.stopPropagation),Z.Utils.addEventListener(a,"mousedown",Z.Utils.stopPropagation),Z.Utils.addEventListener(a,"mouseup",Z.Utils.stopPropagation),Z.Utils.addEventListener(a,"mouseout",Z.Utils.stopPropagation),"undefined"!==typeof imageUp&&(Z.Utils.addEventListener(U,"contextmenu",Z.Utils.preventDefault),Z.Utils.addEventListener(ha,"contextmenu",Z.Utils.preventDefault),Z.Utils.addEventListener(W,
"contextmenu",Z.Utils.preventDefault)));Z.Utils.stringValidate(b)||(Z.Utils.disableTextInteraction(r),Z.Utils.addEventListener(a,"contextmenu",Z.Utils.preventDefault));Z.tooltipsVisible&&Z.Utils.stringValidate(B)&&(a.title=Z.Utils.getResource(B));Z.Utils.setButtonHandler(a,C,t);this.elmt=a},buttonSize:function(a,b,c){var e=a.style;e.width=b+"px";e.height=c+"px";c=a.firstChild;e=a.childNodes[1];a=a.childNodes[2];c&&e&&a&&(c.style.width=e.style.width=a.style.width=b+"px",c.style.height=e.style.height=
a.style.height=b+"px")},setButtonDefaults:function(a){Z.Utils.clearButtonSettings(a);Z.Utils.setButtonState(a,"up");Z.Utils.setButtonHandler(a,"mouseover",Z.Toolbar.z457)},clearButtonSettings:function(a){var b=a.firstChild,c=a.childNodes[1],e=a.childNodes[2];b&&c&&e&&(b.style.visibility=c.style.visibility=e.style.visibility="hidden",Z.mobileDevice?(Z.Utils.removeEventListener(a,"touchstart",Z.Toolbar.z457),Z.Utils.removeEventListener(a,"touchend",Z.Toolbar.z457),Z.Utils.removeEventListener(a,"touchcancel",
Z.Toolbar.z457)):(Z.Utils.removeEventListener(b,"mouseover",Z.Toolbar.z457),Z.Utils.removeEventListener(c,"mousedown",Z.Toolbar.z457),Z.Utils.removeEventListener(c,"mouseout",Z.Toolbar.z457),Z.Utils.removeEventListener(e,"mouseup",Z.Toolbar.z457)));Z.Utils.removeEventListener(a,"mouseover",Z.Toolbar.z457);Z.Utils.removeEventListener(a,"mousedown",Z.Toolbar.z457);Z.Utils.removeEventListener(a,"mouseout",Z.Toolbar.z457);Z.Utils.removeEventListener(a,"mouseup",Z.Toolbar.z457)},setButtonState:function(a,
b){var c="up"==b?a.firstChild:"down"==b?a.childNodes[1]:a.childNodes[2];c&&(c.style.visibility="visible")},setButtonHandler:function(a,b,c){c="undefined"!==c?c:Z.Toolbar.z457;targetEvent=Z.mobileDevice?"mousedown"==b?"touchstart":"touchend":"undefined"!==b?b:"mouseover";if("mouseover"==b&&"undefined"!==typeof a.firstChild)a=a.firstChild;else if("mousedown"!=b||"undefined"===typeof a.childNodes[1])"mouseup"==b&&"undefined"!==typeof a.childNodes[2]?a=a.childNodes[2]:"mouseout"==b&&"undefined"!==typeof a.childNodes[1]&&
(a=a.childNodes[1]);Z.Utils.addEventListener(a,targetEvent,c)},Checkbox:function(a,b,c,e,f,g,m,s,p){var x=Z.Utils.createContainerElement("div","containerFor-"+a,"inline-block","absolute","hidden",c,e,f,g,"none","0px","transparent none","0px","0px","normal"),C=document.createElement("input");x.appendChild(C);C.type="checkbox";C.id=a;C.value=b;C.width=c;C.height=e;a=x.style;a.width=c+"px";a.height=e+"px";a.left=f+"px";a.top=g+"px";Z.mobileDevice?Z.Utils.addEventListener(C,"touchstart",s):Z.Utils.addEventListener(C,
m,s);Z.tooltipsVisible&&Z.Utils.stringValidate(p)&&(C.title=Z.Utils.getResource(p));return x},Graphic:function(a,b,c,e,f,g,m,s){b=Z.Utils.stringRemoveTrailingSlashCharacters(b);b=Z.Utils.createGraphicElement(c?b+"/"+c:b);c=b.style;c.width=e;c.height=f;"undefined"!==typeof s&&Z.Utils.stringValidate(s)?b.alt=Z.Utils.getResource(s):b.alt="";c=Z.Utils.createContainerElement("span",a,"inline-block","absolute","hidden",e,f,g,m,"none","0px","transparent none","0px","0px","normal");c.appendChild(b);this.elmt=
c;Z.mobileDevice?Z.Utils.addEventListener(b,"touchstart",Z.Utils.preventDefault):Z.Utils.addEventListener(b,"mousedown",Z.Utils.preventDefault);Z.Utils.addEventListener(b,"contextmenu",Z.Utils.preventDefault)},createGraphicElement:function(a){var b=this.createContainerElement("img"),c=null;Z.browser==Z.browsers.IE&&7>Z.browserVersion?(c=this.createContainerElement("span",null,"inline-block"),b.onload=function(){c.style.width=c.style.width||b.width+"px";c.style.height=c.style.height||b.height+"px";
b=b.onload=null},c.style.filter='progid:DXImageTransform.Microsoft.AlphaImageLoader(src="'+a+'", sizingMethod="scale")'):(c=b,c.src=a);return c},graphicSize:function(a,b,c){var e=a.style;e.width=b+"px";e.height=c+"px";a=a.firstChild.style;a.width=b+"px";a.height=c+"px"},Point:function(a,b){this.x="number"===typeof a?a:0;this.y="number"===typeof b?b:0},Point3D:function(a,b,c){this.x="number"===typeof a?a:0;this.y="number"===typeof b?b:0;this.z="number"===typeof c?c:0},Range:function(a,b){this.start=
"number"===typeof a?a:0;this.end="number"===typeof b?b:0},stringValidate:function(a){return"undefined"!==typeof a&&null!==a&&""!==a&&"null"!==a},stringReadable:function(a){return a.replace(RegExp("%20","g")," ")},stringLowerCaseFirstLetter:function(a){return a.charAt(0).toLowerCase()+a.slice(1)},stringUpperCaseFirstLetter:function(a){return a.charAt(0).toUpperCase()+a.slice(1)},stringMultiply:function(a,b){var c=Math.ceil(Math.log(b)/Math.LN2),e=a;do e+=e;while(0<--c);return e.slice(0,a.length*b)},
stringRemoveTrailingSlashCharacters:function(a){return"/"==a.slice(-1,a.length)?a.slice(0,a.length-1):a},stringRemoveTabAndLineWrapCharacters:function(a){a=a.replace(/\n/g,"");a=a.replace(/\r/g,"");return a=a.replace(/\t/g,"")},stringUnescapeAmpersandCharacters:function(a){a=a.replace(/\n/g,"");a=a.replace(/&#38;/g,"&");a=a.replace(/&#038;/g,"&");return a=a.replace(/&amp;/g,"&")},setHTMLTextDefaultCaptionStyle:function(a,b,c,e,f,g,m,s,p,x,C,t,B){a=a.style;-1==b.indexOf("color=")&&(a.color=c);-1==
b.indexOf("font-family=")&&(a.fontFamily=e);-1==b.indexOf("font-size=")&&(a.fontSize=f);-1==b.indexOf("font-size-adjust=")&&(a.fontSizeAdjust=g);-1==b.indexOf("font-style=")&&(a.fontStyle=m);-1==b.indexOf("font-stretch=")&&(a.fontStretch=s);-1==b.indexOf("font-variant=")&&(a.fontVariant=p);-1==b.indexOf("font-weight=")&&(a.fontWeight=x);-1==b.indexOf("line-height=")&&(a.lineHeight=C);-1==b.indexOf("text-align=")&&(a.textAlign=t);-1==b.indexOf("text-decoration=")&&(a.textDecoration=B)},setHTMLTextStyle:function(a,
b,c,e,f,g,m,s,p,x,C,t){a=a.style;a.color=b;a.fontFamily=c;a.fontSize=e;a.fontSizeAdjust=f;a.fontStyle=g;a.fontStretch=m;a.fontVariant=s;a.fontWeight=p;a.lineHeight=x;a.textAlign=C;a.textDecoration=t},setTextAreaStyle:function(a,b,c,e,f,g,m,s,p,x,C,t,B){a=a.firstChild.style;a.color=b;a.fontFamily=c;a.fontSize=e;a.fontSizeAdjust=f;a.fontStyle=g;a.fontStretch=m;a.fontVariant=s;a.fontWeight=p;a.lineHeight=x;a.textAlign=C;a.textDecoration=t;a.padding=B},setTextNodeStyle:function(a,b,c,e,f,g,m,s,p,x,C,
t){a=a.parentNode.style;a.color=b;a.fontFamily=c;a.fontSize=e;a.fontSizeAdjust=f;a.fontStyle=g;a.fontStretch=m;a.fontVariant=s;a.fontWeight=p;a.lineHeight=x;a.textAlign=C;a.textDecoration=t},stringValidateColorValue:function(a){Z.Utils.stringValidate(a)||(a="#000000");0!=a.indexOf("#")&&(a="#"+a);return a},xmlConvertTextToDoc:function(a){var b=null;if(window.ActiveXObject)try{b=new ActiveXObject("Microsoft.XMLDOM"),b.async=!1,b.loadXML(a)}catch(c){this.showMessage(c.name+this.getResource("z244")+
c.message)}else if(window.DOMParser)try{b=(new DOMParser).parseFromString(a,"text/xml")}catch(e){this.showMessage(e.name+this.getResource("z244")+e.message)}else this.showMessage(this.getResource("z294"));return b},xmlConvertDocToText:function(a){var b=null;if(window.ActiveXObject)try{b=a.xml}catch(c){this.showMessage(c.name+this.getResource("z243")+c.message)}else if(window.DOMParser)try{b=(new XMLSerializer).serializeToString(a)}catch(e){this.showMessage(e.name+this.getResource("z243")+e.message)}else this.showMessage(this.getResource("z294"));
return b},jsonConvertObjectToXMLText:function(a){var b=function(a,c){var e="";if(a instanceof Array)for(var s=0,p=a.length;s<p;s++)e+=b(a[s],c)+"\n";else if("object"===typeof a){s=!1;e+="<"+c;for(p in a)"object"!==typeof a[p]?e+=" "+p+'="'+a[p].toString()+'"':s=!0;e+=">";if(s)for(p in a)"#text"==p?e+=a[p]:"object"===typeof a[p]&&(e+=b(a[p],p));e+="</"+c+">"}else e+="<"+c+">"+a.toString()+"</"+c+">";return e},c="",e;for(e in a)c+=b(a[e],e);return c.replace(/\t|\n/g,"")},jsonConvertXMLTextToJSONText:function(a){var b=
{convertToObject:function(a){var e={};if(1==a.nodeType){if(a.attributes.length)for(var f=0,g=a.attributes.length;f<g;f++)e[a.attributes[f].nodeName]=(a.attributes[f].nodeValue||"").toString();if(a.firstChild){for(var f=0,g=!1,m=a.firstChild;m;m=m.nextSibling)1==m.nodeType?g=!0:3==m.nodeType&&m.nodeValue.match(/[^ \f\n\r\t\v]/)&&f++;if(g)if(2>f)for(b.reduceWhitespace(a),m=a.firstChild;m;m=m.nextSibling)3==m.nodeType?e["#text"]=b.escapeMinimal(m.nodeValue):e[m.nodeName]?e[m.nodeName]instanceof Array?
e[m.nodeName][e[m.nodeName].length]=b.convertToObject(m):e[m.nodeName]=[e[m.nodeName],b.convertToObject(m)]:e[m.nodeName]=b.convertToObject(m);else a.attributes.length?e["#text"]=b.escapeMinimal(b.innerXML(a)):e=b.escapeMinimal(b.innerXML(a));else f&&(a.attributes.length?e["#text"]=b.escapeMinimal(b.innerXML(a)):e=b.escapeMinimal(b.innerXML(a)))}a.attributes.length||a.firstChild||(e=null)}else 9==a.nodeType?e=b.convertToObject(a.documentElement):alert("This node type not supported : "+a.nodeType);
return e},convertToJSONText:function(a,e){var f=e?'"'+e+'"':"";if(a instanceof Array){for(var g=0,m=a.length;g<m;g++)a[g]=b.convertToJSONText(a[g],"","\t");f+=(e?":[":"[")+(1<a.length?"\n\t"+a.join(",\n\t")+"\n":a.join(""))+"]"}else if(null==a)f+=(e&&":")+"null";else if("object"===typeof a){g=[];for(m in a)g[g.length]=b.convertToJSONText(a[m],m,"\t");f+=(e?":{":"{")+(1<g.length?"\n\t"+g.join(",\n\t")+"\n":g.join(""))+"}"}else f="string"==typeof a?f+((e&&":")+'"'+a.toString()+'"'):f+((e&&":")+a.toString());
return f},reduceWhitespace:function(a){a.normalize();for(var e=a.firstChild;e;)if(3==e.nodeType)if(e.nodeValue.match(/[^ \f\n\r\t\v]/))e=e.nextSibling;else{var f=e.nextSibling;a.removeChild(e);e=f}else 1==e.nodeType&&b.reduceWhitespace(e),e=e.nextSibling;return a},escapeMinimal:function(a){return a.replace(/[\\]/g,"\\\\").replace(/[\"]/g,'\\"').replace(/[\n]/g,"\\n").replace(/[\r]/g,"\\r")},innerXML:function(a){var b="";if("innerHTML"in a)b=a.innerHTML;else{var f=function(a){var b="";if(1==a.nodeType){for(var b=
b+("<"+a.nodeName),c=0,e=a.attributes.length;c<e;c++)b+=" "+a.attributes[c].nodeName+"='"+(a.attributes[c].nodeValue||"").toString()+"'";if(a.firstChild){b+=">";for(c=a.firstChild;c;c=c.nextSibling)b+=f(c);b+="</"+a.nodeName+">"}else b+="/>"}else 3==a.nodeType&&(b+=a.nodeValue);return b};for(a=a.firstChild;a;a=a.nextSibling)b+=f(a)}return b}};9==a.nodeType&&(xml=xml.documentElement);return jsonTextOut="{\n  "+b.convertToJSONText(b.convertToObject(b.reduceWhitespace(a)),a.nodeName,"\t").replace(/\t/g,
"  ")+"\n}"},arrayClear:function(a){if(a)for(;0<a.length;)a.pop()},arrayClone:function(a,b,c){c=[];switch(a){case "pois":a=0;for(var e=b.length;a<e;a++)c[c.length]={text:b[a].text,value:b[a].value,id:b[a].id,x:b[a].x,y:b[a].y,z:b[a].z};break;case "labels":a=0;for(e=b.length;a<e;a++)c[c.length]={text:b[a].text,value:b[a].value,poiID:b[a].poiID,id:b[a].id};break;case "hotspots":a=0;for(e=b.length;a<e;a++)c[c.length]={id:b[a].id,internalID:b[a].internalID,poiID:b[a].poiID,name:b[a].name,mediaType:b[a].mediaType,
media:b[a].media,audio:b[a].audio,image:b[a].image,iW:b[a].iW,iH:b[a].iH,x:b[a].x,y:b[a].y,z:b[a].z,xScale:b[a].xScale,yScale:b[a].yScale,clickURL:b[a].clickURL,urlTarget:b[a].urlTarget,rollover:b[a].rollover,caption:b[a].caption,tooltip:b[a].tooltip,user:b[a].user,date:b[a].date,textColor:b[a].textColor,backColor:b[a].backColor,lineColor:b[a].lineColor,fillColor:b[a].fillColor,textVisible:b[a].textVisible,backVisible:b[a].backVisible,lineVisible:b[a].lineVisible,fillVisible:b[a].fillVisible,captionPosition:b[a].captionPosition,
saved:b[a].saved,visibility:b[a].visibility,captionHTML:b[a].captionHTML,tooltipHTML:b[a].tooltipHTML,polyClosed:b[a].polyClosed,polygonPts:b[a].polygonPts,showFor:b[a].showFor,transition:b[a].transition,changeFor:b[a].changeFor,rotation:b[a].rotation};break;case "polygon":a=0;for(e=b.length;a<e;a++)c[c.length]={x:b[a].x,y:b[a].y};break;case "notes":a=0;for(e=b.length;a<e;a++)c[c.length]={text:b[a].text,value:b[a].value,noteText:b[a].noteText,poiID:b[a].poiID,id:b[a].id};break;case "magnifications":for(a=
0,e=b.length;a<e;a++)c[c.length]={text:b[a].text,value:b[a].value}}return c},arrayIndexOf:function(a,b,c){c?0>c&&(c=Math.max(0,a.length+c)):c=0;for(var e=a.length;c<e;c++)if(a[c]===b)return c;return-1},arrayIndexOfObjectValue:function(a,b,c,e){if("undefined"!==typeof a){e?0>e&&(e=Math.max(0,a.length+e)):e=0;for(var f=a.length;e<f;e++)if(a[e][b]===c)return e}return-1},arrayIndexOfObjectTwoValues:function(a,b,c,e,f,g){if("undefined"!==typeof a){e?0>e&&(e=Math.max(0,a.length+e)):e=0;for(var m=a.length;e<
m;e++)if(a[e][b]===c&&a[e][f].toString()===g.toString())return e}return-1},arrayIndexOfSubstring:function(a,b,c){c?0>c&&(c=Math.max(0,a.length+c)):c=0;for(var e=a.length;c<e;c++)if(-1!=a[c].indexOf(b))return c;return-1},arrayIndexOfObjectValueSubstring:function(a,b,c,e,f){e?0>e&&(e=Math.max(0,a.length+e)):e=0;for(var g=a.length;e<g;e++)if(f){if(-1!=a[e][b].toLowerCase().indexOf(c))return e}else if(-1!=a[e][b].indexOf(c))return e;return-1},arrayIntersect:function(a,b){for(var c,e,f,g=[],m=0,s=a.length;m<
s;m++){c=a[m];f=!1;for(var p=0,x=b.length;p<x&&c>=(e=b[p]);p++)if(e==c){f=!0;break}f&&(g[g.length]=a[m])}return g},arraySplice:function(a,b,c){if(Z.arraySpliceSupported)if(3<arguments.length)for(var e=3,f=arguments.length;e<f;e++)a.splice(b,c,arguments[e]);else a.splice(b,c);else{0>c&&(c=0);var g=[];if(3<arguments.length)for(e=3,f=arguments.length;e<f;e++)g[g.length]=arguments[e];for(var e=Z.Utils.arraySubarray(a,0,b),m=Z.Utils.arraySubarrayLen(a,b,c),f=Z.Utils.arraySubarray(a,b+c),g=e.concat(g,f),
e=a.length=0,f=g.length;e<f;e++)a[a.length]=g[e];a=m}return a},arraySubarraySimple:function(a,b){return this.slice(a,b)},arraySortNumericAscending:function(a,b,c){a.sort(function(a,b){return a-b});return a},arraySortNumericDescending:function(a,b,c){a.sort(function(a,b){return b-a});return a},arraySortByObjectValue:function(a,b,c,e){a.sort(function(a,c){return a[b]>c[b]});return a},arraySubarray:function(a,b,c){0>b&&(b=0);if(!c||c>a.length)c=a.length;if(b==c)return[];for(var e=[];b<c;b++)e[e.length]=
a[b];return e},arraySubarrayLen:function(a,b,c){if(b>=a.length||c&&0>=c)return[];0>b&&(b=Math.abs(b)>a.length?0:a.length+b);if(!c||c+b>a.length)c=a.length-b;for(var e=[],f=b;f<b+c;f++)e[e.length]=a[f];return e},arraySubtract:function(a,b){for(var c=a.slice(0),e=0,f=c.length;e<f;e++){for(var g=c[e],m=!1,s=0,p=b.length;s<p&&g>=(elmt2=b[s]);s++)if(elmt2==g){m=!0;break}m&&(c=Z.Utils.arraySplice(c,e--,1))}return c},arrayToArrayOfStrings:function(a){for(var b=[],c=0,e=a.length;c<e;c++)b[c]="undefined"!==
typeof a[c]&&"undefined"!=a[c]&&null!==a[c]?a[c].toString():"";return b},arrayUnique:function(a){for(var b=1;b<a.length;)a[b-1]==a[b]?a=Z.Utils.arraySplice(a,b,1):b++;return a},arrayUniqueByObjectValue:function(a,b){if("undefined"!==typeof a)for(var c=1;c<a.length;)a[c-1][b]==a[c][b]?a=Z.Utils.arraySplice(a,c,1):c++;return a},playAudio:function(a,b){Z.audioMuted||("undefined"!==typeof a&&null!==a?a.play():Z.Utils.stringValidate(b)&&(new Audio(b)).play())},loadAudio:function(a){Z.Utils.stringValidate(a)&&
(new Audio(a)).load()},calculatePointsDistance:function(a,b,c,e){return Math.sqrt((a-=c)*a+(b-=e)*b)},convertPixelsToUnits:function(a,b,c){var e=1;"undefined"!==typeof b&&null!==b&&0!=b?e=b:"undefined"!==typeof c&&null!==c&&0!=c&&(e=Z.imageW/c);return a/e},polygonArea:function(a,b,c,e){if("undefined"===typeof e||null===e)e=5;a=a.slice(0);b?a[a.length]={x:a[0].x,y:a[0].y}:"undefined"!==typeof c&&null!==c&&(a[a.length]={x:c.x,y:c.y});for(var f=c=b=0,g=a.length-1;f<g;f++)b+=a[f].x*a[f+1].y,c+=a[f].y*
a[f+1].x;a=Z.Utils.convertPixelsToUnits((b-c)/2,Z.pixelsPerUnit,Z.unitsPerImage);return a=Z.Utils.roundToFixed(Math.abs(a),e)},polygonCenter:function(a,b,c){var e=0,f=0;if("undefined"!==typeof a&&null!==a&&0<a.length){e=a.slice(0);b?e[e.length]={x:e[0].x,y:e[0].y}:"undefined"!==typeof c&&null!==c&&(e[e.length]={x:c.x,y:c.y});a=e[0].x;b=e[0].y;f=e[0].x;c=e[0].y;for(var g=1,m=e.length;g<m;g++)a=Math.min(a,e[g].x),b=Math.min(b,e[g].y),f=Math.max(f,e[g].x),c=Math.max(c,e[g].y);e=a+(f-a)/2;f=b+(c-b)/2}return new Z.Utils.Point(e,
f)},polygonDimensions:function(a,b){var c=0,e=0;if("undefined"!==typeof a&&null!==a&&0<a.length){c=a.slice(0);"undefined"!==typeof b&&null!==b&&(c[c.length]={x:b.x+.1*(c[c.length-1].x-b.x),y:b.y+.1*(c[c.length-1].y-b.y)});for(var f=c[0].x,e=c[0].y,g=c[0].x,m=c[0].y,s=1,p=c.length;s<p;s++)c[s].x<f&&(f=c[s].x),c[s].x>g&&(g=c[s].x),c[s].y<e&&(e=c[s].y),c[s].y>m&&(m=c[s].y);c=g-f;e=m-e}return new Z.Utils.Point(c,e)},polygonPerimeter:function(a,b,c,e){if("undefined"===typeof e||null===e)e=5;a=a.slice(0);
b?a[a.length]={x:a[0].x,y:a[0].y}:"undefined"!==typeof c&&null!==c&&(a[a.length]={x:c.x,y:c.y});c=b=0;for(var f=a.length-1;c<f;c++)b+=Z.Utils.calculatePointsDistance(a[c].x,a[c].y,a[c+1].x,a[c+1].y);b=Z.Utils.convertPixelsToUnits(b,Z.pixelsPerUnit,Z.unitsPerImage);return b=Z.Utils.roundToFixed(Math.abs(b),e)},fullScreenView:function(a,b,c){if("undefined"===typeof c||null===c)c=!1;b?(b=document.documentElement,b.requestFullScreen?(a.requestFullScreen(),Z.Utils.addEventListener(document,"fullscreenchange",
Z.Viewport.fullScreenEscapeHandler)):b.mozRequestFullScreen?(a.mozRequestFullScreen(),Z.Utils.addEventListener(document,"mozfullscreenchange",Z.Viewport.fullScreenEscapeHandler)):b.webkitRequestFullScreen?(a.webkitRequestFullScreen(),Z.Utils.addEventListener(document,"webkitfullscreenchange",Z.Viewport.fullScreenEscapeHandler)):b.msRequestFullscreen&&(a.msRequestFullscreen(),Z.Utils.addEventListener(document,"MSFullscreenChange",Z.Viewport.fullScreenEscapeHandler))):document.cancelFullScreen?(c||
document.cancelFullScreen(),Z.Utils.removeEventListener(document,"fullscreenchange",Z.Viewport.fullScreenEscapeHandler)):document.msExitFullscreen?(c||document.msExitFullscreen(),Z.Utils.removeEventListener(document,"MSFullscreenChange",Z.Viewport.fullScreenEscapeHandler)):document.mozCancelFullScreen?(c||document.mozCancelFullScreen(),Z.Utils.removeEventListener(document,"mozfullscreenchange",Z.Viewport.fullScreenEscapeHandler)):document.webkitCancelFullScreen&&(c||document.webkitCancelFullScreen(),
Z.Utils.removeEventListener(document,"webkitfullscreenchange",Z.Viewport.fullScreenEscapeHandler))},rotatePoint:function(a,b,c){var e=Math.PI/180*-c;c=a*Math.cos(e)-b*Math.sin(e);a=a*Math.sin(e)+b*Math.cos(e);return new Z.Utils.Point(c,a)},rotateElement:function(a,b,c){if(b!=Z.imageR||c)b="rotate("+b.toString()+"deg)",a.transform=b,a.msTransform=b,a.mozTransform=b,a.webkitTransform=b,a.oTransform=b},getDisplayPositionRotated:function(a,b){if("undefined"===typeof b||null===b)b=Z.imageR;0>b&&(b+=360);
var c=parseFloat(a.width)/2,e=parseFloat(a.height)/2,f=Z.Utils.rotatePoint,g=new Z.Utils.Point(0,0);0!=b&&(90==b?g=f(-c,e,-b):180==b?g=f(c,e,-b):270==b&&(g=f(c,-e,-b)),g.x+=c,g.y+=e);return new Z.Utils.Point(g.x,g.y)},translateElement:function(a,b,c){b="translate("+b.toString()+"px,"+c.toString()+"px)";a.transform=b;a.msTransform=b;a.mozTransform=b;a.webkitTransform=b;a.oTransform=b},filterImage:function(a,b,c){var e=a.data;switch(b){case "brightness":if("undefined"===typeof c||null===c)c=40;b=0;
for(var f=e.length;b<f;b+=4)e[b]+=c,e[b+1]+=c,e[b+2]+=c;break;case "contrast":if("undefined"===typeof c||null===c)c=10;b=0;for(f=e.length;b<f;b+=4){var g=Math.round((e[b]+e[b+1]+e[b+2])/3);127<g?(e[b]+=e[b]/g*c,e[b+1]+=e[b+1]/g*c,e[b+2]+=e[b+2]/g*c):(e[b]-=e[b]/g*c,e[b+1]-=e[b+1]/g*c,e[b+2]-=e[b+2]/g*c)}break;case "sharpness":a=Z.Utils.convolveImage(a,[0,-1,0,-1,5,-1,0,-1,0]);break;case "blurriness":if("undefined"===typeof c||null===c)c=3;c=Math.abs(c);if(1<c){b=c/2;f=Math.ceil(c)+(1-Math.ceil(c)%
2);c=new Z.Utils.createFloat32Array(f);b=(b+.5)/3;b*=b;var e=-1/(2*b),m=1/Math.sqrt(2*Math.PI*b),s=Math.floor(f/2);for(b=g=0;b<f;b++){var p=b-s,p=m*Math.exp(p*p*e);c[b]=p;g+=p}b=0;for(f=c.length;b<f;b++)c[b]/=g;a=Z.Utils.convolveImageSeparable(a,c,c,!1)}break;case "edges":b=new Z.Utils.createFloat32Array([-1,-1,-1,-1,8,-1,-1,-1,-1]);a=Z.Utils.convolveImage(a,b,!0);break;case "inversion":b=0;for(f=e.length;b<f;b+=4)e[b]=255-e[b],e[b+1]=255-e[b+1],e[b+2]=255-e[b+2],e[b+3]=255;break;case "grayscale":b=
0;for(f=e.length;b<f;b+=4)g=e[b],m=e[b+1],s=e[b+2],e[b]=e[b+1]=e[b+2]=.2126*g+.7152*m+.0722*s;break;case "threshold":if("undefined"===typeof c||null===c)c=128;b=0;for(f=e.length;b<f;b+=4)g=e[b],m=e[b+1],s=e[b+2],e[b]=e[b+1]=e[b+2]=.2126*g+.7152*m+.0722*s>=c?255:0}return a},getImageData:function(a){var b=this.getCanvas(a.width,a.height),c=b.getContext("2d");c.drawImage(a,0,0);return c.getImageData(0,0,b.width,b.height)},getCanvas:function(a,b){var c=document.createElement("canvas");c.width=a;c.height=
b;return c},createImageData:function(a,b){return document.createElement("canvas").getContext("2d").createImageData(a,b)},createImageDataFloat32:function(a,b){return{width:a,height:b,data:new Z.Utils.createFloat32Array(a*b*4)}},createFloat32Array:function(a){return Z.float32ArraySupported?new Float32Array(a):Array(a)},convolveImage:function(a,b,c){var e=Math.round(Math.sqrt(b.length)),f=Math.floor(e/2),g=a.data,m=a.width;a=a.height;c=c?1:0;for(var s=Z.Utils.createImageData(m,a),p=s.data,x=0;x<a;x++)for(var C=
0;C<m;C++){for(var t=x,B=C,K=4*(x*m+C),S=0,T=0,N=0,D=0,M=0;M<e;M++)for(var w=0;w<e;w++){var r=t+M-f,U=B+w-f;0<=r&&r<a&&0<=U&&U<m&&(r=4*(r*m+U),U=b[M*e+w],S+=g[r]*U,T+=g[r+1]*U,N+=g[r+2]*U,D+=g[r+3]*U)}p[K]=S;p[K+1]=T;p[K+2]=N;p[K+3]=D+c*(255-D)}return s},convolveImageHorizontal:function(a,b,c){var e=b.length,f=Math.floor(e/2),g=a.data,m=a.width;a=a.height;c=c?1:0;for(var s=Z.Utils.createImageData(m,a),p=s.data,x=0;x<a;x++)for(var C=0;C<m;C++){for(var t=x,B=C,K=4*(x*m+C),S=0,T=0,N=0,D=0,M=0;M<e;M++)var w=
t,r=Math.min(m-1,Math.max(0,B+M-f)),w=4*(w*m+r),r=b[M],S=S+g[w]*r,T=T+g[w+1]*r,N=N+g[w+2]*r,D=D+g[w+3]*r;p[K]=S;p[K+1]=T;p[K+2]=N;p[K+3]=D+c*(255-D)}return s},convolveImageVertical:function(a,b,c){var e=b.length,f=Math.floor(e/2),g=a.data,m=a.width;a=a.height;c=c?1:0;for(var s=Z.Utils.createImageData(m,a),p=s.data,x=0;x<a;x++)for(var C=0;C<m;C++){for(var t=x,B=C,K=4*(x*m+C),S=0,T=0,N=0,D=0,M=0;M<e;M++)var w=4*(Math.min(a-1,Math.max(0,t+M-f))*m+B),r=b[M],S=S+g[w]*r,T=T+g[w+1]*r,N=N+g[w+2]*r,D=D+g[w+
3]*r;p[K]=S;p[K+1]=T;p[K+2]=N;p[K+3]=D+c*(255-D)}return s},convolveImageSeparable:function(a,b,c,e){return Z.Utils.convolveImageHorizontal(Z.Utils.convolveImageFloat32Vertical(a,c,e),b,e)},convolveImageFloat32:function(a,b,c){var e=Math.round(Math.sqrt(b.length)),f=Math.floor(e/2),g=a.data,m=a.width;a=a.height;c=c?1:0;for(var s={width:m,height:a,data:new Z.Utils.Float32ArrayZ(m*a*4)},p=s.data,x=0;x<a;x++)for(var C=0;C<m;C++){for(var t=x,B=C,K=4*(x*m+C),S=0,T=0,N=0,D=0,M=0;M<e;M++)for(var w=0;w<e;w++)var r=
Math.min(a-1,Math.max(0,t+M-f)),U=Math.min(m-1,Math.max(0,B+w-f)),r=4*(r*m+U),U=b[M*e+w],S=S+g[r]*U,T=T+g[r+1]*U,N=N+g[r+2]*U,D=D+g[r+3]*U;p[K]=S;p[K+1]=T;p[K+2]=N;p[K+3]=D+c*(255-D)}return s},convolveImageFloat32Horizontal:function(a,b,c){var e=b.length,f=Math.floor(e/2),g=a.data,m=a.width;a=a.height;c=c?1:0;for(var s=Z.Utils.createImageDataFloat32(m,a),p=s.data,x=0;x<a;x++)for(var C=0;C<m;C++){for(var t=x,B=C,K=4*(x*m+C),S=0,T=0,N=0,D=0,M=0;M<e;M++)var w=t,r=Math.min(m-1,Math.max(0,B+M-f)),w=4*
(w*m+r),r=b[M],S=S+g[w]*r,T=T+g[w+1]*r,N=N+g[w+2]*r,D=D+g[w+3]*r;p[K]=S;p[K+1]=T;p[K+2]=N;p[K+3]=D+c*(255-D)}return s},convolveImageFloat32Vertical:function(a,b,c){var e=b.length,f=Math.floor(e/2),g=a.data,m=a.width;a=a.height;c=c?1:0;for(var s=Z.Utils.createImageDataFloat32(m,a),p=s.data,x=0;x<a;x++)for(var C=0;C<m;C++){for(var t=x,B=C,K=4*(x*m+C),S=0,T=0,N=0,D=0,M=0;M<e;M++)var w=4*(Math.min(a-1,Math.max(0,t+M-f))*m+B),r=b[M],S=S+g[w]*r,T=T+g[w+1]*r,N=N+g[w+2]*r,D=D+g[w+3]*r;p[K]=S;p[K+1]=T;p[K+
2]=N;p[K+3]=D+c*(255-D)}return s},intValue:function(a,b){return(a[b]+(a[b+1]<<8)|a[b+2]<<16)+16777216*a[b+3]},longValue:function(a,b){var c=(a[b]+(a[b+1]<<8)|a[b+2]<<16)+16777216*a[b+3];0!=a[b+4]&&(c+=4294967296*a[b+4]);return c},shortValue:function(a,b){return a[b]+(a[b+1]<<8)},createUint8Array:function(a,b){return Z.uInt8ArraySupported?new Uint8Array(a,b):new Z.Utils.TypedArray(a,b)},TypedArray:function(a){var b;if("number"===typeof a){b=Array(a);for(var c=0;c<a;++c)b[c]=0}else b=a.slice(0);b.subarray=
Z.Utils.arraySubarraySimple;b.buffer=b;b.byteLength=b.length;b.set=Z.Utils.setSimple;"object"===typeof a&&a.buffer&&(b.buffer=a.buffer);return b},setSimple:function(a,b){2>arguments.length&&(b=0);for(var c=0,e=a.length;c<e;++c,++b)this[b]=a[c]&255},encodeBase64:function(a){var b,c,e,f,g=0,m=0,s="",s=[];if(!a)return a;do b=a[g++],c=a[g++],e=a[g++],f=b<<16|c<<8|e,b=f>>18&63,c=f>>12&63,e=f>>6&63,f&=63,s[m++]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(b)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(c)+
"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(e)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(f);while(g<a.length);s=s.join("");a=a.length%3;return(a?s.slice(0,a-3):s)+"===".slice(a||3)},validateResponseArrayFunctionality:function(){"ZoomifyImageFile"!=Z.tileSource||Z.responseArraySupported||Z.responseArrayPrototyped||(Z.Utils.defineObjectProperty(XMLHttpRequest.prototype,"response",{get:function(){return(new VBArray(this.responseBody)).toArray()}}),
Z.responseArrayPrototyped=!0)},defineObjectProperty:function(a,b,c){Z.definePropertySupported?Object.defineProperty(a,b,c):(delete a[b],"get"in c&&a.__defineGetter__(b,c.get),"set"in c&&a.__defineSetter__(b,c.set),"value"in c&&(a.__defineSetter__(b,function(a){this.__defineGetter__(b,function(){return a});return a}),a[b]=c.value))},createImageElementFromBytes:function(a,b){function c(a){e.onload=null;e.onabort=null;e.onerror=null;f&&window.clearTimeout(f);window.setTimeout(function(){b(e)},1)}var e=
new Image,f=null,g=parseFloat(this.getResource("z139")),m=function(){c(!1)};e.onload=function(){c(!0)};e.onabort=m;e.onerror=m;f=window.setTimeout(function(){console.log(Z.Utils.getResource("z253"));c(!1)},g);e.src=a},getCurrentUTCDateAsString:function(){var a=new Date,b=(10>a.getUTCMonth()+1?"0":"")+(a.getUTCMonth()+1),c=(10>a.getUTCDate()?"0":"")+a.getUTCDate(),e=(10>a.getUTCHours()?"0":"")+a.getUTCHours(),f=(10>a.getUTCMinutes()?"0":"")+a.getUTCMinutes(),g=(10>a.getUTCSeconds()?"0":"")+a.getUTCSeconds();
return a.getUTCFullYear()+b+c+e+f+g},cacheProofPath:function(a){return a+="?noCacheSfx="+(new Date).getTime().toString()},easing:function(a,b,c,e){b-=a;return 1>(c/=e/2)?b/2*c*c*c*c*c+a:b/2*((c-=2)*c*c*c*c+2)+a},functionCallWithDelay:function(a,b){Z.delayedFunctionCallTimer=window.setTimeout(a,b)},nodeIsInViewer:function(a){for(var b=!1;0==b;)if(a)a.id?"ViewerDisplay"==a.id?b=!0:a=a.parentNode:a=a.parentNode;else break;return b},roundToFixed:function(a,b){var c=Math.round(a).toString().length>b-1?
1:10;return a=Math.round(a*c)/c},getSign:function(a){return a?0>a?-1:1:0},drawCrosshairs:function(a,b,c){var e=Z.Utils.createContainerElement("div","viewportCenterLineVertical","inline-block","absolute","visible","1px",c+"px",b/2+"px","0px","solid","1px","transparent none","0px","0px","normal",null,!0);b=Z.Utils.createContainerElement("div","viewportCenterLineHorizontal","inline-block","absolute","visible",b+"px","1px","0px",c/2+"px","solid","1px","transparent none","0px","0px","normal",null,!0);
a.appendChild(b);a.appendChild(e)},configureHelpDisplay:function(){var a=80,b=80,c=parseInt(this.getResource("z422"),10),e=parseInt(this.getResource("z421"),10);c>=Z.viewerW&&(c=Z.viewerW-a,a-=40);e>=Z.viewerH&&(e=Z.viewerH-b,b-=40);var a=Z.viewerW-c-a,f=Z.viewerH-e-b,g=this.getResource("z127"),b=this.getResource("z126");Z.HelpDisplay=this.createContainerElement("div","HelpDisplay","inline-block","absolute","hidden",c+"px",e+"px",a+"px",f+"px","solid","1px",g,"0px","0px","normal",null,!0);Z.ViewerDisplay.appendChild(Z.HelpDisplay);
a=Z.Utils.createContainerElement("div","helpTextBox","inline-block","absolute",null,c-50+"px",e-74+"px","4px","4px","solid","1px","white","0px","20px",null);a.style.overflowY="auto";Z.HelpDisplay.appendChild(a);Z.help=document.getElementById("helpTextBox");a=parseInt(Z.Utils.getResource("z230"),10);Z.HelpDisplay.style.zIndex=(a+9).toString();e=e-18-5;c-=66;a=this.getResource("z423");c=new Z.Utils.Button("buttonHelpOk",a,null,null,null,null,"56px","18px",c+"px",e+"px","mousedown",this.helpOkButtonHandler,
"z342OK","solid","1px",b,"0px","0px");Z.HelpDisplay.appendChild(c.elmt)},helpOkButtonHandler:function(a){Z.Utils.hideHelp();return!0},showHelp:function(a){Z.HelpDisplay||Z.Utils.configureHelpDisplay();Z.help&&(Z.help.innerHTML=unescape(a),Z.HelpDisplay.style.display="inline-block",document.getElementById("buttonHelpOk").style.display="inline-block")},hideHelp:function(){Z.HelpDisplay.style.display="none"},configureMessageDisplay:function(){var a=parseInt(this.getResource("z437"),10),b=parseInt(this.getResource("z436"),
10),c=Z.viewerH-b-40,e=this.getResource("z159"),f=this.getResource("z158");Z.MessageDisplay=this.createContainerElement("div","MessageDisplay","inline-block","absolute","hidden",a+"px",b+"px","40px",c+"px","solid","1px",e,"0px","0px","normal",null,!0);Z.ViewerDisplay.appendChild(Z.MessageDisplay);c=parseInt(Z.Utils.getResource("z230"),10);Z.MessageDisplay.style.zIndex=(c+10).toString();c=Z.Utils.createTextElement("messageBox","",a-18+"px",b-40+"px","4px","4px","4px","solid","1px",!0,"verdana","12px",
"none",null,1,"auto","auto",null);Z.MessageDisplay.appendChild(c);Z.messages=document.getElementById("messageBox");b=b-18-5;a-=66;c=this.getResource("z438");f=new Z.Utils.Button("buttonMessageOk",c,null,null,null,null,"56px","18px",a+"px",b+"px","mousedown",this.messageOkButtonHandler,"z362","solid","1px",f,"0px","0px");Z.MessageDisplay.appendChild(f.elmt)},messageOkButtonHandler:function(a){Z.Utils.hideMessage();Z.Viewport&&Z.coordinatesVisible&&Z.Viewport.setCoordinatesDisplayVisibility(!1);return!0},
messageCancelButtonHandler:function(a){Z.Utils.hideMessage();return!1},showMessage:function(a,b,c,e,f){Z.MessageDisplay||Z.Utils.configureMessageDisplay();Z.MessageDisplay.messageTimer&&window.clearTimeout(MessageDisplay.messageTimer);var g=!0;f&&(-1!=Z.Utils.arrayIndexOf(Z.messageDisplayList,a)?g=!1:Z.messageDisplayList[Z.messageDisplayList.length]=a);if(g&&(Z.messages&&(Z.messages.value=a),Z.MessageDisplay.style.display="inline-block","undefined"!==typeof e&&null!==e&&(a=document.getElementById("textBoxFor-messageBox"))&&
(a.firstChild.style.textAlign=e),e=document.getElementById("buttonMessageOk"),a=parseInt(this.getResource("z436"),10),"undefined"!==typeof b&&null!==b&&b?(e.style.display="inline-block",Z.MessageDisplay.style.height=a+"px"):(e.style.display="none",Z.MessageDisplay.style.height=a-22+"px"),"undefined"!==typeof c&&null!==c&&!isNaN(c))){"undefined"!==typeof Z.MessageDisplay.messageTimer&&null!==Z.MessageDisplay.messageTimer&&window.clearTimeout(Z.MessageDisplay.messageTimer);if("undefined"===typeof c||
null===c)c=3E3;Z.MessageDisplay.messageTimer=window.setTimeout(Z.Utils.hideMessageTimerHandler,c)}},hideMessage:function(){Z.MessageDisplay&&(Z.MessageDisplay.style.display="none")},hideMessageTimerHandler:function(){Z.MessageDisplay.messageTimer&&(window.clearTimeout(Z.MessageDisplay.messageTimer),Z.MessageDisplay.messageTimer=null);Z.Utils.hideMessage()},configureCoordinatesDisplay:function(){var a=parseInt(this.getResource("z417"),10),b=parseInt(this.getResource("z415"),10),c=Z.viewerW-a-20,e=
Z.viewerH-b-30,f=this.getResource("z99");Z.CoordinatesDisplay=this.createContainerElement("div","CoordinatesDisplay","inline-block","absolute","hidden",a+"px",b+"px",c+"px",e+"px","solid","1px",f,"0px","0px","normal");Z.ViewerDisplay.appendChild(Z.CoordinatesDisplay);c=parseInt(Z.Utils.getResource("z230"),10);Z.CoordinatesDisplay.style.zIndex=(c+8).toString();c=Z.Utils.getResource("z416");c=Z.Utils.createTextElement("coordsLabelBox",c,a-18+"px","28px","4px","4px","4px","solid","1px",!0,"verdana",
"12px","none",null,1,"auto","auto",null);Z.CoordinatesDisplay.appendChild(c);if(c=document.getElementById("textBoxFor-coordsLabelBox"))c.firstChild.style.textAlign="center";c=Z.Utils.createTextElement("coordsDisplayBox","",a-18+"px","18px","4px","46px","4px","solid","1px",!0,"verdana","12px","none",null,1,"auto","auto",null);Z.CoordinatesDisplay.appendChild(c);Z.coordinates=document.getElementById("coordsDisplayBox");if(c=document.getElementById("textBoxFor-coordsDisplayBox"))c.firstChild.style.textAlign=
"center";a=Z.Utils.createTextElement("coordsSaveBox","",a-18+"px",b-92+"px","4px","78px","4px","solid","1px",!0,"verdana","12px","none",null,1,"auto","auto",null);Z.CoordinatesDisplay.appendChild(a);Z.coordinatesSave=document.getElementById("coordsSaveBox");if(a=document.getElementById("textBoxFor-coordsSaveBox"))a.firstChild.style.textAlign="center"},showCoordinates:function(a){Z.CoordinatesDisplay||Z.Utils.configureCoordinatesDisplay();Z.coordinates&&(Z.coordinates.value=a)},saveCoordinates:function(a){Z.CoordinatesDisplay||
Z.Utils.configureCoordinatesDisplay();Z.coordinatesSave&&(Z.coordinatesSave.value+=a+"\n")},configureTraceDisplay:function(){var a=Z.viewerH-330,b=this.getResource("z229");Z.TraceDisplay=this.createContainerElement("div","TraceDisplay","inline-block","absolute","hidden","280px","280px","10px",a+"px","solid","1px",b,"0px","10px","normal");Z.ViewerDisplay.appendChild(Z.TraceDisplay);a=parseInt(Z.Utils.getResource("z230"),10);Z.TraceDisplay.style.zIndex=(a+12).toString();a=Z.Utils.getResource("UI_TRACEDISPLAYTITLE");
a=Z.Utils.createTextElement("debugTraces",a,"265px","155px","10px","10px","5px","solid","1px",!0,"verdana","12px","none",null,1,"auto","auto",null);Z.TraceDisplay.appendChild(a);Z.traces=document.getElementById("debugTraces");var a=parseInt(Z.Utils.getResource("DEFAULT_TRACEDISPLAYTEXTFONTSIZE"),10),b=parseInt(Z.Utils.getResource("DEFAULT_TRACEDISPLAYTEXTPADDINGSMALL"),10),c=textH=16,e=a-2,f=Z.Utils.createContainerElement("div","labelTileStatusTextBox","inline-block","absolute","hidden","1px","1px",
"0px","0px","none","0px","transparent none","0px","0px","nowrap",null,!0),g=document.createTextNode(Z.Utils.getResource("UI_TRACEDISPLAYTILESTATUSTEXT"));f.appendChild(g);Z.TraceDisplay.appendChild(f);if(f=document.getElementById("labelTileStatusTextBox"))g=f.style,g.width="275px",g.height=c+"px",g.left="10px",g.top="183px",Z.Utils.setTextNodeStyle(f,"black","verdana",e+"px","none","normal","normal","normal","normal","1em","center","none");f=17;g=Z.Utils.createTextElement("tilesRequiredTextElement",
"","1px","1px","1px","1px","0px","solid","1px",!1,"verdana","1px","none",null,1,"hidden","hidden","off");Z.TraceDisplay.appendChild(g);if(g=document.getElementById("textBoxFor-tilesRequiredTextElement")){var m=g.style;m.width="37px";m.height=textH+"px";m.left=f+"px";m.top="198px";Z.Utils.setTextAreaStyle(g,"black","verdana",a+"px","none","normal","normal","normal","normal","1em","center","none",b+"px");f+=45}g=Z.Utils.createTextElement("tilesCachedTextElement","","1px","1px","1px","1px","0px","solid",
"1px",!1,"verdana","1px","none",null,1,"hidden","hidden","off");Z.TraceDisplay.appendChild(g);if(g=document.getElementById("textBoxFor-tilesCachedTextElement"))m=g.style,m.width="37px",m.height=textH+"px",m.left=f+"px",m.top="198px",Z.Utils.setTextAreaStyle(g,"black","verdana",a+"px","none","normal","normal","normal","normal","1em","center","none",b+"px"),f+=45;g=Z.Utils.createTextElement("tilesRequestedTextElement","","1px","1px","1px","1px","0px","solid","1px",!1,"verdana","1px","none",null,1,"hidden",
"hidden","off");Z.TraceDisplay.appendChild(g);if(g=document.getElementById("textBoxFor-tilesRequestedTextElement"))m=g.style,m.width="37px",m.height=textH+"px",m.left=f+"px",m.top="198px",Z.Utils.setTextAreaStyle(g,"black","verdana",a+"px","none","normal","normal","normal","normal","1em","center","none",b+"px"),f+=45;g=Z.Utils.createTextElement("tilesLoadedTextElement","","1px","1px","1px","1px","0px","solid","1px",!1,"verdana","1px","none",null,1,"hidden","hidden","off");Z.TraceDisplay.appendChild(g);
if(g=document.getElementById("textBoxFor-tilesLoadedTextElement"))m=g.style,m.width="37px",m.height=textH+"px",m.left=f+"px",m.top="198px",Z.Utils.setTextAreaStyle(g,"black","verdana",a+"px","none","normal","normal","normal","normal","1em","center","none",b+"px"),f+=45;g=Z.Utils.createTextElement("tilesDisplayedTextElement","","1px","1px","1px","1px","0px","solid","1px",!1,"verdana","1px","none",null,1,"hidden","hidden","off");Z.TraceDisplay.appendChild(g);if(g=document.getElementById("textBoxFor-tilesDisplayedTextElement"))m=
g.style,m.width="37px",m.height=textH+"px",m.left=f+"px",m.top="198px",Z.Utils.setTextAreaStyle(g,"black","verdana",a+"px","none","normal","normal","normal","normal","1em","center","none",b+"px"),f+=45;g=Z.Utils.createTextElement("tilesWaitingTextElement","","1px","1px","1px","1px","0px","solid","1px",!1,"verdana","1px","none",null,1,"hidden","hidden","off");Z.TraceDisplay.appendChild(g);if(g=document.getElementById("textBoxFor-tilesWaitingTextElement"))m=g.style,m.width="37px",m.height=textH+"px",
m.left=f+"px",m.top="198px",Z.Utils.setTextAreaStyle(g,"black","verdana",a+"px","none","normal","normal","normal","normal","1em","center","none",b+"px");f=Z.Utils.createContainerElement("div","labelElapsedTimeTextBox","inline-block","absolute","hidden","1px","1px","0px","0px","none","0px","transparent none","0px","0px","nowrap",null,!0);g=document.createTextNode(Z.Utils.getResource("UI_TRACEDISPLAYELAPSEDTIMETEXT"));f.appendChild(g);Z.TraceDisplay.appendChild(f);if(f=document.getElementById("labelElapsedTimeTextBox"))g=
f.style,g.width="85px",g.height=c+"px",g.left="15px",g.top="224px",Z.Utils.setTextNodeStyle(f,"black","verdana",e+"px","none","normal","normal","normal","normal","1em","left","none");f=Z.Utils.createTextElement("tilesTimeElapsedTextElement","","1px","1px","1px","1px","0px","solid","1px",!1,"verdana","1px","none",null,1,"hidden","hidden","off");Z.TraceDisplay.appendChild(f);if(f=document.getElementById("textBoxFor-tilesTimeElapsedTextElement"))g=f.style,g.width="50px",g.height=textH+"px",g.left="67.5px",
g.top="220px",Z.Utils.setTextAreaStyle(f,"black","verdana",a+"px","none","normal","normal","normal","normal","1em","center","none",b+"px");f=Z.Utils.createContainerElement("div","labelTilesPerSecondTextBox","inline-block","absolute","hidden","1px","1px","0px","0px","none","0px","transparent none","0px","0px","nowrap",null,!0);g=document.createTextNode(Z.Utils.getResource("UI_TRACEDISPLAYTILESPERSECONDTEXT"));f.appendChild(g);Z.TraceDisplay.appendChild(f);if(f=document.getElementById("labelTilesPerSecondTextBox"))g=
f.style,g.width="85px",g.height=c+"px",g.left="130px",g.top="224px",Z.Utils.setTextNodeStyle(f,"black","verdana",e+"px","none","normal","normal","normal","normal","1em","left","none");c=Z.Utils.createTextElement("tilesPerSecondTextElement","","1px","1px","1px","1px","0px","solid","1px",!1,"verdana","1px","none",null,1,"hidden","hidden","off");Z.TraceDisplay.appendChild(c);if(c=document.getElementById("textBoxFor-tilesPerSecondTextElement"))e=c.style,e.width="50px",e.height=textH+"px",e.left="215px",
e.top="220px",Z.Utils.setTextAreaStyle(c,"black","verdana",a+"px","none","normal","normal","normal","normal","1em","center","none",b+"px");a=58;b=10;c=this.getResource("z228");e=this.getResource("z446");e=new this.Button("buttonShowGlobals",e,null,null,null,null,a+"px","42px",b+"px","249px","mousedown",this.showGlobals,"z382","solid","1px",c,"0px","0px");Z.TraceDisplay.appendChild(e.elmt);b+=a+10;e=this.getResource("z449");e=new this.Button("buttonToggleDisplay",e,null,null,null,null,a+"px","42px",
b+"px","249px","mousedown",Z.Viewport.toggleDisplay,"z390","solid","1px",c,"0px","0px");Z.TraceDisplay.appendChild(e.elmt);b+=a+10;e=this.getResource("z447");e=new this.Button("buttonToggleBackfill",e,null,null,null,null,a+"px","42px",b+"px","249px","mousedown",Z.Viewport.toggleBackfill,"z388","solid","1px",c,"0px","0px");Z.TraceDisplay.appendChild(e.elmt);b+=a+10;a+=12;e=this.getResource("z448");a=new this.Button("buttonToggleConstrainPan",e,null,null,null,null,a+"px","42px",b+"px","249px","mousedown",
Z.Viewport.toggleConstrainPan,"z389","solid","1px",c,"0px","0px");Z.TraceDisplay.appendChild(a.elmt)},showTraces:function(){Z.TraceDisplay?Z.TraceDisplay.style.display="inline-block":Z.Utils.configureTraceDisplay()},hideTraces:function(){Z.TraceDisplay.style.display="none"},trace:function(a,b,c){b=b?"\n":"";c=c?"\n\n":"\n";Z.TraceDisplay||Z.Utils.configureTraceDisplay();Z.traces&&(Z.traces.value+=b+a+c,2==Z.debug&&(Z.traces.scrollTop=Z.traces.scrollHeight))},traceTileStatus:function(a,b,c,e,f,g){if(!(m&&
s&&p&&x&&C&&t))var m=document.getElementById("tilesRequiredTextElement"),s=document.getElementById("tilesCachedTextElement"),p=document.getElementById("tilesRequestedTextElement"),x=document.getElementById("tilesLoadedTextElement"),C=document.getElementById("tilesDisplayedTextElement"),t=document.getElementById("tilesWaitingTextElement");m&&s&&p&&x&&C&&t&&("undefined"!==typeof a&&null!==a&&(m.value=a.toString()),"undefined"!==typeof b&&null!==b&&(s.value=b.toString()),"undefined"!==typeof c&&null!==
c&&(p.value=c.toString()),"undefined"!==typeof e&&null!==e&&(x.value=e.toString()),"undefined"!==typeof f&&null!==f&&(C.value=f.toString()),"undefined"!==typeof g&&null!==g&&(t.value=g.toString()))},traceTileSpeed:function(a,b){if(!c||!e)var c=document.getElementById("tilesTimeElapsedTextElement"),e=document.getElementById("tilesPerSecondTextElement");c&&e&&("undefined"!==typeof a&&null!==a&&(c.value=a.toString()),"undefined"!==typeof b&&null!==b&&(e.value=Math.round(b).toString()))},showGlobals:function(){var a;
a="\n                            ZOOMIFY IMAGE VIEWER - CURRENT VALUES\n";a+="\n";a+="VIEW:    ";a+="Z.imageX="+Z.imageX+",   ";a+="Z.imageY="+Z.imageY+",   ";a+="Z.imageZ="+Z.imageZ+",   ";a+="Z.imageR="+Z.imageR+",   ";a+="Z.priorX="+Z.priorX+",   ";a+="Z.priorY="+Z.priorY+",   ";a+="Z.priorZ="+Z.priorZ+",   ";a+="Z.priorR="+Z.priorR+",   ";a+="\n";a+="IMAGE & SKIN:    ";a+="Z.imagePath="+Z.imagePath+",   ";a+="Z.skinPath="+Z.skinPath+",   ";a+="Z.skinMode="+Z.skinMode+",   ";a+="Z.imageW="+Z.imageW+
",   ";a+="Z.imageH="+Z.imageH+",   ";a+="tierCount="+Z.Viewport.getTierCount()+",   ";a+="z320="+Z.Viewport.getTileW()+",   ";a+="z319="+Z.Viewport.getTileH()+"\n";a+="\n";a+="PAGE & BROWSER:    ";a+="Z.pageContainer="+Z.pageContainer+",   ";a+="Z.browser="+Z.browser+",   ";a+="Z.browserVersion="+Z.browserVersion+",   ";a+="Z.canvasSupported="+Z.canvasSupported+",   ";a+="Z.cssTransformsSupported="+Z.cssTransformsSupported+",   ";a+="Z.cssTransformProperty="+Z.cssTransformProperty+",   ";a+="Z.cssTransformNoUnits="+
Z.cssTransformNoUnits+",   ";a+="Z.alphaSupported="+Z.alphaSupported+",   ";a+="Z.renderQuality="+Z.renderQuality+",   ";a+="Z.rotationSupported="+Z.rotationSupported+",   ";a+="Z.fullScreenSupported="+Z.fullScreenSupported+",   ";a+="Z.float32ArraySupported="+Z.float32ArraySupported+",   ";a+="Z.uInt8ArraySupported="+Z.uInt8ArraySupported+",   ";a+="Z.xmlHttpRequestSupport="+Z.xmlHttpRequestSupport+",   ";a+="Z.definePropertySupported="+Z.definePropertySupported+",   ";a+="Z.responseArraySupported="+
Z.responseArraySupported+",   ";a+="Z.responseArrayPrototyped="+Z.responseArrayPrototyped+",   ";a+="Z.mobileDevice="+Z.mobileDevice+",   ";a+="Z.zifSupported="+Z.zifSupported+",   ";a+="Z.localUse="+Z.localUse+"\n";a+="\n";a+="VIEWER OPTIONS & DEFAULTS:    ";a+="Z.initialX="+Z.initialX+",   ";a+="Z.initialY="+Z.initialY+",   ";a+="Z.initialZ="+Z.initialZ+",   ";a+="Z.minZ="+Z.minZ+",   ";a+="Z.maxZ="+Z.maxZ+",   ";a+="Z.fitZ="+Z.fitZ+",   ";a+="Z.zoomSpeed="+Z.zoomSpeed+",   ";a+="Z.panSpeed="+Z.panSpeed+
",   ";a+="Z.fadeInSpeed="+Z.fadeInSpeed+",   ";a+="Z.toolbarVisible="+Z.toolbarVisible+",   ";a+="Z.toolbarW="+Z.toolbarW+",   ";a+="Z.toolbarCurrentW="+Z.toolbarCurrentW+",   ";a+="Z.toolbarH="+Z.toolbarH+",   ";a+="Z.toolbarPosition="+Z.toolbarPosition+",   ";a+="Z.tooltipsVisible="+Z.tooltipsVisible+",   ";a+="Z.helpVisible="+Z.helpVisible+",   ";a+="Z.navigatorVisible="+Z.navigatorVisible+",   ";a+="Z.navigatorW="+Z.navigatorW+",   ";a+="Z.navigatorH="+Z.navigatorH+",   ";a+="Z.navigatorL="+
Z.navigatorL+",   ";a+="Z.navigatorT="+Z.navigatorT+",   ";a+="Z.navigatorFit="+Z.navigatorFit+",   ";a+="Z.clickZoom="+Z.clickZoom+",   ";a+="Z.clickPan="+Z.clickPan+",   ";a+="Z.mousePan="+Z.mousePan+",   ";a+="Z.keys="+Z.keys+",   ";a+="Z.constrainPan="+Z.constrainPan+",   ";a+="Z.smoothPan="+Z.smoothPan+",   ";a+="Z.smoothPanEasing="+Z.smoothPanEasing+",   ";a+="Watermark alpha = "+Z.Utils.getResource("z234")+",   ";a+="Z.watermarkPath="+Z.watermarkPath+",   ";a+="Z.copyrightPath="+Z.copyrightPath+
",   ";a+="Z.hotspotPath="+Z.hotspotPath+",   ";a+="Z.tourPath="+Z.tourPath+",   ";a+="Z.slidePath="+Z.slidePath+",   ";a+="Z.slideTransitionSpeed="+Z.slideTransitionSpeed+",   ";a+="Z.audioContent="+Z.audioContent+",   ";a+="Z.audioMuted="+Z.audioMuted+",   ";a+="Z.annotationPath="+Z.annotationPath+",   ";a+="Z.saveHandlerPath="+Z.saveHandlerPath+",   ";a+="Z.minimizeVisible="+Z.minimizeVisible+",   ";a+="Z.sliderVisible="+Z.sliderVisible+",   ";a+="Z.panButtonsVisible="+Z.panButtonsVisible+",   ";
a+="Z.resetVisible="+Z.resetVisible+",   ";a+="Z.fullScreenVisible="+Z.fullScreenVisible+",   ";a+="Z.fullPageVisible="+Z.fullPageVisible+",   ";a+="Z.initialFullPage="+Z.initialFullPage+",   ";a+="Z.measureVisible="+Z.measureVisible+",   ";a+="Z.rotationVisible="+Z.rotationVisible+",   ";a+="Z.initialRotation="+Z.initialRotation+",   ";a+="Z.virtualPointerVisible="+Z.virtualPointerVisible+",   ";a+="Z.crosshairsVisible="+Z.crosshairsVisible+",   ";a+="Z.rulerVisible="+Z.rulerVisible+",   ";a+="Z.units="+
Z.units+",   ";a+="Z.unitsPerImage="+Z.unitsPerImage+",   ";a+="Z.pixelsPerUnit="+Z.pixelsPerUnit+",   ";a+="Z.sourceMagnification="+Z.sourceMagnification+",   ";a+="Z.rulerListType="+Z.rulerListType+",   ";a+="Z.rulerW="+Z.rulerW+",   ";a+="Z.rulerH="+Z.rulerH+",   ";a+="Z.rulerL="+Z.rulerL+",   ";a+="Z.rulerT="+Z.rulerT+",   ";a+="Z.coordinatesVisible="+Z.coordinatesVisible+",   ";a+="Z.imageFiltersVisible="+Z.imageFiltersVisible+",   ";a+="Z.progressVisible="+Z.progressVisible+",   ";a+="Z.logoVisible="+
Z.logoVisible+",   ";a+="Z.logoLinkURL="+Z.logoLinkURL+",   ";a+="Z.logoCustomPath="+Z.logoCustomPath+",   ";a+="Z.canvas="+Z.canvas+",   ";a+="Z.debug="+Z.debug+",   ";a+="Z.imageProperties="+Z.imageProperties+",   ";a+="Z.serverIP="+Z.serverIP+",   ";a+="Z.serverPort="+Z.serverPort+",   ";a+="Z.tileHandlerPath="+Z.tileHandlerPath+",   ";a+="Z.tileHandlerPathFull="+Z.tileHandlerPathFull+",   ";a+="Z.tileSource="+Z.tileSource+",   ";a+="Z.tileType="+Z.tileType+",   ";a+="Z.freehandVisible="+Z.freehandVisible+
",   ";a+="Z.textVisible="+Z.textVisible+",   ";a+="Z.iconVisible="+Z.iconVisible+",   ";a+="Z.rectangleVisible="+Z.rectangleVisible+",   ";a+="Z.polygonVisible="+Z.polygonVisible+",   ";a+="\n";a+="INTERNAL VALUES:    ";a+="\n";a+="displayW="+Z.Viewport.getW()+",   ";a+="displayH="+Z.Viewport.getH()+",   ";a+="tierCurrent="+Z.Viewport.getTierCurrent()+",   ";a+="tierBackfill="+Z.Viewport.getTierBackfill()+",   ";a+="tierBackfillDynamic="+Z.Viewport.getTierBackfillDynamic()+",   ";a+="tierBackfillOversize="+
Z.Viewport.getTierBackfillOversize()+",   ";a+="tierScale="+Z.Viewport.getTierScale()+",   ";a+="z315="+Z.Viewport.getTiersScaleUpMax()+",   ";a+="z314="+Z.Viewport.getTiersScaleDownMax()+",   ";a+="z316="+Z.Viewport.getTilesCacheMax()+",   ";a+="Z.useCanvas="+Z.useCanvas+"\n";a+="Z.specialStorageEnabled="+Z.specialStorageEnabled+"\n";a+="Z.editMode="+Z.editMode+"\n";a+="Z.labelMode="+Z.labelMode+"\n";a+="Z.editing="+Z.editing+"\n";a+="\n";a+="INTERNAL LISTS:    ";a+="tierWs="+Z.Viewport.getTierWs()+
",   ";a+="tierHs="+Z.Viewport.getTierHs()+",   ";a+="tierTileCounts="+Z.Viewport.getTierTileCounts()+",   ";a+="tilesLoadingNames="+Z.Viewport.getTilesLoadingNames()+"\n";a+="\n";alert(a)}};